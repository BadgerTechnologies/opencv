Description: protoc --cpp_out . xxx.proto
Author: Mo Zhou
diff --git a/modules/dnn/misc/tensorflow/attr_value.pb.cc b/modules/dnn/misc/tensorflow/attr_value.pb.cc
index 99860999b..bb286112b 100644
--- a/modules/dnn/misc/tensorflow/attr_value.pb.cc
+++ b/modules/dnn/misc/tensorflow/attr_value.pb.cc
@@ -7,7 +7,6 @@
 
 #include <google/protobuf/stubs/common.h>
 #include <google/protobuf/stubs/port.h>
-#include <google/protobuf/stubs/once.h>
 #include <google/protobuf/io/coded_stream.h>
 #include <google/protobuf/wire_format_lite_inl.h>
 #include <google/protobuf/descriptor.h>
@@ -19,6 +18,17 @@
 #include "third_party/protobuf/version.h"
 #endif
 // @@protoc_insertion_point(includes)
+
+namespace protobuf_attr_5fvalue_2eproto {
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_attr_5fvalue_2eproto ::google::protobuf::internal::SCCInfo<2> scc_info_AttrValue_ListValue;
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_attr_5fvalue_2eproto ::google::protobuf::internal::SCCInfo<3> scc_info_AttrValue;
+}  // namespace protobuf_attr_5fvalue_2eproto
+namespace protobuf_tensor_2eproto {
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_tensor_2eproto ::google::protobuf::internal::SCCInfo<1> scc_info_TensorProto;
+}  // namespace protobuf_tensor_2eproto
+namespace protobuf_tensor_5fshape_2eproto {
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_tensor_5fshape_2eproto ::google::protobuf::internal::SCCInfo<1> scc_info_TensorShapeProto;
+}  // namespace protobuf_tensor_5fshape_2eproto
 namespace opencv_tensorflow {
 class AttrValue_ListValueDefaultTypeInternal {
  public:
@@ -52,16 +62,9 @@ class NameAttrListDefaultTypeInternal {
 } _NameAttrList_default_instance_;
 }  // namespace opencv_tensorflow
 namespace protobuf_attr_5fvalue_2eproto {
-void InitDefaultsAttrValue_ListValueImpl() {
+static void InitDefaultsAttrValue_ListValue() {
   GOOGLE_PROTOBUF_VERIFY_VERSION;
 
-#ifdef GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  ::google::protobuf::internal::InitProtobufDefaultsForceUnique();
-#else
-  ::google::protobuf::internal::InitProtobufDefaults();
-#endif  // GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  protobuf_tensor_5fshape_2eproto::InitDefaultsTensorShapeProto();
-  protobuf_tensor_2eproto::InitDefaultsTensorProto();
   {
     void* ptr = &::opencv_tensorflow::_AttrValue_ListValue_default_instance_;
     new (ptr) ::opencv_tensorflow::AttrValue_ListValue();
@@ -70,22 +73,14 @@ void InitDefaultsAttrValue_ListValueImpl() {
   ::opencv_tensorflow::AttrValue_ListValue::InitAsDefaultInstance();
 }
 
-void InitDefaultsAttrValue_ListValue() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &InitDefaultsAttrValue_ListValueImpl);
-}
+::google::protobuf::internal::SCCInfo<2> scc_info_AttrValue_ListValue =
+    {{ATOMIC_VAR_INIT(::google::protobuf::internal::SCCInfoBase::kUninitialized), 2, InitDefaultsAttrValue_ListValue}, {
+      &protobuf_tensor_5fshape_2eproto::scc_info_TensorShapeProto.base,
+      &protobuf_tensor_2eproto::scc_info_TensorProto.base,}};
 
-void InitDefaultsAttrValueImpl() {
+static void InitDefaultsAttrValue() {
   GOOGLE_PROTOBUF_VERIFY_VERSION;
 
-#ifdef GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  ::google::protobuf::internal::InitProtobufDefaultsForceUnique();
-#else
-  ::google::protobuf::internal::InitProtobufDefaults();
-#endif  // GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  protobuf_tensor_5fshape_2eproto::InitDefaultsTensorShapeProto();
-  protobuf_tensor_2eproto::InitDefaultsTensorProto();
-  protobuf_attr_5fvalue_2eproto::InitDefaultsAttrValue_ListValue();
   {
     void* ptr = &::opencv_tensorflow::_AttrValue_default_instance_;
     new (ptr) ::opencv_tensorflow::AttrValue();
@@ -105,9 +100,15 @@ void InitDefaultsAttrValueImpl() {
   ::opencv_tensorflow::NameAttrList::InitAsDefaultInstance();
 }
 
-void InitDefaultsAttrValue() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &InitDefaultsAttrValueImpl);
+::google::protobuf::internal::SCCInfo<3> scc_info_AttrValue =
+    {{ATOMIC_VAR_INIT(::google::protobuf::internal::SCCInfoBase::kUninitialized), 3, InitDefaultsAttrValue}, {
+      &protobuf_tensor_5fshape_2eproto::scc_info_TensorShapeProto.base,
+      &protobuf_tensor_2eproto::scc_info_TensorProto.base,
+      &protobuf_attr_5fvalue_2eproto::scc_info_AttrValue_ListValue.base,}};
+
+void InitDefaults() {
+  ::google::protobuf::internal::InitSCC(&scc_info_AttrValue_ListValue.base);
+  ::google::protobuf::internal::InitSCC(&scc_info_AttrValue.base);
 }
 
 ::google::protobuf::Metadata file_level_metadata[4];
@@ -174,15 +175,14 @@ static ::google::protobuf::Message const * const file_default_instances[] = {
 
 void protobuf_AssignDescriptors() {
   AddDescriptors();
-  ::google::protobuf::MessageFactory* factory = NULL;
   AssignDescriptors(
-      "attr_value.proto", schemas, file_default_instances, TableStruct::offsets, factory,
+      "attr_value.proto", schemas, file_default_instances, TableStruct::offsets,
       file_level_metadata, NULL, NULL);
 }
 
 void protobuf_AssignDescriptorsOnce() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &protobuf_AssignDescriptors);
+  static ::google::protobuf::internal::once_flag once;
+  ::google::protobuf::internal::call_once(once, protobuf_AssignDescriptors);
 }
 
 void protobuf_RegisterTypes(const ::std::string&) GOOGLE_PROTOBUF_ATTRIBUTE_COLD;
@@ -227,8 +227,8 @@ void AddDescriptorsImpl() {
 }
 
 void AddDescriptors() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &AddDescriptorsImpl);
+  static ::google::protobuf::internal::once_flag once;
+  ::google::protobuf::internal::call_once(once, AddDescriptorsImpl);
 }
 // Force AddDescriptors() to be called at dynamic initialization time.
 struct StaticDescriptorInitializer {
@@ -261,9 +261,8 @@ const int AttrValue_ListValue::kTensorFieldNumber;
 
 AttrValue_ListValue::AttrValue_ListValue()
   : ::google::protobuf::Message(), _internal_metadata_(NULL) {
-  if (GOOGLE_PREDICT_TRUE(this != internal_default_instance())) {
-    ::protobuf_attr_5fvalue_2eproto::InitDefaultsAttrValue_ListValue();
-  }
+  ::google::protobuf::internal::InitSCC(
+      &protobuf_attr_5fvalue_2eproto::scc_info_AttrValue_ListValue.base);
   SharedCtor();
   // @@protoc_insertion_point(constructor:opencv_tensorflow.AttrValue.ListValue)
 }
@@ -277,7 +276,7 @@ AttrValue_ListValue::AttrValue_ListValue(::google::protobuf::Arena* arena)
   type_(arena),
   shape_(arena),
   tensor_(arena) {
-  ::protobuf_attr_5fvalue_2eproto::InitDefaultsAttrValue_ListValue();
+  ::google::protobuf::internal::InitSCC(&protobuf_attr_5fvalue_2eproto::scc_info_AttrValue_ListValue.base);
   SharedCtor();
   RegisterArenaDtor(arena);
   // @@protoc_insertion_point(arena_constructor:opencv_tensorflow.AttrValue.ListValue)
@@ -291,14 +290,12 @@ AttrValue_ListValue::AttrValue_ListValue(const AttrValue_ListValue& from)
       b_(from.b_),
       type_(from.type_),
       shape_(from.shape_),
-      tensor_(from.tensor_),
-      _cached_size_(0) {
+      tensor_(from.tensor_) {
   _internal_metadata_.MergeFrom(from._internal_metadata_);
   // @@protoc_insertion_point(copy_constructor:opencv_tensorflow.AttrValue.ListValue)
 }
 
 void AttrValue_ListValue::SharedCtor() {
-  _cached_size_ = 0;
 }
 
 AttrValue_ListValue::~AttrValue_ListValue() {
@@ -317,9 +314,7 @@ void AttrValue_ListValue::ArenaDtor(void* object) {
 void AttrValue_ListValue::RegisterArenaDtor(::google::protobuf::Arena* arena) {
 }
 void AttrValue_ListValue::SetCachedSize(int size) const {
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  _cached_size_.Set(size);
 }
 const ::google::protobuf::Descriptor* AttrValue_ListValue::descriptor() {
   ::protobuf_attr_5fvalue_2eproto::protobuf_AssignDescriptorsOnce();
@@ -327,13 +322,10 @@ const ::google::protobuf::Descriptor* AttrValue_ListValue::descriptor() {
 }
 
 const AttrValue_ListValue& AttrValue_ListValue::default_instance() {
-  ::protobuf_attr_5fvalue_2eproto::InitDefaultsAttrValue_ListValue();
+  ::google::protobuf::internal::InitSCC(&protobuf_attr_5fvalue_2eproto::scc_info_AttrValue_ListValue.base);
   return *internal_default_instance();
 }
 
-AttrValue_ListValue* AttrValue_ListValue::New(::google::protobuf::Arena* arena) const {
-  return ::google::protobuf::Arena::CreateMessage<AttrValue_ListValue>(arena);
-}
 
 void AttrValue_ListValue::Clear() {
 // @@protoc_insertion_point(message_clear_start:opencv_tensorflow.AttrValue.ListValue)
@@ -357,7 +349,7 @@ bool AttrValue_ListValue::MergePartialFromCodedStream(
   ::google::protobuf::uint32 tag;
   // @@protoc_insertion_point(parse_start:opencv_tensorflow.AttrValue.ListValue)
   for (;;) {
-    ::std::pair< ::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
+    ::std::pair<::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
     tag = p.first;
     if (!p.second) goto handle_unusual;
     switch (::google::protobuf::internal::WireFormatLite::GetTagFieldNumber(tag)) {
@@ -463,7 +455,8 @@ bool AttrValue_ListValue::MergePartialFromCodedStream(
       case 7: {
         if (static_cast< ::google::protobuf::uint8>(tag) ==
             static_cast< ::google::protobuf::uint8>(58u /* 58 & 0xFF */)) {
-          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(input, add_shape()));
+          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(
+                input, add_shape()));
         } else {
           goto handle_unusual;
         }
@@ -474,7 +467,8 @@ bool AttrValue_ListValue::MergePartialFromCodedStream(
       case 8: {
         if (static_cast< ::google::protobuf::uint8>(tag) ==
             static_cast< ::google::protobuf::uint8>(66u /* 66 & 0xFF */)) {
-          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(input, add_tensor()));
+          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(
+                input, add_tensor()));
         } else {
           goto handle_unusual;
         }
@@ -560,14 +554,18 @@ void AttrValue_ListValue::SerializeWithCachedSizes(
   for (unsigned int i = 0,
       n = static_cast<unsigned int>(this->shape_size()); i < n; i++) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      7, this->shape(static_cast<int>(i)), output);
+      7,
+      this->shape(static_cast<int>(i)),
+      output);
   }
 
   // repeated .opencv_tensorflow.TensorProto tensor = 8;
   for (unsigned int i = 0,
       n = static_cast<unsigned int>(this->tensor_size()); i < n; i++) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      8, this->tensor(static_cast<int>(i)), output);
+      8,
+      this->tensor(static_cast<int>(i)),
+      output);
   }
 
   if ((_internal_metadata_.have_unknown_fields() &&  ::google::protobuf::internal::GetProto3PreserveUnknownsDefault())) {
@@ -772,9 +770,7 @@ size_t AttrValue_ListValue::ByteSizeLong() const {
   }
 
   int cached_size = ::google::protobuf::internal::ToCachedSize(total_size);
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = cached_size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  SetCachedSize(cached_size);
   return total_size;
 }
 
@@ -848,15 +844,14 @@ void AttrValue_ListValue::UnsafeArenaSwap(AttrValue_ListValue* other) {
 }
 void AttrValue_ListValue::InternalSwap(AttrValue_ListValue* other) {
   using std::swap;
-  s_.InternalSwap(&other->s_);
+  s_.InternalSwap(CastToBase(&other->s_));
   i_.InternalSwap(&other->i_);
   f_.InternalSwap(&other->f_);
   b_.InternalSwap(&other->b_);
   type_.InternalSwap(&other->type_);
-  shape_.InternalSwap(&other->shape_);
-  tensor_.InternalSwap(&other->tensor_);
+  CastToBase(&shape_)->InternalSwap(CastToBase(&other->shape_));
+  CastToBase(&tensor_)->InternalSwap(CastToBase(&other->tensor_));
   _internal_metadata_.Swap(&other->_internal_metadata_);
-  swap(_cached_size_, other->_cached_size_);
 }
 
 ::google::protobuf::Metadata AttrValue_ListValue::GetMetadata() const {
@@ -890,7 +885,7 @@ void AttrValue::set_allocated_shape(::opencv_tensorflow::TensorShapeProto* shape
   clear_value();
   if (shape) {
     ::google::protobuf::Arena* submessage_arena =
-      reinterpret_cast< ::google::protobuf::MessageLite*>(shape)->GetArena();
+      reinterpret_cast<::google::protobuf::MessageLite*>(shape)->GetArena();
     if (message_arena != submessage_arena) {
       shape = ::google::protobuf::internal::GetOwnedMessage(
           message_arena, shape, submessage_arena);
@@ -913,7 +908,7 @@ void AttrValue::set_allocated_tensor(::opencv_tensorflow::TensorProto* tensor) {
   clear_value();
   if (tensor) {
     ::google::protobuf::Arena* submessage_arena =
-      reinterpret_cast< ::google::protobuf::MessageLite*>(tensor)->GetArena();
+      reinterpret_cast<::google::protobuf::MessageLite*>(tensor)->GetArena();
     if (message_arena != submessage_arena) {
       tensor = ::google::protobuf::internal::GetOwnedMessage(
           message_arena, tensor, submessage_arena);
@@ -976,24 +971,22 @@ const int AttrValue::kPlaceholderFieldNumber;
 
 AttrValue::AttrValue()
   : ::google::protobuf::Message(), _internal_metadata_(NULL) {
-  if (GOOGLE_PREDICT_TRUE(this != internal_default_instance())) {
-    ::protobuf_attr_5fvalue_2eproto::InitDefaultsAttrValue();
-  }
+  ::google::protobuf::internal::InitSCC(
+      &protobuf_attr_5fvalue_2eproto::scc_info_AttrValue.base);
   SharedCtor();
   // @@protoc_insertion_point(constructor:opencv_tensorflow.AttrValue)
 }
 AttrValue::AttrValue(::google::protobuf::Arena* arena)
   : ::google::protobuf::Message(),
   _internal_metadata_(arena) {
-  ::protobuf_attr_5fvalue_2eproto::InitDefaultsAttrValue();
+  ::google::protobuf::internal::InitSCC(&protobuf_attr_5fvalue_2eproto::scc_info_AttrValue.base);
   SharedCtor();
   RegisterArenaDtor(arena);
   // @@protoc_insertion_point(arena_constructor:opencv_tensorflow.AttrValue)
 }
 AttrValue::AttrValue(const AttrValue& from)
   : ::google::protobuf::Message(),
-      _internal_metadata_(NULL),
-      _cached_size_(0) {
+      _internal_metadata_(NULL) {
   _internal_metadata_.MergeFrom(from._internal_metadata_);
   clear_has_value();
   switch (from.value_case()) {
@@ -1046,7 +1039,6 @@ AttrValue::AttrValue(const AttrValue& from)
 
 void AttrValue::SharedCtor() {
   clear_has_value();
-  _cached_size_ = 0;
 }
 
 AttrValue::~AttrValue() {
@@ -1068,9 +1060,7 @@ void AttrValue::ArenaDtor(void* object) {
 void AttrValue::RegisterArenaDtor(::google::protobuf::Arena* arena) {
 }
 void AttrValue::SetCachedSize(int size) const {
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  _cached_size_.Set(size);
 }
 const ::google::protobuf::Descriptor* AttrValue::descriptor() {
   ::protobuf_attr_5fvalue_2eproto::protobuf_AssignDescriptorsOnce();
@@ -1078,13 +1068,10 @@ const ::google::protobuf::Descriptor* AttrValue::descriptor() {
 }
 
 const AttrValue& AttrValue::default_instance() {
-  ::protobuf_attr_5fvalue_2eproto::InitDefaultsAttrValue();
+  ::google::protobuf::internal::InitSCC(&protobuf_attr_5fvalue_2eproto::scc_info_AttrValue.base);
   return *internal_default_instance();
 }
 
-AttrValue* AttrValue::New(::google::protobuf::Arena* arena) const {
-  return ::google::protobuf::Arena::CreateMessage<AttrValue>(arena);
-}
 
 void AttrValue::clear_value() {
 // @@protoc_insertion_point(one_of_clear_start:opencv_tensorflow.AttrValue)
@@ -1163,7 +1150,7 @@ bool AttrValue::MergePartialFromCodedStream(
   ::google::protobuf::uint32 tag;
   // @@protoc_insertion_point(parse_start:opencv_tensorflow.AttrValue)
   for (;;) {
-    ::std::pair< ::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
+    ::std::pair<::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
     tag = p.first;
     if (!p.second) goto handle_unusual;
     switch (::google::protobuf::internal::WireFormatLite::GetTagFieldNumber(tag)) {
@@ -1332,7 +1319,7 @@ void AttrValue::SerializeWithCachedSizes(
   // .opencv_tensorflow.AttrValue.ListValue list = 1;
   if (has_list()) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      1, *value_.list_, output);
+      1, this->_internal_list(), output);
   }
 
   // bytes s = 2;
@@ -1365,13 +1352,13 @@ void AttrValue::SerializeWithCachedSizes(
   // .opencv_tensorflow.TensorShapeProto shape = 7;
   if (has_shape()) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      7, *value_.shape_, output);
+      7, this->_internal_shape(), output);
   }
 
   // .opencv_tensorflow.TensorProto tensor = 8;
   if (has_tensor()) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      8, *value_.tensor_, output);
+      8, this->_internal_tensor(), output);
   }
 
   // string placeholder = 9;
@@ -1387,7 +1374,7 @@ void AttrValue::SerializeWithCachedSizes(
   // .opencv_tensorflow.NameAttrList func = 10;
   if (has_func()) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      10, *value_.func_, output);
+      10, this->_internal_func(), output);
   }
 
   if ((_internal_metadata_.have_unknown_fields() &&  ::google::protobuf::internal::GetProto3PreserveUnknownsDefault())) {
@@ -1408,7 +1395,7 @@ void AttrValue::SerializeWithCachedSizes(
   if (has_list()) {
     target = ::google::protobuf::internal::WireFormatLite::
       InternalWriteMessageToArray(
-        1, *value_.list_, deterministic, target);
+        1, this->_internal_list(), deterministic, target);
   }
 
   // bytes s = 2;
@@ -1443,14 +1430,14 @@ void AttrValue::SerializeWithCachedSizes(
   if (has_shape()) {
     target = ::google::protobuf::internal::WireFormatLite::
       InternalWriteMessageToArray(
-        7, *value_.shape_, deterministic, target);
+        7, this->_internal_shape(), deterministic, target);
   }
 
   // .opencv_tensorflow.TensorProto tensor = 8;
   if (has_tensor()) {
     target = ::google::protobuf::internal::WireFormatLite::
       InternalWriteMessageToArray(
-        8, *value_.tensor_, deterministic, target);
+        8, this->_internal_tensor(), deterministic, target);
   }
 
   // string placeholder = 9;
@@ -1468,7 +1455,7 @@ void AttrValue::SerializeWithCachedSizes(
   if (has_func()) {
     target = ::google::protobuf::internal::WireFormatLite::
       InternalWriteMessageToArray(
-        10, *value_.func_, deterministic, target);
+        10, this->_internal_func(), deterministic, target);
   }
 
   if ((_internal_metadata_.have_unknown_fields() &&  ::google::protobuf::internal::GetProto3PreserveUnknownsDefault())) {
@@ -1559,9 +1546,7 @@ size_t AttrValue::ByteSizeLong() const {
     }
   }
   int cached_size = ::google::protobuf::internal::ToCachedSize(total_size);
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = cached_size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  SetCachedSize(cached_size);
   return total_size;
 }
 
@@ -1676,7 +1661,6 @@ void AttrValue::InternalSwap(AttrValue* other) {
   swap(value_, other->value_);
   swap(_oneof_case_[0], other->_oneof_case_[0]);
   _internal_metadata_.Swap(&other->_internal_metadata_);
-  swap(_cached_size_, other->_cached_size_);
 }
 
 ::google::protobuf::Metadata AttrValue::GetMetadata() const {
@@ -1713,9 +1697,8 @@ const int NameAttrList::kAttrFieldNumber;
 
 NameAttrList::NameAttrList()
   : ::google::protobuf::Message(), _internal_metadata_(NULL) {
-  if (GOOGLE_PREDICT_TRUE(this != internal_default_instance())) {
-    ::protobuf_attr_5fvalue_2eproto::InitDefaultsAttrValue();
-  }
+  ::google::protobuf::internal::InitSCC(
+      &protobuf_attr_5fvalue_2eproto::scc_info_AttrValue.base);
   SharedCtor();
   // @@protoc_insertion_point(constructor:opencv_tensorflow.NameAttrList)
 }
@@ -1723,15 +1706,14 @@ NameAttrList::NameAttrList(::google::protobuf::Arena* arena)
   : ::google::protobuf::Message(),
   _internal_metadata_(arena),
   attr_(arena) {
-  ::protobuf_attr_5fvalue_2eproto::InitDefaultsAttrValue();
+  ::google::protobuf::internal::InitSCC(&protobuf_attr_5fvalue_2eproto::scc_info_AttrValue.base);
   SharedCtor();
   RegisterArenaDtor(arena);
   // @@protoc_insertion_point(arena_constructor:opencv_tensorflow.NameAttrList)
 }
 NameAttrList::NameAttrList(const NameAttrList& from)
   : ::google::protobuf::Message(),
-      _internal_metadata_(NULL),
-      _cached_size_(0) {
+      _internal_metadata_(NULL) {
   _internal_metadata_.MergeFrom(from._internal_metadata_);
   attr_.MergeFrom(from.attr_);
   name_.UnsafeSetDefault(&::google::protobuf::internal::GetEmptyStringAlreadyInited());
@@ -1744,7 +1726,6 @@ NameAttrList::NameAttrList(const NameAttrList& from)
 
 void NameAttrList::SharedCtor() {
   name_.UnsafeSetDefault(&::google::protobuf::internal::GetEmptyStringAlreadyInited());
-  _cached_size_ = 0;
 }
 
 NameAttrList::~NameAttrList() {
@@ -1764,9 +1745,7 @@ void NameAttrList::ArenaDtor(void* object) {
 void NameAttrList::RegisterArenaDtor(::google::protobuf::Arena* arena) {
 }
 void NameAttrList::SetCachedSize(int size) const {
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  _cached_size_.Set(size);
 }
 const ::google::protobuf::Descriptor* NameAttrList::descriptor() {
   ::protobuf_attr_5fvalue_2eproto::protobuf_AssignDescriptorsOnce();
@@ -1774,13 +1753,10 @@ const ::google::protobuf::Descriptor* NameAttrList::descriptor() {
 }
 
 const NameAttrList& NameAttrList::default_instance() {
-  ::protobuf_attr_5fvalue_2eproto::InitDefaultsAttrValue();
+  ::google::protobuf::internal::InitSCC(&protobuf_attr_5fvalue_2eproto::scc_info_AttrValue.base);
   return *internal_default_instance();
 }
 
-NameAttrList* NameAttrList::New(::google::protobuf::Arena* arena) const {
-  return ::google::protobuf::Arena::CreateMessage<NameAttrList>(arena);
-}
 
 void NameAttrList::Clear() {
 // @@protoc_insertion_point(message_clear_start:opencv_tensorflow.NameAttrList)
@@ -1799,7 +1775,7 @@ bool NameAttrList::MergePartialFromCodedStream(
   ::google::protobuf::uint32 tag;
   // @@protoc_insertion_point(parse_start:opencv_tensorflow.NameAttrList)
   for (;;) {
-    ::std::pair< ::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
+    ::std::pair<::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
     tag = p.first;
     if (!p.second) goto handle_unusual;
     switch (::google::protobuf::internal::WireFormatLite::GetTagFieldNumber(tag)) {
@@ -1895,7 +1871,7 @@ void NameAttrList::SerializeWithCachedSizes(
 
     if (output->IsSerializationDeterministic() &&
         this->attr().size() > 1) {
-      ::google::protobuf::scoped_array<SortItem> items(
+      ::std::unique_ptr<SortItem[]> items(
           new SortItem[this->attr().size()]);
       typedef ::google::protobuf::Map< ::std::string, ::opencv_tensorflow::AttrValue >::size_type size_type;
       size_type n = 0;
@@ -1905,7 +1881,7 @@ void NameAttrList::SerializeWithCachedSizes(
         items[static_cast<ptrdiff_t>(n)] = SortItem(&*it);
       }
       ::std::sort(&items[0], &items[static_cast<ptrdiff_t>(n)], Less());
-      ::google::protobuf::scoped_ptr<NameAttrList_AttrEntry_DoNotUse> entry;
+      ::std::unique_ptr<NameAttrList_AttrEntry_DoNotUse> entry;
       for (size_type i = 0; i < n; i++) {
         entry.reset(attr_.NewEntryWrapper(
             items[static_cast<ptrdiff_t>(i)]->first, items[static_cast<ptrdiff_t>(i)]->second));
@@ -1917,7 +1893,7 @@ void NameAttrList::SerializeWithCachedSizes(
         Utf8Check::Check(items[static_cast<ptrdiff_t>(i)]);
       }
     } else {
-      ::google::protobuf::scoped_ptr<NameAttrList_AttrEntry_DoNotUse> entry;
+      ::std::unique_ptr<NameAttrList_AttrEntry_DoNotUse> entry;
       for (::google::protobuf::Map< ::std::string, ::opencv_tensorflow::AttrValue >::const_iterator
           it = this->attr().begin();
           it != this->attr().end(); ++it) {
@@ -1975,7 +1951,7 @@ void NameAttrList::SerializeWithCachedSizes(
 
     if (deterministic &&
         this->attr().size() > 1) {
-      ::google::protobuf::scoped_array<SortItem> items(
+      ::std::unique_ptr<SortItem[]> items(
           new SortItem[this->attr().size()]);
       typedef ::google::protobuf::Map< ::std::string, ::opencv_tensorflow::AttrValue >::size_type size_type;
       size_type n = 0;
@@ -1985,7 +1961,7 @@ void NameAttrList::SerializeWithCachedSizes(
         items[static_cast<ptrdiff_t>(n)] = SortItem(&*it);
       }
       ::std::sort(&items[0], &items[static_cast<ptrdiff_t>(n)], Less());
-      ::google::protobuf::scoped_ptr<NameAttrList_AttrEntry_DoNotUse> entry;
+      ::std::unique_ptr<NameAttrList_AttrEntry_DoNotUse> entry;
       for (size_type i = 0; i < n; i++) {
         entry.reset(attr_.NewEntryWrapper(
             items[static_cast<ptrdiff_t>(i)]->first, items[static_cast<ptrdiff_t>(i)]->second));
@@ -1999,7 +1975,7 @@ void NameAttrList::SerializeWithCachedSizes(
         Utf8Check::Check(items[static_cast<ptrdiff_t>(i)]);
       }
     } else {
-      ::google::protobuf::scoped_ptr<NameAttrList_AttrEntry_DoNotUse> entry;
+      ::std::unique_ptr<NameAttrList_AttrEntry_DoNotUse> entry;
       for (::google::protobuf::Map< ::std::string, ::opencv_tensorflow::AttrValue >::const_iterator
           it = this->attr().begin();
           it != this->attr().end(); ++it) {
@@ -2038,7 +2014,7 @@ size_t NameAttrList::ByteSizeLong() const {
   total_size += 1 *
       ::google::protobuf::internal::FromIntSize(this->attr_size());
   {
-    ::google::protobuf::scoped_ptr<NameAttrList_AttrEntry_DoNotUse> entry;
+    ::std::unique_ptr<NameAttrList_AttrEntry_DoNotUse> entry;
     for (::google::protobuf::Map< ::std::string, ::opencv_tensorflow::AttrValue >::const_iterator
         it = this->attr().begin();
         it != this->attr().end(); ++it) {
@@ -2062,9 +2038,7 @@ size_t NameAttrList::ByteSizeLong() const {
   }
 
   int cached_size = ::google::protobuf::internal::ToCachedSize(total_size);
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = cached_size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  SetCachedSize(cached_size);
   return total_size;
 }
 
@@ -2136,9 +2110,9 @@ void NameAttrList::UnsafeArenaSwap(NameAttrList* other) {
 void NameAttrList::InternalSwap(NameAttrList* other) {
   using std::swap;
   attr_.Swap(&other->attr_);
-  name_.Swap(&other->name_);
+  name_.Swap(&other->name_, &::google::protobuf::internal::GetEmptyStringAlreadyInited(),
+    GetArenaNoVirtual());
   _internal_metadata_.Swap(&other->_internal_metadata_);
-  swap(_cached_size_, other->_cached_size_);
 }
 
 ::google::protobuf::Metadata NameAttrList::GetMetadata() const {
@@ -2149,5 +2123,21 @@ void NameAttrList::InternalSwap(NameAttrList* other) {
 
 // @@protoc_insertion_point(namespace_scope)
 }  // namespace opencv_tensorflow
+namespace google {
+namespace protobuf {
+template<> GOOGLE_PROTOBUF_ATTRIBUTE_NOINLINE ::opencv_tensorflow::AttrValue_ListValue* Arena::CreateMaybeMessage< ::opencv_tensorflow::AttrValue_ListValue >(Arena* arena) {
+  return Arena::CreateMessageInternal< ::opencv_tensorflow::AttrValue_ListValue >(arena);
+}
+template<> GOOGLE_PROTOBUF_ATTRIBUTE_NOINLINE ::opencv_tensorflow::AttrValue* Arena::CreateMaybeMessage< ::opencv_tensorflow::AttrValue >(Arena* arena) {
+  return Arena::CreateMessageInternal< ::opencv_tensorflow::AttrValue >(arena);
+}
+template<> GOOGLE_PROTOBUF_ATTRIBUTE_NOINLINE ::opencv_tensorflow::NameAttrList_AttrEntry_DoNotUse* Arena::CreateMaybeMessage< ::opencv_tensorflow::NameAttrList_AttrEntry_DoNotUse >(Arena* arena) {
+  return Arena::CreateMessageInternal< ::opencv_tensorflow::NameAttrList_AttrEntry_DoNotUse >(arena);
+}
+template<> GOOGLE_PROTOBUF_ATTRIBUTE_NOINLINE ::opencv_tensorflow::NameAttrList* Arena::CreateMaybeMessage< ::opencv_tensorflow::NameAttrList >(Arena* arena) {
+  return Arena::CreateMessageInternal< ::opencv_tensorflow::NameAttrList >(arena);
+}
+}  // namespace protobuf
+}  // namespace google
 
 // @@protoc_insertion_point(global_scope)
diff --git a/modules/dnn/misc/tensorflow/attr_value.pb.h b/modules/dnn/misc/tensorflow/attr_value.pb.h
index 40ded9c38..3c99bc53d 100644
--- a/modules/dnn/misc/tensorflow/attr_value.pb.h
+++ b/modules/dnn/misc/tensorflow/attr_value.pb.h
@@ -1,19 +1,19 @@
 // Generated by the protocol buffer compiler.  DO NOT EDIT!
 // source: attr_value.proto
 
-#ifndef PROTOBUF_attr_5fvalue_2eproto__INCLUDED
-#define PROTOBUF_attr_5fvalue_2eproto__INCLUDED
+#ifndef PROTOBUF_INCLUDED_attr_5fvalue_2eproto
+#define PROTOBUF_INCLUDED_attr_5fvalue_2eproto
 
 #include <string>
 
 #include <google/protobuf/stubs/common.h>
 
-#if GOOGLE_PROTOBUF_VERSION < 3005000
+#if GOOGLE_PROTOBUF_VERSION < 3006001
 #error This file was generated by a newer version of protoc which is
 #error incompatible with your Protocol Buffer headers.  Please update
 #error your headers.
 #endif
-#if 3005001 < GOOGLE_PROTOBUF_MIN_PROTOC_VERSION
+#if 3006001 < GOOGLE_PROTOBUF_MIN_PROTOC_VERSION
 #error This file was generated by an older version of protoc which is
 #error incompatible with your Protocol Buffer headers.  Please
 #error regenerate this file with a newer version of protoc.
@@ -24,6 +24,7 @@
 #include <google/protobuf/arenastring.h>
 #include <google/protobuf/generated_message_table_driven.h>
 #include <google/protobuf/generated_message_util.h>
+#include <google/protobuf/inlined_string_field.h>
 #include <google/protobuf/metadata.h>
 #include <google/protobuf/message.h>
 #include <google/protobuf/repeated_field.h>  // IWYU pragma: export
@@ -36,6 +37,7 @@
 #include "tensor_shape.pb.h"
 #include "types.pb.h"
 // @@protoc_insertion_point(includes)
+#define PROTOBUF_INTERNAL_EXPORT_protobuf_attr_5fvalue_2eproto 
 
 namespace protobuf_attr_5fvalue_2eproto {
 // Internal implementation detail -- do not use these members.
@@ -48,14 +50,6 @@ struct TableStruct {
   static const ::google::protobuf::uint32 offsets[];
 };
 void AddDescriptors();
-void InitDefaultsAttrValue_ListValueImpl();
-void InitDefaultsAttrValue_ListValue();
-void InitDefaultsAttrValueImpl();
-void InitDefaultsAttrValue();
-inline void InitDefaults() {
-  InitDefaultsAttrValue_ListValue();
-  InitDefaultsAttrValue();
-}
 }  // namespace protobuf_attr_5fvalue_2eproto
 namespace opencv_tensorflow {
 class AttrValue;
@@ -71,6 +65,14 @@ class NameAttrList_AttrEntry_DoNotUse;
 class NameAttrList_AttrEntry_DoNotUseDefaultTypeInternal;
 extern NameAttrList_AttrEntry_DoNotUseDefaultTypeInternal _NameAttrList_AttrEntry_DoNotUse_default_instance_;
 }  // namespace opencv_tensorflow
+namespace google {
+namespace protobuf {
+template<> ::opencv_tensorflow::AttrValue* Arena::CreateMaybeMessage<::opencv_tensorflow::AttrValue>(Arena*);
+template<> ::opencv_tensorflow::AttrValue_ListValue* Arena::CreateMaybeMessage<::opencv_tensorflow::AttrValue_ListValue>(Arena*);
+template<> ::opencv_tensorflow::NameAttrList* Arena::CreateMaybeMessage<::opencv_tensorflow::NameAttrList>(Arena*);
+template<> ::opencv_tensorflow::NameAttrList_AttrEntry_DoNotUse* Arena::CreateMaybeMessage<::opencv_tensorflow::NameAttrList_AttrEntry_DoNotUse>(Arena*);
+}  // namespace protobuf
+}  // namespace google
 namespace opencv_tensorflow {
 
 // ===================================================================
@@ -101,10 +103,10 @@ class AttrValue_ListValue : public ::google::protobuf::Message /* @@protoc_inser
     return *this;
   }
   #endif
-  inline ::google::protobuf::Arena* GetArena() const PROTOBUF_FINAL {
+  inline ::google::protobuf::Arena* GetArena() const final {
     return GetArenaNoVirtual();
   }
-  inline void* GetMaybeArenaPointer() const PROTOBUF_FINAL {
+  inline void* GetMaybeArenaPointer() const final {
     return MaybeArenaPtr();
   }
   static const ::google::protobuf::Descriptor* descriptor();
@@ -115,7 +117,7 @@ class AttrValue_ListValue : public ::google::protobuf::Message /* @@protoc_inser
     return reinterpret_cast<const AttrValue_ListValue*>(
                &_AttrValue_ListValue_default_instance_);
   }
-  static PROTOBUF_CONSTEXPR int const kIndexInFileMessages =
+  static constexpr int kIndexInFileMessages =
     0;
 
   void UnsafeArenaSwap(AttrValue_ListValue* other);
@@ -126,28 +128,33 @@ class AttrValue_ListValue : public ::google::protobuf::Message /* @@protoc_inser
 
   // implements Message ----------------------------------------------
 
-  inline AttrValue_ListValue* New() const PROTOBUF_FINAL { return New(NULL); }
+  inline AttrValue_ListValue* New() const final {
+    return CreateMaybeMessage<AttrValue_ListValue>(NULL);
+  }
 
-  AttrValue_ListValue* New(::google::protobuf::Arena* arena) const PROTOBUF_FINAL;
-  void CopyFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
-  void MergeFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
+  AttrValue_ListValue* New(::google::protobuf::Arena* arena) const final {
+    return CreateMaybeMessage<AttrValue_ListValue>(arena);
+  }
+  void CopyFrom(const ::google::protobuf::Message& from) final;
+  void MergeFrom(const ::google::protobuf::Message& from) final;
   void CopyFrom(const AttrValue_ListValue& from);
   void MergeFrom(const AttrValue_ListValue& from);
-  void Clear() PROTOBUF_FINAL;
-  bool IsInitialized() const PROTOBUF_FINAL;
+  void Clear() final;
+  bool IsInitialized() const final;
 
-  size_t ByteSizeLong() const PROTOBUF_FINAL;
+  size_t ByteSizeLong() const final;
   bool MergePartialFromCodedStream(
-      ::google::protobuf::io::CodedInputStream* input) PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedInputStream* input) final;
   void SerializeWithCachedSizes(
-      ::google::protobuf::io::CodedOutputStream* output) const PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedOutputStream* output) const final;
   ::google::protobuf::uint8* InternalSerializeWithCachedSizesToArray(
-      bool deterministic, ::google::protobuf::uint8* target) const PROTOBUF_FINAL;
-  int GetCachedSize() const PROTOBUF_FINAL { return _cached_size_; }
+      bool deterministic, ::google::protobuf::uint8* target) const final;
+  int GetCachedSize() const final { return _cached_size_.Get(); }
+
   private:
   void SharedCtor();
   void SharedDtor();
-  void SetCachedSize(int size) const PROTOBUF_FINAL;
+  void SetCachedSize(int size) const final;
   void InternalSwap(AttrValue_ListValue* other);
   protected:
   explicit AttrValue_ListValue(::google::protobuf::Arena* arena);
@@ -163,7 +170,7 @@ class AttrValue_ListValue : public ::google::protobuf::Message /* @@protoc_inser
   }
   public:
 
-  ::google::protobuf::Metadata GetMetadata() const PROTOBUF_FINAL;
+  ::google::protobuf::Metadata GetMetadata() const final;
 
   // nested types ----------------------------------------------------
 
@@ -241,11 +248,11 @@ class AttrValue_ListValue : public ::google::protobuf::Message /* @@protoc_inser
   int shape_size() const;
   void clear_shape();
   static const int kShapeFieldNumber = 7;
-  const ::opencv_tensorflow::TensorShapeProto& shape(int index) const;
   ::opencv_tensorflow::TensorShapeProto* mutable_shape(int index);
-  ::opencv_tensorflow::TensorShapeProto* add_shape();
   ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::TensorShapeProto >*
       mutable_shape();
+  const ::opencv_tensorflow::TensorShapeProto& shape(int index) const;
+  ::opencv_tensorflow::TensorShapeProto* add_shape();
   const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::TensorShapeProto >&
       shape() const;
 
@@ -253,11 +260,11 @@ class AttrValue_ListValue : public ::google::protobuf::Message /* @@protoc_inser
   int tensor_size() const;
   void clear_tensor();
   static const int kTensorFieldNumber = 8;
-  const ::opencv_tensorflow::TensorProto& tensor(int index) const;
   ::opencv_tensorflow::TensorProto* mutable_tensor(int index);
-  ::opencv_tensorflow::TensorProto* add_tensor();
   ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::TensorProto >*
       mutable_tensor();
+  const ::opencv_tensorflow::TensorProto& tensor(int index) const;
+  ::opencv_tensorflow::TensorProto* add_tensor();
   const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::TensorProto >&
       tensor() const;
 
@@ -279,9 +286,8 @@ class AttrValue_ListValue : public ::google::protobuf::Message /* @@protoc_inser
   mutable int _type_cached_byte_size_;
   ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::TensorShapeProto > shape_;
   ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::TensorProto > tensor_;
-  mutable int _cached_size_;
+  mutable ::google::protobuf::internal::CachedSize _cached_size_;
   friend struct ::protobuf_attr_5fvalue_2eproto::TableStruct;
-  friend void ::protobuf_attr_5fvalue_2eproto::InitDefaultsAttrValue_ListValueImpl();
 };
 // -------------------------------------------------------------------
 
@@ -311,10 +317,10 @@ class AttrValue : public ::google::protobuf::Message /* @@protoc_insertion_point
     return *this;
   }
   #endif
-  inline ::google::protobuf::Arena* GetArena() const PROTOBUF_FINAL {
+  inline ::google::protobuf::Arena* GetArena() const final {
     return GetArenaNoVirtual();
   }
-  inline void* GetMaybeArenaPointer() const PROTOBUF_FINAL {
+  inline void* GetMaybeArenaPointer() const final {
     return MaybeArenaPtr();
   }
   static const ::google::protobuf::Descriptor* descriptor();
@@ -339,7 +345,7 @@ class AttrValue : public ::google::protobuf::Message /* @@protoc_insertion_point
     return reinterpret_cast<const AttrValue*>(
                &_AttrValue_default_instance_);
   }
-  static PROTOBUF_CONSTEXPR int const kIndexInFileMessages =
+  static constexpr int kIndexInFileMessages =
     1;
 
   void UnsafeArenaSwap(AttrValue* other);
@@ -350,28 +356,33 @@ class AttrValue : public ::google::protobuf::Message /* @@protoc_insertion_point
 
   // implements Message ----------------------------------------------
 
-  inline AttrValue* New() const PROTOBUF_FINAL { return New(NULL); }
+  inline AttrValue* New() const final {
+    return CreateMaybeMessage<AttrValue>(NULL);
+  }
 
-  AttrValue* New(::google::protobuf::Arena* arena) const PROTOBUF_FINAL;
-  void CopyFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
-  void MergeFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
+  AttrValue* New(::google::protobuf::Arena* arena) const final {
+    return CreateMaybeMessage<AttrValue>(arena);
+  }
+  void CopyFrom(const ::google::protobuf::Message& from) final;
+  void MergeFrom(const ::google::protobuf::Message& from) final;
   void CopyFrom(const AttrValue& from);
   void MergeFrom(const AttrValue& from);
-  void Clear() PROTOBUF_FINAL;
-  bool IsInitialized() const PROTOBUF_FINAL;
+  void Clear() final;
+  bool IsInitialized() const final;
 
-  size_t ByteSizeLong() const PROTOBUF_FINAL;
+  size_t ByteSizeLong() const final;
   bool MergePartialFromCodedStream(
-      ::google::protobuf::io::CodedInputStream* input) PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedInputStream* input) final;
   void SerializeWithCachedSizes(
-      ::google::protobuf::io::CodedOutputStream* output) const PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedOutputStream* output) const final;
   ::google::protobuf::uint8* InternalSerializeWithCachedSizesToArray(
-      bool deterministic, ::google::protobuf::uint8* target) const PROTOBUF_FINAL;
-  int GetCachedSize() const PROTOBUF_FINAL { return _cached_size_; }
+      bool deterministic, ::google::protobuf::uint8* target) const final;
+  int GetCachedSize() const final { return _cached_size_.Get(); }
+
   private:
   void SharedCtor();
   void SharedDtor();
-  void SetCachedSize(int size) const PROTOBUF_FINAL;
+  void SetCachedSize(int size) const final;
   void InternalSwap(AttrValue* other);
   protected:
   explicit AttrValue(::google::protobuf::Arena* arena);
@@ -387,7 +398,7 @@ class AttrValue : public ::google::protobuf::Message /* @@protoc_insertion_point
   }
   public:
 
-  ::google::protobuf::Metadata GetMetadata() const PROTOBUF_FINAL;
+  ::google::protobuf::Metadata GetMetadata() const final;
 
   // nested types ----------------------------------------------------
 
@@ -462,7 +473,7 @@ class AttrValue : public ::google::protobuf::Message /* @@protoc_insertion_point
   void clear_shape();
   static const int kShapeFieldNumber = 7;
   private:
-  void _slow_mutable_shape();
+  const ::opencv_tensorflow::TensorShapeProto& _internal_shape() const;
   public:
   const ::opencv_tensorflow::TensorShapeProto& shape() const;
   ::opencv_tensorflow::TensorShapeProto* release_shape();
@@ -477,7 +488,7 @@ class AttrValue : public ::google::protobuf::Message /* @@protoc_insertion_point
   void clear_tensor();
   static const int kTensorFieldNumber = 8;
   private:
-  void _slow_mutable_tensor();
+  const ::opencv_tensorflow::TensorProto& _internal_tensor() const;
   public:
   const ::opencv_tensorflow::TensorProto& tensor() const;
   ::opencv_tensorflow::TensorProto* release_tensor();
@@ -492,7 +503,7 @@ class AttrValue : public ::google::protobuf::Message /* @@protoc_insertion_point
   void clear_list();
   static const int kListFieldNumber = 1;
   private:
-  void _slow_mutable_list();
+  const ::opencv_tensorflow::AttrValue_ListValue& _internal_list() const;
   public:
   const ::opencv_tensorflow::AttrValue_ListValue& list() const;
   ::opencv_tensorflow::AttrValue_ListValue* release_list();
@@ -507,7 +518,7 @@ class AttrValue : public ::google::protobuf::Message /* @@protoc_insertion_point
   void clear_func();
   static const int kFuncFieldNumber = 10;
   private:
-  void _slow_mutable_func();
+  const ::opencv_tensorflow::NameAttrList& _internal_func() const;
   public:
   const ::opencv_tensorflow::NameAttrList& func() const;
   ::opencv_tensorflow::NameAttrList* release_func();
@@ -543,6 +554,7 @@ class AttrValue : public ::google::protobuf::Message /* @@protoc_insertion_point
   void unsafe_arena_set_allocated_placeholder(
       ::std::string* placeholder);
 
+  void clear_value();
   ValueCase value_case() const;
   // @@protoc_insertion_point(class_scope:opencv_tensorflow.AttrValue)
  private:
@@ -558,7 +570,6 @@ class AttrValue : public ::google::protobuf::Message /* @@protoc_insertion_point
   void set_has_placeholder();
 
   inline bool has_value() const;
-  void clear_value();
   inline void clear_has_value();
 
   ::google::protobuf::internal::InternalMetadataWithArena _internal_metadata_;
@@ -578,21 +589,20 @@ class AttrValue : public ::google::protobuf::Message /* @@protoc_insertion_point
     ::opencv_tensorflow::NameAttrList* func_;
     ::google::protobuf::internal::ArenaStringPtr placeholder_;
   } value_;
-  mutable int _cached_size_;
+  mutable ::google::protobuf::internal::CachedSize _cached_size_;
   ::google::protobuf::uint32 _oneof_case_[1];
 
   friend struct ::protobuf_attr_5fvalue_2eproto::TableStruct;
-  friend void ::protobuf_attr_5fvalue_2eproto::InitDefaultsAttrValueImpl();
 };
 // -------------------------------------------------------------------
 
-class NameAttrList_AttrEntry_DoNotUse : public ::google::protobuf::internal::MapEntry<NameAttrList_AttrEntry_DoNotUse,
+class NameAttrList_AttrEntry_DoNotUse : public ::google::protobuf::internal::MapEntry<NameAttrList_AttrEntry_DoNotUse, 
     ::std::string, ::opencv_tensorflow::AttrValue,
     ::google::protobuf::internal::WireFormatLite::TYPE_STRING,
     ::google::protobuf::internal::WireFormatLite::TYPE_MESSAGE,
     0 > {
 public:
-  typedef ::google::protobuf::internal::MapEntry<NameAttrList_AttrEntry_DoNotUse,
+  typedef ::google::protobuf::internal::MapEntry<NameAttrList_AttrEntry_DoNotUse, 
     ::std::string, ::opencv_tensorflow::AttrValue,
     ::google::protobuf::internal::WireFormatLite::TYPE_STRING,
     ::google::protobuf::internal::WireFormatLite::TYPE_MESSAGE,
@@ -601,7 +611,7 @@ public:
   NameAttrList_AttrEntry_DoNotUse(::google::protobuf::Arena* arena);
   void MergeFrom(const NameAttrList_AttrEntry_DoNotUse& other);
   static const NameAttrList_AttrEntry_DoNotUse* internal_default_instance() { return reinterpret_cast<const NameAttrList_AttrEntry_DoNotUse*>(&_NameAttrList_AttrEntry_DoNotUse_default_instance_); }
-  void MergeFrom(const ::google::protobuf::Message& other) PROTOBUF_FINAL;
+  void MergeFrom(const ::google::protobuf::Message& other) final;
   ::google::protobuf::Metadata GetMetadata() const;
 };
 
@@ -633,10 +643,10 @@ class NameAttrList : public ::google::protobuf::Message /* @@protoc_insertion_po
     return *this;
   }
   #endif
-  inline ::google::protobuf::Arena* GetArena() const PROTOBUF_FINAL {
+  inline ::google::protobuf::Arena* GetArena() const final {
     return GetArenaNoVirtual();
   }
-  inline void* GetMaybeArenaPointer() const PROTOBUF_FINAL {
+  inline void* GetMaybeArenaPointer() const final {
     return MaybeArenaPtr();
   }
   static const ::google::protobuf::Descriptor* descriptor();
@@ -647,7 +657,7 @@ class NameAttrList : public ::google::protobuf::Message /* @@protoc_insertion_po
     return reinterpret_cast<const NameAttrList*>(
                &_NameAttrList_default_instance_);
   }
-  static PROTOBUF_CONSTEXPR int const kIndexInFileMessages =
+  static constexpr int kIndexInFileMessages =
     3;
 
   void UnsafeArenaSwap(NameAttrList* other);
@@ -658,28 +668,33 @@ class NameAttrList : public ::google::protobuf::Message /* @@protoc_insertion_po
 
   // implements Message ----------------------------------------------
 
-  inline NameAttrList* New() const PROTOBUF_FINAL { return New(NULL); }
+  inline NameAttrList* New() const final {
+    return CreateMaybeMessage<NameAttrList>(NULL);
+  }
 
-  NameAttrList* New(::google::protobuf::Arena* arena) const PROTOBUF_FINAL;
-  void CopyFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
-  void MergeFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
+  NameAttrList* New(::google::protobuf::Arena* arena) const final {
+    return CreateMaybeMessage<NameAttrList>(arena);
+  }
+  void CopyFrom(const ::google::protobuf::Message& from) final;
+  void MergeFrom(const ::google::protobuf::Message& from) final;
   void CopyFrom(const NameAttrList& from);
   void MergeFrom(const NameAttrList& from);
-  void Clear() PROTOBUF_FINAL;
-  bool IsInitialized() const PROTOBUF_FINAL;
+  void Clear() final;
+  bool IsInitialized() const final;
 
-  size_t ByteSizeLong() const PROTOBUF_FINAL;
+  size_t ByteSizeLong() const final;
   bool MergePartialFromCodedStream(
-      ::google::protobuf::io::CodedInputStream* input) PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedInputStream* input) final;
   void SerializeWithCachedSizes(
-      ::google::protobuf::io::CodedOutputStream* output) const PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedOutputStream* output) const final;
   ::google::protobuf::uint8* InternalSerializeWithCachedSizesToArray(
-      bool deterministic, ::google::protobuf::uint8* target) const PROTOBUF_FINAL;
-  int GetCachedSize() const PROTOBUF_FINAL { return _cached_size_; }
+      bool deterministic, ::google::protobuf::uint8* target) const final;
+  int GetCachedSize() const final { return _cached_size_.Get(); }
+
   private:
   void SharedCtor();
   void SharedDtor();
-  void SetCachedSize(int size) const PROTOBUF_FINAL;
+  void SetCachedSize(int size) const final;
   void InternalSwap(NameAttrList* other);
   protected:
   explicit NameAttrList(::google::protobuf::Arena* arena);
@@ -695,7 +710,7 @@ class NameAttrList : public ::google::protobuf::Message /* @@protoc_insertion_po
   }
   public:
 
-  ::google::protobuf::Metadata GetMetadata() const PROTOBUF_FINAL;
+  ::google::protobuf::Metadata GetMetadata() const final;
 
   // nested types ----------------------------------------------------
 
@@ -748,9 +763,8 @@ class NameAttrList : public ::google::protobuf::Message /* @@protoc_insertion_po
       ::google::protobuf::internal::WireFormatLite::TYPE_MESSAGE,
       0 > attr_;
   ::google::protobuf::internal::ArenaStringPtr name_;
-  mutable int _cached_size_;
+  mutable ::google::protobuf::internal::CachedSize _cached_size_;
   friend struct ::protobuf_attr_5fvalue_2eproto::TableStruct;
-  friend void ::protobuf_attr_5fvalue_2eproto::InitDefaultsAttrValueImpl();
 };
 // ===================================================================
 
@@ -956,23 +970,23 @@ AttrValue_ListValue::mutable_type() {
 inline int AttrValue_ListValue::shape_size() const {
   return shape_.size();
 }
-inline const ::opencv_tensorflow::TensorShapeProto& AttrValue_ListValue::shape(int index) const {
-  // @@protoc_insertion_point(field_get:opencv_tensorflow.AttrValue.ListValue.shape)
-  return shape_.Get(index);
-}
 inline ::opencv_tensorflow::TensorShapeProto* AttrValue_ListValue::mutable_shape(int index) {
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.AttrValue.ListValue.shape)
   return shape_.Mutable(index);
 }
-inline ::opencv_tensorflow::TensorShapeProto* AttrValue_ListValue::add_shape() {
-  // @@protoc_insertion_point(field_add:opencv_tensorflow.AttrValue.ListValue.shape)
-  return shape_.Add();
-}
 inline ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::TensorShapeProto >*
 AttrValue_ListValue::mutable_shape() {
   // @@protoc_insertion_point(field_mutable_list:opencv_tensorflow.AttrValue.ListValue.shape)
   return &shape_;
 }
+inline const ::opencv_tensorflow::TensorShapeProto& AttrValue_ListValue::shape(int index) const {
+  // @@protoc_insertion_point(field_get:opencv_tensorflow.AttrValue.ListValue.shape)
+  return shape_.Get(index);
+}
+inline ::opencv_tensorflow::TensorShapeProto* AttrValue_ListValue::add_shape() {
+  // @@protoc_insertion_point(field_add:opencv_tensorflow.AttrValue.ListValue.shape)
+  return shape_.Add();
+}
 inline const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::TensorShapeProto >&
 AttrValue_ListValue::shape() const {
   // @@protoc_insertion_point(field_list:opencv_tensorflow.AttrValue.ListValue.shape)
@@ -983,23 +997,23 @@ AttrValue_ListValue::shape() const {
 inline int AttrValue_ListValue::tensor_size() const {
   return tensor_.size();
 }
-inline const ::opencv_tensorflow::TensorProto& AttrValue_ListValue::tensor(int index) const {
-  // @@protoc_insertion_point(field_get:opencv_tensorflow.AttrValue.ListValue.tensor)
-  return tensor_.Get(index);
-}
 inline ::opencv_tensorflow::TensorProto* AttrValue_ListValue::mutable_tensor(int index) {
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.AttrValue.ListValue.tensor)
   return tensor_.Mutable(index);
 }
-inline ::opencv_tensorflow::TensorProto* AttrValue_ListValue::add_tensor() {
-  // @@protoc_insertion_point(field_add:opencv_tensorflow.AttrValue.ListValue.tensor)
-  return tensor_.Add();
-}
 inline ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::TensorProto >*
 AttrValue_ListValue::mutable_tensor() {
   // @@protoc_insertion_point(field_mutable_list:opencv_tensorflow.AttrValue.ListValue.tensor)
   return &tensor_;
 }
+inline const ::opencv_tensorflow::TensorProto& AttrValue_ListValue::tensor(int index) const {
+  // @@protoc_insertion_point(field_get:opencv_tensorflow.AttrValue.ListValue.tensor)
+  return tensor_.Get(index);
+}
+inline ::opencv_tensorflow::TensorProto* AttrValue_ListValue::add_tensor() {
+  // @@protoc_insertion_point(field_add:opencv_tensorflow.AttrValue.ListValue.tensor)
+  return tensor_.Add();
+}
 inline const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::TensorProto >&
 AttrValue_ListValue::tensor() const {
   // @@protoc_insertion_point(field_list:opencv_tensorflow.AttrValue.ListValue.tensor)
@@ -1257,13 +1271,16 @@ inline bool AttrValue::has_shape() const {
 inline void AttrValue::set_has_shape() {
   _oneof_case_[0] = kShape;
 }
+inline const ::opencv_tensorflow::TensorShapeProto& AttrValue::_internal_shape() const {
+  return *value_.shape_;
+}
 inline ::opencv_tensorflow::TensorShapeProto* AttrValue::release_shape() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.AttrValue.shape)
   if (has_shape()) {
     clear_has_value();
       ::opencv_tensorflow::TensorShapeProto* temp = value_.shape_;
     if (GetArenaNoVirtual() != NULL) {
-      temp = ::google::protobuf::internal::DuplicateIfNonNull(temp, NULL);
+      temp = ::google::protobuf::internal::DuplicateIfNonNull(temp);
     }
     value_.shape_ = NULL;
     return temp;
@@ -1300,9 +1317,8 @@ inline ::opencv_tensorflow::TensorShapeProto* AttrValue::mutable_shape() {
   if (!has_shape()) {
     clear_value();
     set_has_shape();
-    value_.shape_ =
-      ::google::protobuf::Arena::CreateMessage< ::opencv_tensorflow::TensorShapeProto >(
-      GetArenaNoVirtual());
+    value_.shape_ = CreateMaybeMessage< ::opencv_tensorflow::TensorShapeProto >(
+        GetArenaNoVirtual());
   }
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.AttrValue.shape)
   return value_.shape_;
@@ -1315,13 +1331,16 @@ inline bool AttrValue::has_tensor() const {
 inline void AttrValue::set_has_tensor() {
   _oneof_case_[0] = kTensor;
 }
+inline const ::opencv_tensorflow::TensorProto& AttrValue::_internal_tensor() const {
+  return *value_.tensor_;
+}
 inline ::opencv_tensorflow::TensorProto* AttrValue::release_tensor() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.AttrValue.tensor)
   if (has_tensor()) {
     clear_has_value();
       ::opencv_tensorflow::TensorProto* temp = value_.tensor_;
     if (GetArenaNoVirtual() != NULL) {
-      temp = ::google::protobuf::internal::DuplicateIfNonNull(temp, NULL);
+      temp = ::google::protobuf::internal::DuplicateIfNonNull(temp);
     }
     value_.tensor_ = NULL;
     return temp;
@@ -1358,9 +1377,8 @@ inline ::opencv_tensorflow::TensorProto* AttrValue::mutable_tensor() {
   if (!has_tensor()) {
     clear_value();
     set_has_tensor();
-    value_.tensor_ =
-      ::google::protobuf::Arena::CreateMessage< ::opencv_tensorflow::TensorProto >(
-      GetArenaNoVirtual());
+    value_.tensor_ = CreateMaybeMessage< ::opencv_tensorflow::TensorProto >(
+        GetArenaNoVirtual());
   }
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.AttrValue.tensor)
   return value_.tensor_;
@@ -1381,13 +1399,16 @@ inline void AttrValue::clear_list() {
     clear_has_value();
   }
 }
+inline const ::opencv_tensorflow::AttrValue_ListValue& AttrValue::_internal_list() const {
+  return *value_.list_;
+}
 inline ::opencv_tensorflow::AttrValue_ListValue* AttrValue::release_list() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.AttrValue.list)
   if (has_list()) {
     clear_has_value();
       ::opencv_tensorflow::AttrValue_ListValue* temp = value_.list_;
     if (GetArenaNoVirtual() != NULL) {
-      temp = ::google::protobuf::internal::DuplicateIfNonNull(temp, NULL);
+      temp = ::google::protobuf::internal::DuplicateIfNonNull(temp);
     }
     value_.list_ = NULL;
     return temp;
@@ -1424,9 +1445,8 @@ inline ::opencv_tensorflow::AttrValue_ListValue* AttrValue::mutable_list() {
   if (!has_list()) {
     clear_value();
     set_has_list();
-    value_.list_ =
-      ::google::protobuf::Arena::CreateMessage< ::opencv_tensorflow::AttrValue_ListValue >(
-      GetArenaNoVirtual());
+    value_.list_ = CreateMaybeMessage< ::opencv_tensorflow::AttrValue_ListValue >(
+        GetArenaNoVirtual());
   }
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.AttrValue.list)
   return value_.list_;
@@ -1447,13 +1467,16 @@ inline void AttrValue::clear_func() {
     clear_has_value();
   }
 }
+inline const ::opencv_tensorflow::NameAttrList& AttrValue::_internal_func() const {
+  return *value_.func_;
+}
 inline ::opencv_tensorflow::NameAttrList* AttrValue::release_func() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.AttrValue.func)
   if (has_func()) {
     clear_has_value();
       ::opencv_tensorflow::NameAttrList* temp = value_.func_;
     if (GetArenaNoVirtual() != NULL) {
-      temp = ::google::protobuf::internal::DuplicateIfNonNull(temp, NULL);
+      temp = ::google::protobuf::internal::DuplicateIfNonNull(temp);
     }
     value_.func_ = NULL;
     return temp;
@@ -1490,9 +1513,8 @@ inline ::opencv_tensorflow::NameAttrList* AttrValue::mutable_func() {
   if (!has_func()) {
     clear_value();
     set_has_func();
-    value_.func_ =
-      ::google::protobuf::Arena::CreateMessage< ::opencv_tensorflow::NameAttrList >(
-      GetArenaNoVirtual());
+    value_.func_ = CreateMaybeMessage< ::opencv_tensorflow::NameAttrList >(
+        GetArenaNoVirtual());
   }
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.AttrValue.func)
   return value_.func_;
@@ -1646,13 +1668,13 @@ inline const ::std::string& NameAttrList::name() const {
   return name_.Get();
 }
 inline void NameAttrList::set_name(const ::std::string& value) {
-
+  
   name_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), value, GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set:opencv_tensorflow.NameAttrList.name)
 }
 #if LANG_CXX11
 inline void NameAttrList::set_name(::std::string&& value) {
-
+  
   name_.Set(
     &::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::move(value), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_rvalue:opencv_tensorflow.NameAttrList.name)
@@ -1660,33 +1682,33 @@ inline void NameAttrList::set_name(::std::string&& value) {
 #endif
 inline void NameAttrList::set_name(const char* value) {
   GOOGLE_DCHECK(value != NULL);
-
+  
   name_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(value),
               GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_char:opencv_tensorflow.NameAttrList.name)
 }
 inline void NameAttrList::set_name(const char* value,
     size_t size) {
-
+  
   name_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(
       reinterpret_cast<const char*>(value), size), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_pointer:opencv_tensorflow.NameAttrList.name)
 }
 inline ::std::string* NameAttrList::mutable_name() {
-
+  
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.NameAttrList.name)
   return name_.Mutable(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline ::std::string* NameAttrList::release_name() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.NameAttrList.name)
-
+  
   return name_.Release(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline void NameAttrList::set_allocated_name(::std::string* name) {
   if (name != NULL) {
-
+    
   } else {
-
+    
   }
   name_.SetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), name,
       GetArenaNoVirtual());
@@ -1695,7 +1717,7 @@ inline void NameAttrList::set_allocated_name(::std::string* name) {
 inline ::std::string* NameAttrList::unsafe_arena_release_name() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.NameAttrList.name)
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
-
+  
   return name_.UnsafeArenaRelease(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       GetArenaNoVirtual());
 }
@@ -1703,9 +1725,9 @@ inline void NameAttrList::unsafe_arena_set_allocated_name(
     ::std::string* name) {
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
   if (name != NULL) {
-
+    
   } else {
-
+    
   }
   name_.UnsafeArenaSetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       name, GetArenaNoVirtual());
@@ -1746,4 +1768,4 @@ NameAttrList::mutable_attr() {
 
 // @@protoc_insertion_point(global_scope)
 
-#endif  // PROTOBUF_attr_5fvalue_2eproto__INCLUDED
+#endif  // PROTOBUF_INCLUDED_attr_5fvalue_2eproto
diff --git a/modules/dnn/misc/tensorflow/function.pb.cc b/modules/dnn/misc/tensorflow/function.pb.cc
index 6691c12f5..221b6e69f 100644
--- a/modules/dnn/misc/tensorflow/function.pb.cc
+++ b/modules/dnn/misc/tensorflow/function.pb.cc
@@ -7,7 +7,6 @@
 
 #include <google/protobuf/stubs/common.h>
 #include <google/protobuf/stubs/port.h>
-#include <google/protobuf/stubs/once.h>
 #include <google/protobuf/io/coded_stream.h>
 #include <google/protobuf/wire_format_lite_inl.h>
 #include <google/protobuf/descriptor.h>
@@ -19,6 +18,19 @@
 #include "third_party/protobuf/version.h"
 #endif
 // @@protoc_insertion_point(includes)
+
+namespace protobuf_attr_5fvalue_2eproto {
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_attr_5fvalue_2eproto ::google::protobuf::internal::SCCInfo<3> scc_info_AttrValue;
+}  // namespace protobuf_attr_5fvalue_2eproto
+namespace protobuf_function_2eproto {
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_function_2eproto ::google::protobuf::internal::SCCInfo<0> scc_info_GradientDef;
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_function_2eproto ::google::protobuf::internal::SCCInfo<1> scc_info_FunctionDef_Node;
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_function_2eproto ::google::protobuf::internal::SCCInfo<1> scc_info_FunctionDef_Node_AttrEntry_DoNotUse;
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_function_2eproto ::google::protobuf::internal::SCCInfo<2> scc_info_FunctionDef;
+}  // namespace protobuf_function_2eproto
+namespace protobuf_op_5fdef_2eproto {
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_op_5fdef_2eproto ::google::protobuf::internal::SCCInfo<3> scc_info_OpDef;
+}  // namespace protobuf_op_5fdef_2eproto
 namespace opencv_tensorflow {
 class FunctionDefLibraryDefaultTypeInternal {
  public:
@@ -47,16 +59,9 @@ class GradientDefDefaultTypeInternal {
 } _GradientDef_default_instance_;
 }  // namespace opencv_tensorflow
 namespace protobuf_function_2eproto {
-void InitDefaultsFunctionDefLibraryImpl() {
+static void InitDefaultsFunctionDefLibrary() {
   GOOGLE_PROTOBUF_VERIFY_VERSION;
 
-#ifdef GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  ::google::protobuf::internal::InitProtobufDefaultsForceUnique();
-#else
-  ::google::protobuf::internal::InitProtobufDefaults();
-#endif  // GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  protobuf_function_2eproto::InitDefaultsFunctionDef();
-  protobuf_function_2eproto::InitDefaultsGradientDef();
   {
     void* ptr = &::opencv_tensorflow::_FunctionDefLibrary_default_instance_;
     new (ptr) ::opencv_tensorflow::FunctionDefLibrary();
@@ -65,20 +70,14 @@ void InitDefaultsFunctionDefLibraryImpl() {
   ::opencv_tensorflow::FunctionDefLibrary::InitAsDefaultInstance();
 }
 
-void InitDefaultsFunctionDefLibrary() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &InitDefaultsFunctionDefLibraryImpl);
-}
+::google::protobuf::internal::SCCInfo<2> scc_info_FunctionDefLibrary =
+    {{ATOMIC_VAR_INIT(::google::protobuf::internal::SCCInfoBase::kUninitialized), 2, InitDefaultsFunctionDefLibrary}, {
+      &protobuf_function_2eproto::scc_info_FunctionDef.base,
+      &protobuf_function_2eproto::scc_info_GradientDef.base,}};
 
-void InitDefaultsFunctionDef_Node_AttrEntry_DoNotUseImpl() {
+static void InitDefaultsFunctionDef_Node_AttrEntry_DoNotUse() {
   GOOGLE_PROTOBUF_VERIFY_VERSION;
 
-#ifdef GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  ::google::protobuf::internal::InitProtobufDefaultsForceUnique();
-#else
-  ::google::protobuf::internal::InitProtobufDefaults();
-#endif  // GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  protobuf_attr_5fvalue_2eproto::InitDefaultsAttrValue();
   {
     void* ptr = &::opencv_tensorflow::_FunctionDef_Node_AttrEntry_DoNotUse_default_instance_;
     new (ptr) ::opencv_tensorflow::FunctionDef_Node_AttrEntry_DoNotUse();
@@ -86,20 +85,13 @@ void InitDefaultsFunctionDef_Node_AttrEntry_DoNotUseImpl() {
   ::opencv_tensorflow::FunctionDef_Node_AttrEntry_DoNotUse::InitAsDefaultInstance();
 }
 
-void InitDefaultsFunctionDef_Node_AttrEntry_DoNotUse() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &InitDefaultsFunctionDef_Node_AttrEntry_DoNotUseImpl);
-}
+::google::protobuf::internal::SCCInfo<1> scc_info_FunctionDef_Node_AttrEntry_DoNotUse =
+    {{ATOMIC_VAR_INIT(::google::protobuf::internal::SCCInfoBase::kUninitialized), 1, InitDefaultsFunctionDef_Node_AttrEntry_DoNotUse}, {
+      &protobuf_attr_5fvalue_2eproto::scc_info_AttrValue.base,}};
 
-void InitDefaultsFunctionDef_NodeImpl() {
+static void InitDefaultsFunctionDef_Node() {
   GOOGLE_PROTOBUF_VERIFY_VERSION;
 
-#ifdef GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  ::google::protobuf::internal::InitProtobufDefaultsForceUnique();
-#else
-  ::google::protobuf::internal::InitProtobufDefaults();
-#endif  // GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  protobuf_function_2eproto::InitDefaultsFunctionDef_Node_AttrEntry_DoNotUse();
   {
     void* ptr = &::opencv_tensorflow::_FunctionDef_Node_default_instance_;
     new (ptr) ::opencv_tensorflow::FunctionDef_Node();
@@ -108,21 +100,13 @@ void InitDefaultsFunctionDef_NodeImpl() {
   ::opencv_tensorflow::FunctionDef_Node::InitAsDefaultInstance();
 }
 
-void InitDefaultsFunctionDef_Node() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &InitDefaultsFunctionDef_NodeImpl);
-}
+::google::protobuf::internal::SCCInfo<1> scc_info_FunctionDef_Node =
+    {{ATOMIC_VAR_INIT(::google::protobuf::internal::SCCInfoBase::kUninitialized), 1, InitDefaultsFunctionDef_Node}, {
+      &protobuf_function_2eproto::scc_info_FunctionDef_Node_AttrEntry_DoNotUse.base,}};
 
-void InitDefaultsFunctionDefImpl() {
+static void InitDefaultsFunctionDef() {
   GOOGLE_PROTOBUF_VERIFY_VERSION;
 
-#ifdef GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  ::google::protobuf::internal::InitProtobufDefaultsForceUnique();
-#else
-  ::google::protobuf::internal::InitProtobufDefaults();
-#endif  // GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  protobuf_op_5fdef_2eproto::InitDefaultsOpDef();
-  protobuf_function_2eproto::InitDefaultsFunctionDef_Node();
   {
     void* ptr = &::opencv_tensorflow::_FunctionDef_default_instance_;
     new (ptr) ::opencv_tensorflow::FunctionDef();
@@ -131,19 +115,14 @@ void InitDefaultsFunctionDefImpl() {
   ::opencv_tensorflow::FunctionDef::InitAsDefaultInstance();
 }
 
-void InitDefaultsFunctionDef() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &InitDefaultsFunctionDefImpl);
-}
+::google::protobuf::internal::SCCInfo<2> scc_info_FunctionDef =
+    {{ATOMIC_VAR_INIT(::google::protobuf::internal::SCCInfoBase::kUninitialized), 2, InitDefaultsFunctionDef}, {
+      &protobuf_op_5fdef_2eproto::scc_info_OpDef.base,
+      &protobuf_function_2eproto::scc_info_FunctionDef_Node.base,}};
 
-void InitDefaultsGradientDefImpl() {
+static void InitDefaultsGradientDef() {
   GOOGLE_PROTOBUF_VERIFY_VERSION;
 
-#ifdef GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  ::google::protobuf::internal::InitProtobufDefaultsForceUnique();
-#else
-  ::google::protobuf::internal::InitProtobufDefaults();
-#endif  // GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
   {
     void* ptr = &::opencv_tensorflow::_GradientDef_default_instance_;
     new (ptr) ::opencv_tensorflow::GradientDef();
@@ -152,9 +131,15 @@ void InitDefaultsGradientDefImpl() {
   ::opencv_tensorflow::GradientDef::InitAsDefaultInstance();
 }
 
-void InitDefaultsGradientDef() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &InitDefaultsGradientDefImpl);
+::google::protobuf::internal::SCCInfo<0> scc_info_GradientDef =
+    {{ATOMIC_VAR_INIT(::google::protobuf::internal::SCCInfoBase::kUninitialized), 0, InitDefaultsGradientDef}, {}};
+
+void InitDefaults() {
+  ::google::protobuf::internal::InitSCC(&scc_info_FunctionDefLibrary.base);
+  ::google::protobuf::internal::InitSCC(&scc_info_FunctionDef_Node_AttrEntry_DoNotUse.base);
+  ::google::protobuf::internal::InitSCC(&scc_info_FunctionDef_Node.base);
+  ::google::protobuf::internal::InitSCC(&scc_info_FunctionDef.base);
+  ::google::protobuf::internal::InitSCC(&scc_info_GradientDef.base);
 }
 
 ::google::protobuf::Metadata file_level_metadata[5];
@@ -219,15 +204,14 @@ static ::google::protobuf::Message const * const file_default_instances[] = {
 
 void protobuf_AssignDescriptors() {
   AddDescriptors();
-  ::google::protobuf::MessageFactory* factory = NULL;
   AssignDescriptors(
-      "function.proto", schemas, file_default_instances, TableStruct::offsets, factory,
+      "function.proto", schemas, file_default_instances, TableStruct::offsets,
       file_level_metadata, NULL, NULL);
 }
 
 void protobuf_AssignDescriptorsOnce() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &protobuf_AssignDescriptors);
+  static ::google::protobuf::internal::once_flag once;
+  ::google::protobuf::internal::call_once(once, protobuf_AssignDescriptors);
 }
 
 void protobuf_RegisterTypes(const ::std::string&) GOOGLE_PROTOBUF_ATTRIBUTE_COLD;
@@ -265,8 +249,8 @@ void AddDescriptorsImpl() {
 }
 
 void AddDescriptors() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &AddDescriptorsImpl);
+  static ::google::protobuf::internal::once_flag once;
+  ::google::protobuf::internal::call_once(once, AddDescriptorsImpl);
 }
 // Force AddDescriptors() to be called at dynamic initialization time.
 struct StaticDescriptorInitializer {
@@ -288,9 +272,8 @@ const int FunctionDefLibrary::kGradientFieldNumber;
 
 FunctionDefLibrary::FunctionDefLibrary()
   : ::google::protobuf::Message(), _internal_metadata_(NULL) {
-  if (GOOGLE_PREDICT_TRUE(this != internal_default_instance())) {
-    ::protobuf_function_2eproto::InitDefaultsFunctionDefLibrary();
-  }
+  ::google::protobuf::internal::InitSCC(
+      &protobuf_function_2eproto::scc_info_FunctionDefLibrary.base);
   SharedCtor();
   // @@protoc_insertion_point(constructor:opencv_tensorflow.FunctionDefLibrary)
 }
@@ -299,7 +282,7 @@ FunctionDefLibrary::FunctionDefLibrary(::google::protobuf::Arena* arena)
   _internal_metadata_(arena),
   function_(arena),
   gradient_(arena) {
-  ::protobuf_function_2eproto::InitDefaultsFunctionDefLibrary();
+  ::google::protobuf::internal::InitSCC(&protobuf_function_2eproto::scc_info_FunctionDefLibrary.base);
   SharedCtor();
   RegisterArenaDtor(arena);
   // @@protoc_insertion_point(arena_constructor:opencv_tensorflow.FunctionDefLibrary)
@@ -308,14 +291,12 @@ FunctionDefLibrary::FunctionDefLibrary(const FunctionDefLibrary& from)
   : ::google::protobuf::Message(),
       _internal_metadata_(NULL),
       function_(from.function_),
-      gradient_(from.gradient_),
-      _cached_size_(0) {
+      gradient_(from.gradient_) {
   _internal_metadata_.MergeFrom(from._internal_metadata_);
   // @@protoc_insertion_point(copy_constructor:opencv_tensorflow.FunctionDefLibrary)
 }
 
 void FunctionDefLibrary::SharedCtor() {
-  _cached_size_ = 0;
 }
 
 FunctionDefLibrary::~FunctionDefLibrary() {
@@ -334,9 +315,7 @@ void FunctionDefLibrary::ArenaDtor(void* object) {
 void FunctionDefLibrary::RegisterArenaDtor(::google::protobuf::Arena* arena) {
 }
 void FunctionDefLibrary::SetCachedSize(int size) const {
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  _cached_size_.Set(size);
 }
 const ::google::protobuf::Descriptor* FunctionDefLibrary::descriptor() {
   ::protobuf_function_2eproto::protobuf_AssignDescriptorsOnce();
@@ -344,13 +323,10 @@ const ::google::protobuf::Descriptor* FunctionDefLibrary::descriptor() {
 }
 
 const FunctionDefLibrary& FunctionDefLibrary::default_instance() {
-  ::protobuf_function_2eproto::InitDefaultsFunctionDefLibrary();
+  ::google::protobuf::internal::InitSCC(&protobuf_function_2eproto::scc_info_FunctionDefLibrary.base);
   return *internal_default_instance();
 }
 
-FunctionDefLibrary* FunctionDefLibrary::New(::google::protobuf::Arena* arena) const {
-  return ::google::protobuf::Arena::CreateMessage<FunctionDefLibrary>(arena);
-}
 
 void FunctionDefLibrary::Clear() {
 // @@protoc_insertion_point(message_clear_start:opencv_tensorflow.FunctionDefLibrary)
@@ -369,7 +345,7 @@ bool FunctionDefLibrary::MergePartialFromCodedStream(
   ::google::protobuf::uint32 tag;
   // @@protoc_insertion_point(parse_start:opencv_tensorflow.FunctionDefLibrary)
   for (;;) {
-    ::std::pair< ::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
+    ::std::pair<::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
     tag = p.first;
     if (!p.second) goto handle_unusual;
     switch (::google::protobuf::internal::WireFormatLite::GetTagFieldNumber(tag)) {
@@ -377,7 +353,8 @@ bool FunctionDefLibrary::MergePartialFromCodedStream(
       case 1: {
         if (static_cast< ::google::protobuf::uint8>(tag) ==
             static_cast< ::google::protobuf::uint8>(10u /* 10 & 0xFF */)) {
-          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(input, add_function()));
+          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(
+                input, add_function()));
         } else {
           goto handle_unusual;
         }
@@ -388,7 +365,8 @@ bool FunctionDefLibrary::MergePartialFromCodedStream(
       case 2: {
         if (static_cast< ::google::protobuf::uint8>(tag) ==
             static_cast< ::google::protobuf::uint8>(18u /* 18 & 0xFF */)) {
-          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(input, add_gradient()));
+          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(
+                input, add_gradient()));
         } else {
           goto handle_unusual;
         }
@@ -425,14 +403,18 @@ void FunctionDefLibrary::SerializeWithCachedSizes(
   for (unsigned int i = 0,
       n = static_cast<unsigned int>(this->function_size()); i < n; i++) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      1, this->function(static_cast<int>(i)), output);
+      1,
+      this->function(static_cast<int>(i)),
+      output);
   }
 
   // repeated .opencv_tensorflow.GradientDef gradient = 2;
   for (unsigned int i = 0,
       n = static_cast<unsigned int>(this->gradient_size()); i < n; i++) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      2, this->gradient(static_cast<int>(i)), output);
+      2,
+      this->gradient(static_cast<int>(i)),
+      output);
   }
 
   if ((_internal_metadata_.have_unknown_fields() &&  ::google::protobuf::internal::GetProto3PreserveUnknownsDefault())) {
@@ -505,9 +487,7 @@ size_t FunctionDefLibrary::ByteSizeLong() const {
   }
 
   int cached_size = ::google::protobuf::internal::ToCachedSize(total_size);
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = cached_size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  SetCachedSize(cached_size);
   return total_size;
 }
 
@@ -576,10 +556,9 @@ void FunctionDefLibrary::UnsafeArenaSwap(FunctionDefLibrary* other) {
 }
 void FunctionDefLibrary::InternalSwap(FunctionDefLibrary* other) {
   using std::swap;
-  function_.InternalSwap(&other->function_);
-  gradient_.InternalSwap(&other->gradient_);
+  CastToBase(&function_)->InternalSwap(CastToBase(&other->function_));
+  CastToBase(&gradient_)->InternalSwap(CastToBase(&other->gradient_));
   _internal_metadata_.Swap(&other->_internal_metadata_);
-  swap(_cached_size_, other->_cached_size_);
 }
 
 ::google::protobuf::Metadata FunctionDefLibrary::GetMetadata() const {
@@ -622,9 +601,8 @@ const int FunctionDef_Node::kAttrFieldNumber;
 
 FunctionDef_Node::FunctionDef_Node()
   : ::google::protobuf::Message(), _internal_metadata_(NULL) {
-  if (GOOGLE_PREDICT_TRUE(this != internal_default_instance())) {
-    ::protobuf_function_2eproto::InitDefaultsFunctionDef_Node();
-  }
+  ::google::protobuf::internal::InitSCC(
+      &protobuf_function_2eproto::scc_info_FunctionDef_Node.base);
   SharedCtor();
   // @@protoc_insertion_point(constructor:opencv_tensorflow.FunctionDef.Node)
 }
@@ -635,7 +613,7 @@ FunctionDef_Node::FunctionDef_Node(::google::protobuf::Arena* arena)
   arg_(arena),
   dep_(arena),
   attr_(arena) {
-  ::protobuf_function_2eproto::InitDefaultsFunctionDef_Node();
+  ::google::protobuf::internal::InitSCC(&protobuf_function_2eproto::scc_info_FunctionDef_Node.base);
   SharedCtor();
   RegisterArenaDtor(arena);
   // @@protoc_insertion_point(arena_constructor:opencv_tensorflow.FunctionDef.Node)
@@ -645,8 +623,7 @@ FunctionDef_Node::FunctionDef_Node(const FunctionDef_Node& from)
       _internal_metadata_(NULL),
       ret_(from.ret_),
       arg_(from.arg_),
-      dep_(from.dep_),
-      _cached_size_(0) {
+      dep_(from.dep_) {
   _internal_metadata_.MergeFrom(from._internal_metadata_);
   attr_.MergeFrom(from.attr_);
   op_.UnsafeSetDefault(&::google::protobuf::internal::GetEmptyStringAlreadyInited());
@@ -659,7 +636,6 @@ FunctionDef_Node::FunctionDef_Node(const FunctionDef_Node& from)
 
 void FunctionDef_Node::SharedCtor() {
   op_.UnsafeSetDefault(&::google::protobuf::internal::GetEmptyStringAlreadyInited());
-  _cached_size_ = 0;
 }
 
 FunctionDef_Node::~FunctionDef_Node() {
@@ -679,9 +655,7 @@ void FunctionDef_Node::ArenaDtor(void* object) {
 void FunctionDef_Node::RegisterArenaDtor(::google::protobuf::Arena* arena) {
 }
 void FunctionDef_Node::SetCachedSize(int size) const {
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  _cached_size_.Set(size);
 }
 const ::google::protobuf::Descriptor* FunctionDef_Node::descriptor() {
   ::protobuf_function_2eproto::protobuf_AssignDescriptorsOnce();
@@ -689,13 +663,10 @@ const ::google::protobuf::Descriptor* FunctionDef_Node::descriptor() {
 }
 
 const FunctionDef_Node& FunctionDef_Node::default_instance() {
-  ::protobuf_function_2eproto::InitDefaultsFunctionDef_Node();
+  ::google::protobuf::internal::InitSCC(&protobuf_function_2eproto::scc_info_FunctionDef_Node.base);
   return *internal_default_instance();
 }
 
-FunctionDef_Node* FunctionDef_Node::New(::google::protobuf::Arena* arena) const {
-  return ::google::protobuf::Arena::CreateMessage<FunctionDef_Node>(arena);
-}
 
 void FunctionDef_Node::Clear() {
 // @@protoc_insertion_point(message_clear_start:opencv_tensorflow.FunctionDef.Node)
@@ -717,7 +688,7 @@ bool FunctionDef_Node::MergePartialFromCodedStream(
   ::google::protobuf::uint32 tag;
   // @@protoc_insertion_point(parse_start:opencv_tensorflow.FunctionDef.Node)
   for (;;) {
-    ::std::pair< ::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
+    ::std::pair<::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
     tag = p.first;
     if (!p.second) goto handle_unusual;
     switch (::google::protobuf::internal::WireFormatLite::GetTagFieldNumber(tag)) {
@@ -894,7 +865,7 @@ void FunctionDef_Node::SerializeWithCachedSizes(
 
     if (output->IsSerializationDeterministic() &&
         this->attr().size() > 1) {
-      ::google::protobuf::scoped_array<SortItem> items(
+      ::std::unique_ptr<SortItem[]> items(
           new SortItem[this->attr().size()]);
       typedef ::google::protobuf::Map< ::std::string, ::opencv_tensorflow::AttrValue >::size_type size_type;
       size_type n = 0;
@@ -904,7 +875,7 @@ void FunctionDef_Node::SerializeWithCachedSizes(
         items[static_cast<ptrdiff_t>(n)] = SortItem(&*it);
       }
       ::std::sort(&items[0], &items[static_cast<ptrdiff_t>(n)], Less());
-      ::google::protobuf::scoped_ptr<FunctionDef_Node_AttrEntry_DoNotUse> entry;
+      ::std::unique_ptr<FunctionDef_Node_AttrEntry_DoNotUse> entry;
       for (size_type i = 0; i < n; i++) {
         entry.reset(attr_.NewEntryWrapper(
             items[static_cast<ptrdiff_t>(i)]->first, items[static_cast<ptrdiff_t>(i)]->second));
@@ -916,7 +887,7 @@ void FunctionDef_Node::SerializeWithCachedSizes(
         Utf8Check::Check(items[static_cast<ptrdiff_t>(i)]);
       }
     } else {
-      ::google::protobuf::scoped_ptr<FunctionDef_Node_AttrEntry_DoNotUse> entry;
+      ::std::unique_ptr<FunctionDef_Node_AttrEntry_DoNotUse> entry;
       for (::google::protobuf::Map< ::std::string, ::opencv_tensorflow::AttrValue >::const_iterator
           it = this->attr().begin();
           it != this->attr().end(); ++it) {
@@ -1004,7 +975,7 @@ void FunctionDef_Node::SerializeWithCachedSizes(
 
     if (deterministic &&
         this->attr().size() > 1) {
-      ::google::protobuf::scoped_array<SortItem> items(
+      ::std::unique_ptr<SortItem[]> items(
           new SortItem[this->attr().size()]);
       typedef ::google::protobuf::Map< ::std::string, ::opencv_tensorflow::AttrValue >::size_type size_type;
       size_type n = 0;
@@ -1014,7 +985,7 @@ void FunctionDef_Node::SerializeWithCachedSizes(
         items[static_cast<ptrdiff_t>(n)] = SortItem(&*it);
       }
       ::std::sort(&items[0], &items[static_cast<ptrdiff_t>(n)], Less());
-      ::google::protobuf::scoped_ptr<FunctionDef_Node_AttrEntry_DoNotUse> entry;
+      ::std::unique_ptr<FunctionDef_Node_AttrEntry_DoNotUse> entry;
       for (size_type i = 0; i < n; i++) {
         entry.reset(attr_.NewEntryWrapper(
             items[static_cast<ptrdiff_t>(i)]->first, items[static_cast<ptrdiff_t>(i)]->second));
@@ -1028,7 +999,7 @@ void FunctionDef_Node::SerializeWithCachedSizes(
         Utf8Check::Check(items[static_cast<ptrdiff_t>(i)]);
       }
     } else {
-      ::google::protobuf::scoped_ptr<FunctionDef_Node_AttrEntry_DoNotUse> entry;
+      ::std::unique_ptr<FunctionDef_Node_AttrEntry_DoNotUse> entry;
       for (::google::protobuf::Map< ::std::string, ::opencv_tensorflow::AttrValue >::const_iterator
           it = this->attr().begin();
           it != this->attr().end(); ++it) {
@@ -1091,7 +1062,7 @@ size_t FunctionDef_Node::ByteSizeLong() const {
   total_size += 1 *
       ::google::protobuf::internal::FromIntSize(this->attr_size());
   {
-    ::google::protobuf::scoped_ptr<FunctionDef_Node_AttrEntry_DoNotUse> entry;
+    ::std::unique_ptr<FunctionDef_Node_AttrEntry_DoNotUse> entry;
     for (::google::protobuf::Map< ::std::string, ::opencv_tensorflow::AttrValue >::const_iterator
         it = this->attr().begin();
         it != this->attr().end(); ++it) {
@@ -1115,9 +1086,7 @@ size_t FunctionDef_Node::ByteSizeLong() const {
   }
 
   int cached_size = ::google::protobuf::internal::ToCachedSize(total_size);
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = cached_size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  SetCachedSize(cached_size);
   return total_size;
 }
 
@@ -1191,13 +1160,13 @@ void FunctionDef_Node::UnsafeArenaSwap(FunctionDef_Node* other) {
 }
 void FunctionDef_Node::InternalSwap(FunctionDef_Node* other) {
   using std::swap;
-  ret_.InternalSwap(&other->ret_);
-  arg_.InternalSwap(&other->arg_);
-  dep_.InternalSwap(&other->dep_);
+  ret_.InternalSwap(CastToBase(&other->ret_));
+  arg_.InternalSwap(CastToBase(&other->arg_));
+  dep_.InternalSwap(CastToBase(&other->dep_));
   attr_.Swap(&other->attr_);
-  op_.Swap(&other->op_);
+  op_.Swap(&other->op_, &::google::protobuf::internal::GetEmptyStringAlreadyInited(),
+    GetArenaNoVirtual());
   _internal_metadata_.Swap(&other->_internal_metadata_);
-  swap(_cached_size_, other->_cached_size_);
 }
 
 ::google::protobuf::Metadata FunctionDef_Node::GetMetadata() const {
@@ -1212,10 +1181,6 @@ void FunctionDef::InitAsDefaultInstance() {
   ::opencv_tensorflow::_FunctionDef_default_instance_._instance.get_mutable()->signature_ = const_cast< ::opencv_tensorflow::OpDef*>(
       ::opencv_tensorflow::OpDef::internal_default_instance());
 }
-void FunctionDef::_slow_mutable_signature() {
-  signature_ = ::google::protobuf::Arena::CreateMessage< ::opencv_tensorflow::OpDef >(
-      GetArenaNoVirtual());
-}
 void FunctionDef::unsafe_arena_set_allocated_signature(
     ::opencv_tensorflow::OpDef* signature) {
   if (GetArenaNoVirtual() == NULL) {
@@ -1223,9 +1188,9 @@ void FunctionDef::unsafe_arena_set_allocated_signature(
   }
   signature_ = signature;
   if (signature) {
-
+    
   } else {
-
+    
   }
   // @@protoc_insertion_point(field_unsafe_arena_set_allocated:opencv_tensorflow.FunctionDef.signature)
 }
@@ -1242,9 +1207,8 @@ const int FunctionDef::kNodeFieldNumber;
 
 FunctionDef::FunctionDef()
   : ::google::protobuf::Message(), _internal_metadata_(NULL) {
-  if (GOOGLE_PREDICT_TRUE(this != internal_default_instance())) {
-    ::protobuf_function_2eproto::InitDefaultsFunctionDef();
-  }
+  ::google::protobuf::internal::InitSCC(
+      &protobuf_function_2eproto::scc_info_FunctionDef.base);
   SharedCtor();
   // @@protoc_insertion_point(constructor:opencv_tensorflow.FunctionDef)
 }
@@ -1252,7 +1216,7 @@ FunctionDef::FunctionDef(::google::protobuf::Arena* arena)
   : ::google::protobuf::Message(),
   _internal_metadata_(arena),
   node_(arena) {
-  ::protobuf_function_2eproto::InitDefaultsFunctionDef();
+  ::google::protobuf::internal::InitSCC(&protobuf_function_2eproto::scc_info_FunctionDef.base);
   SharedCtor();
   RegisterArenaDtor(arena);
   // @@protoc_insertion_point(arena_constructor:opencv_tensorflow.FunctionDef)
@@ -1260,8 +1224,7 @@ FunctionDef::FunctionDef(::google::protobuf::Arena* arena)
 FunctionDef::FunctionDef(const FunctionDef& from)
   : ::google::protobuf::Message(),
       _internal_metadata_(NULL),
-      node_(from.node_),
-      _cached_size_(0) {
+      node_(from.node_) {
   _internal_metadata_.MergeFrom(from._internal_metadata_);
   if (from.has_signature()) {
     signature_ = new ::opencv_tensorflow::OpDef(*from.signature_);
@@ -1273,7 +1236,6 @@ FunctionDef::FunctionDef(const FunctionDef& from)
 
 void FunctionDef::SharedCtor() {
   signature_ = NULL;
-  _cached_size_ = 0;
 }
 
 FunctionDef::~FunctionDef() {
@@ -1293,9 +1255,7 @@ void FunctionDef::ArenaDtor(void* object) {
 void FunctionDef::RegisterArenaDtor(::google::protobuf::Arena* arena) {
 }
 void FunctionDef::SetCachedSize(int size) const {
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  _cached_size_.Set(size);
 }
 const ::google::protobuf::Descriptor* FunctionDef::descriptor() {
   ::protobuf_function_2eproto::protobuf_AssignDescriptorsOnce();
@@ -1303,13 +1263,10 @@ const ::google::protobuf::Descriptor* FunctionDef::descriptor() {
 }
 
 const FunctionDef& FunctionDef::default_instance() {
-  ::protobuf_function_2eproto::InitDefaultsFunctionDef();
+  ::google::protobuf::internal::InitSCC(&protobuf_function_2eproto::scc_info_FunctionDef.base);
   return *internal_default_instance();
 }
 
-FunctionDef* FunctionDef::New(::google::protobuf::Arena* arena) const {
-  return ::google::protobuf::Arena::CreateMessage<FunctionDef>(arena);
-}
 
 void FunctionDef::Clear() {
 // @@protoc_insertion_point(message_clear_start:opencv_tensorflow.FunctionDef)
@@ -1331,7 +1288,7 @@ bool FunctionDef::MergePartialFromCodedStream(
   ::google::protobuf::uint32 tag;
   // @@protoc_insertion_point(parse_start:opencv_tensorflow.FunctionDef)
   for (;;) {
-    ::std::pair< ::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
+    ::std::pair<::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
     tag = p.first;
     if (!p.second) goto handle_unusual;
     switch (::google::protobuf::internal::WireFormatLite::GetTagFieldNumber(tag)) {
@@ -1351,7 +1308,8 @@ bool FunctionDef::MergePartialFromCodedStream(
       case 2: {
         if (static_cast< ::google::protobuf::uint8>(tag) ==
             static_cast< ::google::protobuf::uint8>(18u /* 18 & 0xFF */)) {
-          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(input, add_node()));
+          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(
+                input, add_node()));
         } else {
           goto handle_unusual;
         }
@@ -1387,14 +1345,16 @@ void FunctionDef::SerializeWithCachedSizes(
   // .opencv_tensorflow.OpDef signature = 1;
   if (this->has_signature()) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      1, *this->signature_, output);
+      1, this->_internal_signature(), output);
   }
 
   // repeated .opencv_tensorflow.FunctionDef.Node node = 2;
   for (unsigned int i = 0,
       n = static_cast<unsigned int>(this->node_size()); i < n; i++) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      2, this->node(static_cast<int>(i)), output);
+      2,
+      this->node(static_cast<int>(i)),
+      output);
   }
 
   if ((_internal_metadata_.have_unknown_fields() &&  ::google::protobuf::internal::GetProto3PreserveUnknownsDefault())) {
@@ -1415,7 +1375,7 @@ void FunctionDef::SerializeWithCachedSizes(
   if (this->has_signature()) {
     target = ::google::protobuf::internal::WireFormatLite::
       InternalWriteMessageToArray(
-        1, *this->signature_, deterministic, target);
+        1, this->_internal_signature(), deterministic, target);
   }
 
   // repeated .opencv_tensorflow.FunctionDef.Node node = 2;
@@ -1458,13 +1418,11 @@ size_t FunctionDef::ByteSizeLong() const {
   if (this->has_signature()) {
     total_size += 1 +
       ::google::protobuf::internal::WireFormatLite::MessageSize(
-        *this->signature_);
+        *signature_);
   }
 
   int cached_size = ::google::protobuf::internal::ToCachedSize(total_size);
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = cached_size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  SetCachedSize(cached_size);
   return total_size;
 }
 
@@ -1535,10 +1493,9 @@ void FunctionDef::UnsafeArenaSwap(FunctionDef* other) {
 }
 void FunctionDef::InternalSwap(FunctionDef* other) {
   using std::swap;
-  node_.InternalSwap(&other->node_);
+  CastToBase(&node_)->InternalSwap(CastToBase(&other->node_));
   swap(signature_, other->signature_);
   _internal_metadata_.Swap(&other->_internal_metadata_);
-  swap(_cached_size_, other->_cached_size_);
 }
 
 ::google::protobuf::Metadata FunctionDef::GetMetadata() const {
@@ -1558,24 +1515,22 @@ const int GradientDef::kGradientFuncFieldNumber;
 
 GradientDef::GradientDef()
   : ::google::protobuf::Message(), _internal_metadata_(NULL) {
-  if (GOOGLE_PREDICT_TRUE(this != internal_default_instance())) {
-    ::protobuf_function_2eproto::InitDefaultsGradientDef();
-  }
+  ::google::protobuf::internal::InitSCC(
+      &protobuf_function_2eproto::scc_info_GradientDef.base);
   SharedCtor();
   // @@protoc_insertion_point(constructor:opencv_tensorflow.GradientDef)
 }
 GradientDef::GradientDef(::google::protobuf::Arena* arena)
   : ::google::protobuf::Message(),
   _internal_metadata_(arena) {
-  ::protobuf_function_2eproto::InitDefaultsGradientDef();
+  ::google::protobuf::internal::InitSCC(&protobuf_function_2eproto::scc_info_GradientDef.base);
   SharedCtor();
   RegisterArenaDtor(arena);
   // @@protoc_insertion_point(arena_constructor:opencv_tensorflow.GradientDef)
 }
 GradientDef::GradientDef(const GradientDef& from)
   : ::google::protobuf::Message(),
-      _internal_metadata_(NULL),
-      _cached_size_(0) {
+      _internal_metadata_(NULL) {
   _internal_metadata_.MergeFrom(from._internal_metadata_);
   function_name_.UnsafeSetDefault(&::google::protobuf::internal::GetEmptyStringAlreadyInited());
   if (from.function_name().size() > 0) {
@@ -1593,7 +1548,6 @@ GradientDef::GradientDef(const GradientDef& from)
 void GradientDef::SharedCtor() {
   function_name_.UnsafeSetDefault(&::google::protobuf::internal::GetEmptyStringAlreadyInited());
   gradient_func_.UnsafeSetDefault(&::google::protobuf::internal::GetEmptyStringAlreadyInited());
-  _cached_size_ = 0;
 }
 
 GradientDef::~GradientDef() {
@@ -1614,9 +1568,7 @@ void GradientDef::ArenaDtor(void* object) {
 void GradientDef::RegisterArenaDtor(::google::protobuf::Arena* arena) {
 }
 void GradientDef::SetCachedSize(int size) const {
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  _cached_size_.Set(size);
 }
 const ::google::protobuf::Descriptor* GradientDef::descriptor() {
   ::protobuf_function_2eproto::protobuf_AssignDescriptorsOnce();
@@ -1624,13 +1576,10 @@ const ::google::protobuf::Descriptor* GradientDef::descriptor() {
 }
 
 const GradientDef& GradientDef::default_instance() {
-  ::protobuf_function_2eproto::InitDefaultsGradientDef();
+  ::google::protobuf::internal::InitSCC(&protobuf_function_2eproto::scc_info_GradientDef.base);
   return *internal_default_instance();
 }
 
-GradientDef* GradientDef::New(::google::protobuf::Arena* arena) const {
-  return ::google::protobuf::Arena::CreateMessage<GradientDef>(arena);
-}
 
 void GradientDef::Clear() {
 // @@protoc_insertion_point(message_clear_start:opencv_tensorflow.GradientDef)
@@ -1649,7 +1598,7 @@ bool GradientDef::MergePartialFromCodedStream(
   ::google::protobuf::uint32 tag;
   // @@protoc_insertion_point(parse_start:opencv_tensorflow.GradientDef)
   for (;;) {
-    ::std::pair< ::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
+    ::std::pair<::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
     tag = p.first;
     if (!p.second) goto handle_unusual;
     switch (::google::protobuf::internal::WireFormatLite::GetTagFieldNumber(tag)) {
@@ -1799,9 +1748,7 @@ size_t GradientDef::ByteSizeLong() const {
   }
 
   int cached_size = ::google::protobuf::internal::ToCachedSize(total_size);
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = cached_size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  SetCachedSize(cached_size);
   return total_size;
 }
 
@@ -1874,10 +1821,11 @@ void GradientDef::UnsafeArenaSwap(GradientDef* other) {
 }
 void GradientDef::InternalSwap(GradientDef* other) {
   using std::swap;
-  function_name_.Swap(&other->function_name_);
-  gradient_func_.Swap(&other->gradient_func_);
+  function_name_.Swap(&other->function_name_, &::google::protobuf::internal::GetEmptyStringAlreadyInited(),
+    GetArenaNoVirtual());
+  gradient_func_.Swap(&other->gradient_func_, &::google::protobuf::internal::GetEmptyStringAlreadyInited(),
+    GetArenaNoVirtual());
   _internal_metadata_.Swap(&other->_internal_metadata_);
-  swap(_cached_size_, other->_cached_size_);
 }
 
 ::google::protobuf::Metadata GradientDef::GetMetadata() const {
@@ -1888,5 +1836,24 @@ void GradientDef::InternalSwap(GradientDef* other) {
 
 // @@protoc_insertion_point(namespace_scope)
 }  // namespace opencv_tensorflow
+namespace google {
+namespace protobuf {
+template<> GOOGLE_PROTOBUF_ATTRIBUTE_NOINLINE ::opencv_tensorflow::FunctionDefLibrary* Arena::CreateMaybeMessage< ::opencv_tensorflow::FunctionDefLibrary >(Arena* arena) {
+  return Arena::CreateMessageInternal< ::opencv_tensorflow::FunctionDefLibrary >(arena);
+}
+template<> GOOGLE_PROTOBUF_ATTRIBUTE_NOINLINE ::opencv_tensorflow::FunctionDef_Node_AttrEntry_DoNotUse* Arena::CreateMaybeMessage< ::opencv_tensorflow::FunctionDef_Node_AttrEntry_DoNotUse >(Arena* arena) {
+  return Arena::CreateMessageInternal< ::opencv_tensorflow::FunctionDef_Node_AttrEntry_DoNotUse >(arena);
+}
+template<> GOOGLE_PROTOBUF_ATTRIBUTE_NOINLINE ::opencv_tensorflow::FunctionDef_Node* Arena::CreateMaybeMessage< ::opencv_tensorflow::FunctionDef_Node >(Arena* arena) {
+  return Arena::CreateMessageInternal< ::opencv_tensorflow::FunctionDef_Node >(arena);
+}
+template<> GOOGLE_PROTOBUF_ATTRIBUTE_NOINLINE ::opencv_tensorflow::FunctionDef* Arena::CreateMaybeMessage< ::opencv_tensorflow::FunctionDef >(Arena* arena) {
+  return Arena::CreateMessageInternal< ::opencv_tensorflow::FunctionDef >(arena);
+}
+template<> GOOGLE_PROTOBUF_ATTRIBUTE_NOINLINE ::opencv_tensorflow::GradientDef* Arena::CreateMaybeMessage< ::opencv_tensorflow::GradientDef >(Arena* arena) {
+  return Arena::CreateMessageInternal< ::opencv_tensorflow::GradientDef >(arena);
+}
+}  // namespace protobuf
+}  // namespace google
 
 // @@protoc_insertion_point(global_scope)
diff --git a/modules/dnn/misc/tensorflow/function.pb.h b/modules/dnn/misc/tensorflow/function.pb.h
index a4be8aa70..e6d70387c 100644
--- a/modules/dnn/misc/tensorflow/function.pb.h
+++ b/modules/dnn/misc/tensorflow/function.pb.h
@@ -1,19 +1,19 @@
 // Generated by the protocol buffer compiler.  DO NOT EDIT!
 // source: function.proto
 
-#ifndef PROTOBUF_function_2eproto__INCLUDED
-#define PROTOBUF_function_2eproto__INCLUDED
+#ifndef PROTOBUF_INCLUDED_function_2eproto
+#define PROTOBUF_INCLUDED_function_2eproto
 
 #include <string>
 
 #include <google/protobuf/stubs/common.h>
 
-#if GOOGLE_PROTOBUF_VERSION < 3005000
+#if GOOGLE_PROTOBUF_VERSION < 3006001
 #error This file was generated by a newer version of protoc which is
 #error incompatible with your Protocol Buffer headers.  Please update
 #error your headers.
 #endif
-#if 3005001 < GOOGLE_PROTOBUF_MIN_PROTOC_VERSION
+#if 3006001 < GOOGLE_PROTOBUF_MIN_PROTOC_VERSION
 #error This file was generated by an older version of protoc which is
 #error incompatible with your Protocol Buffer headers.  Please
 #error regenerate this file with a newer version of protoc.
@@ -24,6 +24,7 @@
 #include <google/protobuf/arenastring.h>
 #include <google/protobuf/generated_message_table_driven.h>
 #include <google/protobuf/generated_message_util.h>
+#include <google/protobuf/inlined_string_field.h>
 #include <google/protobuf/metadata.h>
 #include <google/protobuf/message.h>
 #include <google/protobuf/repeated_field.h>  // IWYU pragma: export
@@ -35,6 +36,7 @@
 #include "attr_value.pb.h"
 #include "op_def.pb.h"
 // @@protoc_insertion_point(includes)
+#define PROTOBUF_INTERNAL_EXPORT_protobuf_function_2eproto 
 
 namespace protobuf_function_2eproto {
 // Internal implementation detail -- do not use these members.
@@ -47,23 +49,6 @@ struct TableStruct {
   static const ::google::protobuf::uint32 offsets[];
 };
 void AddDescriptors();
-void InitDefaultsFunctionDefLibraryImpl();
-void InitDefaultsFunctionDefLibrary();
-void InitDefaultsFunctionDef_Node_AttrEntry_DoNotUseImpl();
-void InitDefaultsFunctionDef_Node_AttrEntry_DoNotUse();
-void InitDefaultsFunctionDef_NodeImpl();
-void InitDefaultsFunctionDef_Node();
-void InitDefaultsFunctionDefImpl();
-void InitDefaultsFunctionDef();
-void InitDefaultsGradientDefImpl();
-void InitDefaultsGradientDef();
-inline void InitDefaults() {
-  InitDefaultsFunctionDefLibrary();
-  InitDefaultsFunctionDef_Node_AttrEntry_DoNotUse();
-  InitDefaultsFunctionDef_Node();
-  InitDefaultsFunctionDef();
-  InitDefaultsGradientDef();
-}
 }  // namespace protobuf_function_2eproto
 namespace opencv_tensorflow {
 class FunctionDef;
@@ -82,6 +67,15 @@ class GradientDef;
 class GradientDefDefaultTypeInternal;
 extern GradientDefDefaultTypeInternal _GradientDef_default_instance_;
 }  // namespace opencv_tensorflow
+namespace google {
+namespace protobuf {
+template<> ::opencv_tensorflow::FunctionDef* Arena::CreateMaybeMessage<::opencv_tensorflow::FunctionDef>(Arena*);
+template<> ::opencv_tensorflow::FunctionDefLibrary* Arena::CreateMaybeMessage<::opencv_tensorflow::FunctionDefLibrary>(Arena*);
+template<> ::opencv_tensorflow::FunctionDef_Node* Arena::CreateMaybeMessage<::opencv_tensorflow::FunctionDef_Node>(Arena*);
+template<> ::opencv_tensorflow::FunctionDef_Node_AttrEntry_DoNotUse* Arena::CreateMaybeMessage<::opencv_tensorflow::FunctionDef_Node_AttrEntry_DoNotUse>(Arena*);
+template<> ::opencv_tensorflow::GradientDef* Arena::CreateMaybeMessage<::opencv_tensorflow::GradientDef>(Arena*);
+}  // namespace protobuf
+}  // namespace google
 namespace opencv_tensorflow {
 
 // ===================================================================
@@ -112,10 +106,10 @@ class FunctionDefLibrary : public ::google::protobuf::Message /* @@protoc_insert
     return *this;
   }
   #endif
-  inline ::google::protobuf::Arena* GetArena() const PROTOBUF_FINAL {
+  inline ::google::protobuf::Arena* GetArena() const final {
     return GetArenaNoVirtual();
   }
-  inline void* GetMaybeArenaPointer() const PROTOBUF_FINAL {
+  inline void* GetMaybeArenaPointer() const final {
     return MaybeArenaPtr();
   }
   static const ::google::protobuf::Descriptor* descriptor();
@@ -126,7 +120,7 @@ class FunctionDefLibrary : public ::google::protobuf::Message /* @@protoc_insert
     return reinterpret_cast<const FunctionDefLibrary*>(
                &_FunctionDefLibrary_default_instance_);
   }
-  static PROTOBUF_CONSTEXPR int const kIndexInFileMessages =
+  static constexpr int kIndexInFileMessages =
     0;
 
   void UnsafeArenaSwap(FunctionDefLibrary* other);
@@ -137,28 +131,33 @@ class FunctionDefLibrary : public ::google::protobuf::Message /* @@protoc_insert
 
   // implements Message ----------------------------------------------
 
-  inline FunctionDefLibrary* New() const PROTOBUF_FINAL { return New(NULL); }
+  inline FunctionDefLibrary* New() const final {
+    return CreateMaybeMessage<FunctionDefLibrary>(NULL);
+  }
 
-  FunctionDefLibrary* New(::google::protobuf::Arena* arena) const PROTOBUF_FINAL;
-  void CopyFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
-  void MergeFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
+  FunctionDefLibrary* New(::google::protobuf::Arena* arena) const final {
+    return CreateMaybeMessage<FunctionDefLibrary>(arena);
+  }
+  void CopyFrom(const ::google::protobuf::Message& from) final;
+  void MergeFrom(const ::google::protobuf::Message& from) final;
   void CopyFrom(const FunctionDefLibrary& from);
   void MergeFrom(const FunctionDefLibrary& from);
-  void Clear() PROTOBUF_FINAL;
-  bool IsInitialized() const PROTOBUF_FINAL;
+  void Clear() final;
+  bool IsInitialized() const final;
 
-  size_t ByteSizeLong() const PROTOBUF_FINAL;
+  size_t ByteSizeLong() const final;
   bool MergePartialFromCodedStream(
-      ::google::protobuf::io::CodedInputStream* input) PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedInputStream* input) final;
   void SerializeWithCachedSizes(
-      ::google::protobuf::io::CodedOutputStream* output) const PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedOutputStream* output) const final;
   ::google::protobuf::uint8* InternalSerializeWithCachedSizesToArray(
-      bool deterministic, ::google::protobuf::uint8* target) const PROTOBUF_FINAL;
-  int GetCachedSize() const PROTOBUF_FINAL { return _cached_size_; }
+      bool deterministic, ::google::protobuf::uint8* target) const final;
+  int GetCachedSize() const final { return _cached_size_.Get(); }
+
   private:
   void SharedCtor();
   void SharedDtor();
-  void SetCachedSize(int size) const PROTOBUF_FINAL;
+  void SetCachedSize(int size) const final;
   void InternalSwap(FunctionDefLibrary* other);
   protected:
   explicit FunctionDefLibrary(::google::protobuf::Arena* arena);
@@ -174,7 +173,7 @@ class FunctionDefLibrary : public ::google::protobuf::Message /* @@protoc_insert
   }
   public:
 
-  ::google::protobuf::Metadata GetMetadata() const PROTOBUF_FINAL;
+  ::google::protobuf::Metadata GetMetadata() const final;
 
   // nested types ----------------------------------------------------
 
@@ -184,11 +183,11 @@ class FunctionDefLibrary : public ::google::protobuf::Message /* @@protoc_insert
   int function_size() const;
   void clear_function();
   static const int kFunctionFieldNumber = 1;
-  const ::opencv_tensorflow::FunctionDef& function(int index) const;
   ::opencv_tensorflow::FunctionDef* mutable_function(int index);
-  ::opencv_tensorflow::FunctionDef* add_function();
   ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::FunctionDef >*
       mutable_function();
+  const ::opencv_tensorflow::FunctionDef& function(int index) const;
+  ::opencv_tensorflow::FunctionDef* add_function();
   const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::FunctionDef >&
       function() const;
 
@@ -196,11 +195,11 @@ class FunctionDefLibrary : public ::google::protobuf::Message /* @@protoc_insert
   int gradient_size() const;
   void clear_gradient();
   static const int kGradientFieldNumber = 2;
-  const ::opencv_tensorflow::GradientDef& gradient(int index) const;
   ::opencv_tensorflow::GradientDef* mutable_gradient(int index);
-  ::opencv_tensorflow::GradientDef* add_gradient();
   ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::GradientDef >*
       mutable_gradient();
+  const ::opencv_tensorflow::GradientDef& gradient(int index) const;
+  ::opencv_tensorflow::GradientDef* add_gradient();
   const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::GradientDef >&
       gradient() const;
 
@@ -213,19 +212,18 @@ class FunctionDefLibrary : public ::google::protobuf::Message /* @@protoc_insert
   typedef void DestructorSkippable_;
   ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::FunctionDef > function_;
   ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::GradientDef > gradient_;
-  mutable int _cached_size_;
+  mutable ::google::protobuf::internal::CachedSize _cached_size_;
   friend struct ::protobuf_function_2eproto::TableStruct;
-  friend void ::protobuf_function_2eproto::InitDefaultsFunctionDefLibraryImpl();
 };
 // -------------------------------------------------------------------
 
-class FunctionDef_Node_AttrEntry_DoNotUse : public ::google::protobuf::internal::MapEntry<FunctionDef_Node_AttrEntry_DoNotUse,
+class FunctionDef_Node_AttrEntry_DoNotUse : public ::google::protobuf::internal::MapEntry<FunctionDef_Node_AttrEntry_DoNotUse, 
     ::std::string, ::opencv_tensorflow::AttrValue,
     ::google::protobuf::internal::WireFormatLite::TYPE_STRING,
     ::google::protobuf::internal::WireFormatLite::TYPE_MESSAGE,
     0 > {
 public:
-  typedef ::google::protobuf::internal::MapEntry<FunctionDef_Node_AttrEntry_DoNotUse,
+  typedef ::google::protobuf::internal::MapEntry<FunctionDef_Node_AttrEntry_DoNotUse, 
     ::std::string, ::opencv_tensorflow::AttrValue,
     ::google::protobuf::internal::WireFormatLite::TYPE_STRING,
     ::google::protobuf::internal::WireFormatLite::TYPE_MESSAGE,
@@ -234,7 +232,7 @@ public:
   FunctionDef_Node_AttrEntry_DoNotUse(::google::protobuf::Arena* arena);
   void MergeFrom(const FunctionDef_Node_AttrEntry_DoNotUse& other);
   static const FunctionDef_Node_AttrEntry_DoNotUse* internal_default_instance() { return reinterpret_cast<const FunctionDef_Node_AttrEntry_DoNotUse*>(&_FunctionDef_Node_AttrEntry_DoNotUse_default_instance_); }
-  void MergeFrom(const ::google::protobuf::Message& other) PROTOBUF_FINAL;
+  void MergeFrom(const ::google::protobuf::Message& other) final;
   ::google::protobuf::Metadata GetMetadata() const;
 };
 
@@ -266,10 +264,10 @@ class FunctionDef_Node : public ::google::protobuf::Message /* @@protoc_insertio
     return *this;
   }
   #endif
-  inline ::google::protobuf::Arena* GetArena() const PROTOBUF_FINAL {
+  inline ::google::protobuf::Arena* GetArena() const final {
     return GetArenaNoVirtual();
   }
-  inline void* GetMaybeArenaPointer() const PROTOBUF_FINAL {
+  inline void* GetMaybeArenaPointer() const final {
     return MaybeArenaPtr();
   }
   static const ::google::protobuf::Descriptor* descriptor();
@@ -280,7 +278,7 @@ class FunctionDef_Node : public ::google::protobuf::Message /* @@protoc_insertio
     return reinterpret_cast<const FunctionDef_Node*>(
                &_FunctionDef_Node_default_instance_);
   }
-  static PROTOBUF_CONSTEXPR int const kIndexInFileMessages =
+  static constexpr int kIndexInFileMessages =
     2;
 
   void UnsafeArenaSwap(FunctionDef_Node* other);
@@ -291,28 +289,33 @@ class FunctionDef_Node : public ::google::protobuf::Message /* @@protoc_insertio
 
   // implements Message ----------------------------------------------
 
-  inline FunctionDef_Node* New() const PROTOBUF_FINAL { return New(NULL); }
+  inline FunctionDef_Node* New() const final {
+    return CreateMaybeMessage<FunctionDef_Node>(NULL);
+  }
 
-  FunctionDef_Node* New(::google::protobuf::Arena* arena) const PROTOBUF_FINAL;
-  void CopyFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
-  void MergeFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
+  FunctionDef_Node* New(::google::protobuf::Arena* arena) const final {
+    return CreateMaybeMessage<FunctionDef_Node>(arena);
+  }
+  void CopyFrom(const ::google::protobuf::Message& from) final;
+  void MergeFrom(const ::google::protobuf::Message& from) final;
   void CopyFrom(const FunctionDef_Node& from);
   void MergeFrom(const FunctionDef_Node& from);
-  void Clear() PROTOBUF_FINAL;
-  bool IsInitialized() const PROTOBUF_FINAL;
+  void Clear() final;
+  bool IsInitialized() const final;
 
-  size_t ByteSizeLong() const PROTOBUF_FINAL;
+  size_t ByteSizeLong() const final;
   bool MergePartialFromCodedStream(
-      ::google::protobuf::io::CodedInputStream* input) PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedInputStream* input) final;
   void SerializeWithCachedSizes(
-      ::google::protobuf::io::CodedOutputStream* output) const PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedOutputStream* output) const final;
   ::google::protobuf::uint8* InternalSerializeWithCachedSizesToArray(
-      bool deterministic, ::google::protobuf::uint8* target) const PROTOBUF_FINAL;
-  int GetCachedSize() const PROTOBUF_FINAL { return _cached_size_; }
+      bool deterministic, ::google::protobuf::uint8* target) const final;
+  int GetCachedSize() const final { return _cached_size_.Get(); }
+
   private:
   void SharedCtor();
   void SharedDtor();
-  void SetCachedSize(int size) const PROTOBUF_FINAL;
+  void SetCachedSize(int size) const final;
   void InternalSwap(FunctionDef_Node* other);
   protected:
   explicit FunctionDef_Node(::google::protobuf::Arena* arena);
@@ -328,7 +331,7 @@ class FunctionDef_Node : public ::google::protobuf::Message /* @@protoc_insertio
   }
   public:
 
-  ::google::protobuf::Metadata GetMetadata() const PROTOBUF_FINAL;
+  ::google::protobuf::Metadata GetMetadata() const final;
 
   // nested types ----------------------------------------------------
 
@@ -450,9 +453,8 @@ class FunctionDef_Node : public ::google::protobuf::Message /* @@protoc_insertio
       ::google::protobuf::internal::WireFormatLite::TYPE_MESSAGE,
       0 > attr_;
   ::google::protobuf::internal::ArenaStringPtr op_;
-  mutable int _cached_size_;
+  mutable ::google::protobuf::internal::CachedSize _cached_size_;
   friend struct ::protobuf_function_2eproto::TableStruct;
-  friend void ::protobuf_function_2eproto::InitDefaultsFunctionDef_NodeImpl();
 };
 // -------------------------------------------------------------------
 
@@ -482,10 +484,10 @@ class FunctionDef : public ::google::protobuf::Message /* @@protoc_insertion_poi
     return *this;
   }
   #endif
-  inline ::google::protobuf::Arena* GetArena() const PROTOBUF_FINAL {
+  inline ::google::protobuf::Arena* GetArena() const final {
     return GetArenaNoVirtual();
   }
-  inline void* GetMaybeArenaPointer() const PROTOBUF_FINAL {
+  inline void* GetMaybeArenaPointer() const final {
     return MaybeArenaPtr();
   }
   static const ::google::protobuf::Descriptor* descriptor();
@@ -496,7 +498,7 @@ class FunctionDef : public ::google::protobuf::Message /* @@protoc_insertion_poi
     return reinterpret_cast<const FunctionDef*>(
                &_FunctionDef_default_instance_);
   }
-  static PROTOBUF_CONSTEXPR int const kIndexInFileMessages =
+  static constexpr int kIndexInFileMessages =
     3;
 
   void UnsafeArenaSwap(FunctionDef* other);
@@ -507,28 +509,33 @@ class FunctionDef : public ::google::protobuf::Message /* @@protoc_insertion_poi
 
   // implements Message ----------------------------------------------
 
-  inline FunctionDef* New() const PROTOBUF_FINAL { return New(NULL); }
+  inline FunctionDef* New() const final {
+    return CreateMaybeMessage<FunctionDef>(NULL);
+  }
 
-  FunctionDef* New(::google::protobuf::Arena* arena) const PROTOBUF_FINAL;
-  void CopyFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
-  void MergeFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
+  FunctionDef* New(::google::protobuf::Arena* arena) const final {
+    return CreateMaybeMessage<FunctionDef>(arena);
+  }
+  void CopyFrom(const ::google::protobuf::Message& from) final;
+  void MergeFrom(const ::google::protobuf::Message& from) final;
   void CopyFrom(const FunctionDef& from);
   void MergeFrom(const FunctionDef& from);
-  void Clear() PROTOBUF_FINAL;
-  bool IsInitialized() const PROTOBUF_FINAL;
+  void Clear() final;
+  bool IsInitialized() const final;
 
-  size_t ByteSizeLong() const PROTOBUF_FINAL;
+  size_t ByteSizeLong() const final;
   bool MergePartialFromCodedStream(
-      ::google::protobuf::io::CodedInputStream* input) PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedInputStream* input) final;
   void SerializeWithCachedSizes(
-      ::google::protobuf::io::CodedOutputStream* output) const PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedOutputStream* output) const final;
   ::google::protobuf::uint8* InternalSerializeWithCachedSizesToArray(
-      bool deterministic, ::google::protobuf::uint8* target) const PROTOBUF_FINAL;
-  int GetCachedSize() const PROTOBUF_FINAL { return _cached_size_; }
+      bool deterministic, ::google::protobuf::uint8* target) const final;
+  int GetCachedSize() const final { return _cached_size_.Get(); }
+
   private:
   void SharedCtor();
   void SharedDtor();
-  void SetCachedSize(int size) const PROTOBUF_FINAL;
+  void SetCachedSize(int size) const final;
   void InternalSwap(FunctionDef* other);
   protected:
   explicit FunctionDef(::google::protobuf::Arena* arena);
@@ -544,7 +551,7 @@ class FunctionDef : public ::google::protobuf::Message /* @@protoc_insertion_poi
   }
   public:
 
-  ::google::protobuf::Metadata GetMetadata() const PROTOBUF_FINAL;
+  ::google::protobuf::Metadata GetMetadata() const final;
 
   // nested types ----------------------------------------------------
 
@@ -556,11 +563,11 @@ class FunctionDef : public ::google::protobuf::Message /* @@protoc_insertion_poi
   int node_size() const;
   void clear_node();
   static const int kNodeFieldNumber = 2;
-  const ::opencv_tensorflow::FunctionDef_Node& node(int index) const;
   ::opencv_tensorflow::FunctionDef_Node* mutable_node(int index);
-  ::opencv_tensorflow::FunctionDef_Node* add_node();
   ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::FunctionDef_Node >*
       mutable_node();
+  const ::opencv_tensorflow::FunctionDef_Node& node(int index) const;
+  ::opencv_tensorflow::FunctionDef_Node* add_node();
   const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::FunctionDef_Node >&
       node() const;
 
@@ -569,7 +576,7 @@ class FunctionDef : public ::google::protobuf::Message /* @@protoc_insertion_poi
   void clear_signature();
   static const int kSignatureFieldNumber = 1;
   private:
-  void _slow_mutable_signature();
+  const ::opencv_tensorflow::OpDef& _internal_signature() const;
   public:
   const ::opencv_tensorflow::OpDef& signature() const;
   ::opencv_tensorflow::OpDef* release_signature();
@@ -588,9 +595,8 @@ class FunctionDef : public ::google::protobuf::Message /* @@protoc_insertion_poi
   typedef void DestructorSkippable_;
   ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::FunctionDef_Node > node_;
   ::opencv_tensorflow::OpDef* signature_;
-  mutable int _cached_size_;
+  mutable ::google::protobuf::internal::CachedSize _cached_size_;
   friend struct ::protobuf_function_2eproto::TableStruct;
-  friend void ::protobuf_function_2eproto::InitDefaultsFunctionDefImpl();
 };
 // -------------------------------------------------------------------
 
@@ -620,10 +626,10 @@ class GradientDef : public ::google::protobuf::Message /* @@protoc_insertion_poi
     return *this;
   }
   #endif
-  inline ::google::protobuf::Arena* GetArena() const PROTOBUF_FINAL {
+  inline ::google::protobuf::Arena* GetArena() const final {
     return GetArenaNoVirtual();
   }
-  inline void* GetMaybeArenaPointer() const PROTOBUF_FINAL {
+  inline void* GetMaybeArenaPointer() const final {
     return MaybeArenaPtr();
   }
   static const ::google::protobuf::Descriptor* descriptor();
@@ -634,7 +640,7 @@ class GradientDef : public ::google::protobuf::Message /* @@protoc_insertion_poi
     return reinterpret_cast<const GradientDef*>(
                &_GradientDef_default_instance_);
   }
-  static PROTOBUF_CONSTEXPR int const kIndexInFileMessages =
+  static constexpr int kIndexInFileMessages =
     4;
 
   void UnsafeArenaSwap(GradientDef* other);
@@ -645,28 +651,33 @@ class GradientDef : public ::google::protobuf::Message /* @@protoc_insertion_poi
 
   // implements Message ----------------------------------------------
 
-  inline GradientDef* New() const PROTOBUF_FINAL { return New(NULL); }
+  inline GradientDef* New() const final {
+    return CreateMaybeMessage<GradientDef>(NULL);
+  }
 
-  GradientDef* New(::google::protobuf::Arena* arena) const PROTOBUF_FINAL;
-  void CopyFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
-  void MergeFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
+  GradientDef* New(::google::protobuf::Arena* arena) const final {
+    return CreateMaybeMessage<GradientDef>(arena);
+  }
+  void CopyFrom(const ::google::protobuf::Message& from) final;
+  void MergeFrom(const ::google::protobuf::Message& from) final;
   void CopyFrom(const GradientDef& from);
   void MergeFrom(const GradientDef& from);
-  void Clear() PROTOBUF_FINAL;
-  bool IsInitialized() const PROTOBUF_FINAL;
+  void Clear() final;
+  bool IsInitialized() const final;
 
-  size_t ByteSizeLong() const PROTOBUF_FINAL;
+  size_t ByteSizeLong() const final;
   bool MergePartialFromCodedStream(
-      ::google::protobuf::io::CodedInputStream* input) PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedInputStream* input) final;
   void SerializeWithCachedSizes(
-      ::google::protobuf::io::CodedOutputStream* output) const PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedOutputStream* output) const final;
   ::google::protobuf::uint8* InternalSerializeWithCachedSizesToArray(
-      bool deterministic, ::google::protobuf::uint8* target) const PROTOBUF_FINAL;
-  int GetCachedSize() const PROTOBUF_FINAL { return _cached_size_; }
+      bool deterministic, ::google::protobuf::uint8* target) const final;
+  int GetCachedSize() const final { return _cached_size_.Get(); }
+
   private:
   void SharedCtor();
   void SharedDtor();
-  void SetCachedSize(int size) const PROTOBUF_FINAL;
+  void SetCachedSize(int size) const final;
   void InternalSwap(GradientDef* other);
   protected:
   explicit GradientDef(::google::protobuf::Arena* arena);
@@ -682,7 +693,7 @@ class GradientDef : public ::google::protobuf::Message /* @@protoc_insertion_poi
   }
   public:
 
-  ::google::protobuf::Metadata GetMetadata() const PROTOBUF_FINAL;
+  ::google::protobuf::Metadata GetMetadata() const final;
 
   // nested types ----------------------------------------------------
 
@@ -743,9 +754,8 @@ class GradientDef : public ::google::protobuf::Message /* @@protoc_insertion_poi
   typedef void DestructorSkippable_;
   ::google::protobuf::internal::ArenaStringPtr function_name_;
   ::google::protobuf::internal::ArenaStringPtr gradient_func_;
-  mutable int _cached_size_;
+  mutable ::google::protobuf::internal::CachedSize _cached_size_;
   friend struct ::protobuf_function_2eproto::TableStruct;
-  friend void ::protobuf_function_2eproto::InitDefaultsGradientDefImpl();
 };
 // ===================================================================
 
@@ -765,23 +775,23 @@ inline int FunctionDefLibrary::function_size() const {
 inline void FunctionDefLibrary::clear_function() {
   function_.Clear();
 }
-inline const ::opencv_tensorflow::FunctionDef& FunctionDefLibrary::function(int index) const {
-  // @@protoc_insertion_point(field_get:opencv_tensorflow.FunctionDefLibrary.function)
-  return function_.Get(index);
-}
 inline ::opencv_tensorflow::FunctionDef* FunctionDefLibrary::mutable_function(int index) {
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.FunctionDefLibrary.function)
   return function_.Mutable(index);
 }
-inline ::opencv_tensorflow::FunctionDef* FunctionDefLibrary::add_function() {
-  // @@protoc_insertion_point(field_add:opencv_tensorflow.FunctionDefLibrary.function)
-  return function_.Add();
-}
 inline ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::FunctionDef >*
 FunctionDefLibrary::mutable_function() {
   // @@protoc_insertion_point(field_mutable_list:opencv_tensorflow.FunctionDefLibrary.function)
   return &function_;
 }
+inline const ::opencv_tensorflow::FunctionDef& FunctionDefLibrary::function(int index) const {
+  // @@protoc_insertion_point(field_get:opencv_tensorflow.FunctionDefLibrary.function)
+  return function_.Get(index);
+}
+inline ::opencv_tensorflow::FunctionDef* FunctionDefLibrary::add_function() {
+  // @@protoc_insertion_point(field_add:opencv_tensorflow.FunctionDefLibrary.function)
+  return function_.Add();
+}
 inline const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::FunctionDef >&
 FunctionDefLibrary::function() const {
   // @@protoc_insertion_point(field_list:opencv_tensorflow.FunctionDefLibrary.function)
@@ -795,23 +805,23 @@ inline int FunctionDefLibrary::gradient_size() const {
 inline void FunctionDefLibrary::clear_gradient() {
   gradient_.Clear();
 }
-inline const ::opencv_tensorflow::GradientDef& FunctionDefLibrary::gradient(int index) const {
-  // @@protoc_insertion_point(field_get:opencv_tensorflow.FunctionDefLibrary.gradient)
-  return gradient_.Get(index);
-}
 inline ::opencv_tensorflow::GradientDef* FunctionDefLibrary::mutable_gradient(int index) {
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.FunctionDefLibrary.gradient)
   return gradient_.Mutable(index);
 }
-inline ::opencv_tensorflow::GradientDef* FunctionDefLibrary::add_gradient() {
-  // @@protoc_insertion_point(field_add:opencv_tensorflow.FunctionDefLibrary.gradient)
-  return gradient_.Add();
-}
 inline ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::GradientDef >*
 FunctionDefLibrary::mutable_gradient() {
   // @@protoc_insertion_point(field_mutable_list:opencv_tensorflow.FunctionDefLibrary.gradient)
   return &gradient_;
 }
+inline const ::opencv_tensorflow::GradientDef& FunctionDefLibrary::gradient(int index) const {
+  // @@protoc_insertion_point(field_get:opencv_tensorflow.FunctionDefLibrary.gradient)
+  return gradient_.Get(index);
+}
+inline ::opencv_tensorflow::GradientDef* FunctionDefLibrary::add_gradient() {
+  // @@protoc_insertion_point(field_add:opencv_tensorflow.FunctionDefLibrary.gradient)
+  return gradient_.Add();
+}
 inline const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::GradientDef >&
 FunctionDefLibrary::gradient() const {
   // @@protoc_insertion_point(field_list:opencv_tensorflow.FunctionDefLibrary.gradient)
@@ -902,13 +912,13 @@ inline const ::std::string& FunctionDef_Node::op() const {
   return op_.Get();
 }
 inline void FunctionDef_Node::set_op(const ::std::string& value) {
-
+  
   op_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), value, GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set:opencv_tensorflow.FunctionDef.Node.op)
 }
 #if LANG_CXX11
 inline void FunctionDef_Node::set_op(::std::string&& value) {
-
+  
   op_.Set(
     &::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::move(value), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_rvalue:opencv_tensorflow.FunctionDef.Node.op)
@@ -916,33 +926,33 @@ inline void FunctionDef_Node::set_op(::std::string&& value) {
 #endif
 inline void FunctionDef_Node::set_op(const char* value) {
   GOOGLE_DCHECK(value != NULL);
-
+  
   op_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(value),
               GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_char:opencv_tensorflow.FunctionDef.Node.op)
 }
 inline void FunctionDef_Node::set_op(const char* value,
     size_t size) {
-
+  
   op_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(
       reinterpret_cast<const char*>(value), size), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_pointer:opencv_tensorflow.FunctionDef.Node.op)
 }
 inline ::std::string* FunctionDef_Node::mutable_op() {
-
+  
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.FunctionDef.Node.op)
   return op_.Mutable(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline ::std::string* FunctionDef_Node::release_op() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.FunctionDef.Node.op)
-
+  
   return op_.Release(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline void FunctionDef_Node::set_allocated_op(::std::string* op) {
   if (op != NULL) {
-
+    
   } else {
-
+    
   }
   op_.SetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), op,
       GetArenaNoVirtual());
@@ -951,7 +961,7 @@ inline void FunctionDef_Node::set_allocated_op(::std::string* op) {
 inline ::std::string* FunctionDef_Node::unsafe_arena_release_op() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.FunctionDef.Node.op)
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
-
+  
   return op_.UnsafeArenaRelease(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       GetArenaNoVirtual());
 }
@@ -959,9 +969,9 @@ inline void FunctionDef_Node::unsafe_arena_set_allocated_op(
     ::std::string* op) {
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
   if (op != NULL) {
-
+    
   } else {
-
+    
   }
   op_.UnsafeArenaSetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       op, GetArenaNoVirtual());
@@ -1129,6 +1139,9 @@ FunctionDef_Node::mutable_attr() {
 inline bool FunctionDef::has_signature() const {
   return this != internal_default_instance() && signature_ != NULL;
 }
+inline const ::opencv_tensorflow::OpDef& FunctionDef::_internal_signature() const {
+  return *signature_;
+}
 inline const ::opencv_tensorflow::OpDef& FunctionDef::signature() const {
   const ::opencv_tensorflow::OpDef* p = signature_;
   // @@protoc_insertion_point(field_get:opencv_tensorflow.FunctionDef.signature)
@@ -1137,25 +1150,26 @@ inline const ::opencv_tensorflow::OpDef& FunctionDef::signature() const {
 }
 inline ::opencv_tensorflow::OpDef* FunctionDef::release_signature() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.FunctionDef.signature)
-
+  
   ::opencv_tensorflow::OpDef* temp = signature_;
   if (GetArenaNoVirtual() != NULL) {
-    temp = ::google::protobuf::internal::DuplicateIfNonNull(temp, NULL);
+    temp = ::google::protobuf::internal::DuplicateIfNonNull(temp);
   }
   signature_ = NULL;
   return temp;
 }
 inline ::opencv_tensorflow::OpDef* FunctionDef::unsafe_arena_release_signature() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.FunctionDef.signature)
-
+  
   ::opencv_tensorflow::OpDef* temp = signature_;
   signature_ = NULL;
   return temp;
 }
 inline ::opencv_tensorflow::OpDef* FunctionDef::mutable_signature() {
-
+  
   if (signature_ == NULL) {
-    _slow_mutable_signature();
+    auto* p = CreateMaybeMessage<::opencv_tensorflow::OpDef>(GetArenaNoVirtual());
+    signature_ = p;
   }
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.FunctionDef.signature)
   return signature_;
@@ -1167,14 +1181,14 @@ inline void FunctionDef::set_allocated_signature(::opencv_tensorflow::OpDef* sig
   }
   if (signature) {
     ::google::protobuf::Arena* submessage_arena =
-      reinterpret_cast< ::google::protobuf::MessageLite*>(signature)->GetArena();
+      reinterpret_cast<::google::protobuf::MessageLite*>(signature)->GetArena();
     if (message_arena != submessage_arena) {
       signature = ::google::protobuf::internal::GetOwnedMessage(
           message_arena, signature, submessage_arena);
     }
-
+    
   } else {
-
+    
   }
   signature_ = signature;
   // @@protoc_insertion_point(field_set_allocated:opencv_tensorflow.FunctionDef.signature)
@@ -1187,23 +1201,23 @@ inline int FunctionDef::node_size() const {
 inline void FunctionDef::clear_node() {
   node_.Clear();
 }
-inline const ::opencv_tensorflow::FunctionDef_Node& FunctionDef::node(int index) const {
-  // @@protoc_insertion_point(field_get:opencv_tensorflow.FunctionDef.node)
-  return node_.Get(index);
-}
 inline ::opencv_tensorflow::FunctionDef_Node* FunctionDef::mutable_node(int index) {
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.FunctionDef.node)
   return node_.Mutable(index);
 }
-inline ::opencv_tensorflow::FunctionDef_Node* FunctionDef::add_node() {
-  // @@protoc_insertion_point(field_add:opencv_tensorflow.FunctionDef.node)
-  return node_.Add();
-}
 inline ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::FunctionDef_Node >*
 FunctionDef::mutable_node() {
   // @@protoc_insertion_point(field_mutable_list:opencv_tensorflow.FunctionDef.node)
   return &node_;
 }
+inline const ::opencv_tensorflow::FunctionDef_Node& FunctionDef::node(int index) const {
+  // @@protoc_insertion_point(field_get:opencv_tensorflow.FunctionDef.node)
+  return node_.Get(index);
+}
+inline ::opencv_tensorflow::FunctionDef_Node* FunctionDef::add_node() {
+  // @@protoc_insertion_point(field_add:opencv_tensorflow.FunctionDef.node)
+  return node_.Add();
+}
 inline const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::FunctionDef_Node >&
 FunctionDef::node() const {
   // @@protoc_insertion_point(field_list:opencv_tensorflow.FunctionDef.node)
@@ -1223,13 +1237,13 @@ inline const ::std::string& GradientDef::function_name() const {
   return function_name_.Get();
 }
 inline void GradientDef::set_function_name(const ::std::string& value) {
-
+  
   function_name_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), value, GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set:opencv_tensorflow.GradientDef.function_name)
 }
 #if LANG_CXX11
 inline void GradientDef::set_function_name(::std::string&& value) {
-
+  
   function_name_.Set(
     &::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::move(value), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_rvalue:opencv_tensorflow.GradientDef.function_name)
@@ -1237,33 +1251,33 @@ inline void GradientDef::set_function_name(::std::string&& value) {
 #endif
 inline void GradientDef::set_function_name(const char* value) {
   GOOGLE_DCHECK(value != NULL);
-
+  
   function_name_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(value),
               GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_char:opencv_tensorflow.GradientDef.function_name)
 }
 inline void GradientDef::set_function_name(const char* value,
     size_t size) {
-
+  
   function_name_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(
       reinterpret_cast<const char*>(value), size), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_pointer:opencv_tensorflow.GradientDef.function_name)
 }
 inline ::std::string* GradientDef::mutable_function_name() {
-
+  
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.GradientDef.function_name)
   return function_name_.Mutable(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline ::std::string* GradientDef::release_function_name() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.GradientDef.function_name)
-
+  
   return function_name_.Release(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline void GradientDef::set_allocated_function_name(::std::string* function_name) {
   if (function_name != NULL) {
-
+    
   } else {
-
+    
   }
   function_name_.SetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), function_name,
       GetArenaNoVirtual());
@@ -1272,7 +1286,7 @@ inline void GradientDef::set_allocated_function_name(::std::string* function_nam
 inline ::std::string* GradientDef::unsafe_arena_release_function_name() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.GradientDef.function_name)
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
-
+  
   return function_name_.UnsafeArenaRelease(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       GetArenaNoVirtual());
 }
@@ -1280,9 +1294,9 @@ inline void GradientDef::unsafe_arena_set_allocated_function_name(
     ::std::string* function_name) {
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
   if (function_name != NULL) {
-
+    
   } else {
-
+    
   }
   function_name_.UnsafeArenaSetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       function_name, GetArenaNoVirtual());
@@ -1298,13 +1312,13 @@ inline const ::std::string& GradientDef::gradient_func() const {
   return gradient_func_.Get();
 }
 inline void GradientDef::set_gradient_func(const ::std::string& value) {
-
+  
   gradient_func_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), value, GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set:opencv_tensorflow.GradientDef.gradient_func)
 }
 #if LANG_CXX11
 inline void GradientDef::set_gradient_func(::std::string&& value) {
-
+  
   gradient_func_.Set(
     &::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::move(value), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_rvalue:opencv_tensorflow.GradientDef.gradient_func)
@@ -1312,33 +1326,33 @@ inline void GradientDef::set_gradient_func(::std::string&& value) {
 #endif
 inline void GradientDef::set_gradient_func(const char* value) {
   GOOGLE_DCHECK(value != NULL);
-
+  
   gradient_func_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(value),
               GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_char:opencv_tensorflow.GradientDef.gradient_func)
 }
 inline void GradientDef::set_gradient_func(const char* value,
     size_t size) {
-
+  
   gradient_func_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(
       reinterpret_cast<const char*>(value), size), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_pointer:opencv_tensorflow.GradientDef.gradient_func)
 }
 inline ::std::string* GradientDef::mutable_gradient_func() {
-
+  
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.GradientDef.gradient_func)
   return gradient_func_.Mutable(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline ::std::string* GradientDef::release_gradient_func() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.GradientDef.gradient_func)
-
+  
   return gradient_func_.Release(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline void GradientDef::set_allocated_gradient_func(::std::string* gradient_func) {
   if (gradient_func != NULL) {
-
+    
   } else {
-
+    
   }
   gradient_func_.SetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), gradient_func,
       GetArenaNoVirtual());
@@ -1347,7 +1361,7 @@ inline void GradientDef::set_allocated_gradient_func(::std::string* gradient_fun
 inline ::std::string* GradientDef::unsafe_arena_release_gradient_func() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.GradientDef.gradient_func)
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
-
+  
   return gradient_func_.UnsafeArenaRelease(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       GetArenaNoVirtual());
 }
@@ -1355,9 +1369,9 @@ inline void GradientDef::unsafe_arena_set_allocated_gradient_func(
     ::std::string* gradient_func) {
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
   if (gradient_func != NULL) {
-
+    
   } else {
-
+    
   }
   gradient_func_.UnsafeArenaSetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       gradient_func, GetArenaNoVirtual());
@@ -1382,4 +1396,4 @@ inline void GradientDef::unsafe_arena_set_allocated_gradient_func(
 
 // @@protoc_insertion_point(global_scope)
 
-#endif  // PROTOBUF_function_2eproto__INCLUDED
+#endif  // PROTOBUF_INCLUDED_function_2eproto
diff --git a/modules/dnn/misc/tensorflow/graph.pb.cc b/modules/dnn/misc/tensorflow/graph.pb.cc
index 31c7b6301..948817f5b 100644
--- a/modules/dnn/misc/tensorflow/graph.pb.cc
+++ b/modules/dnn/misc/tensorflow/graph.pb.cc
@@ -7,7 +7,6 @@
 
 #include <google/protobuf/stubs/common.h>
 #include <google/protobuf/stubs/port.h>
-#include <google/protobuf/stubs/once.h>
 #include <google/protobuf/io/coded_stream.h>
 #include <google/protobuf/wire_format_lite_inl.h>
 #include <google/protobuf/descriptor.h>
@@ -19,6 +18,20 @@
 #include "third_party/protobuf/version.h"
 #endif
 // @@protoc_insertion_point(includes)
+
+namespace protobuf_attr_5fvalue_2eproto {
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_attr_5fvalue_2eproto ::google::protobuf::internal::SCCInfo<3> scc_info_AttrValue;
+}  // namespace protobuf_attr_5fvalue_2eproto
+namespace protobuf_function_2eproto {
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_function_2eproto ::google::protobuf::internal::SCCInfo<2> scc_info_FunctionDefLibrary;
+}  // namespace protobuf_function_2eproto
+namespace protobuf_graph_2eproto {
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_graph_2eproto ::google::protobuf::internal::SCCInfo<1> scc_info_NodeDef;
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_graph_2eproto ::google::protobuf::internal::SCCInfo<1> scc_info_NodeDef_AttrEntry_DoNotUse;
+}  // namespace protobuf_graph_2eproto
+namespace protobuf_versions_2eproto {
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_versions_2eproto ::google::protobuf::internal::SCCInfo<0> scc_info_VersionDef;
+}  // namespace protobuf_versions_2eproto
 namespace opencv_tensorflow {
 class GraphDefDefaultTypeInternal {
  public:
@@ -37,17 +50,9 @@ class NodeDefDefaultTypeInternal {
 } _NodeDef_default_instance_;
 }  // namespace opencv_tensorflow
 namespace protobuf_graph_2eproto {
-void InitDefaultsGraphDefImpl() {
+static void InitDefaultsGraphDef() {
   GOOGLE_PROTOBUF_VERIFY_VERSION;
 
-#ifdef GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  ::google::protobuf::internal::InitProtobufDefaultsForceUnique();
-#else
-  ::google::protobuf::internal::InitProtobufDefaults();
-#endif  // GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  protobuf_graph_2eproto::InitDefaultsNodeDef();
-  protobuf_versions_2eproto::InitDefaultsVersionDef();
-  protobuf_function_2eproto::InitDefaultsFunctionDefLibrary();
   {
     void* ptr = &::opencv_tensorflow::_GraphDef_default_instance_;
     new (ptr) ::opencv_tensorflow::GraphDef();
@@ -56,20 +61,15 @@ void InitDefaultsGraphDefImpl() {
   ::opencv_tensorflow::GraphDef::InitAsDefaultInstance();
 }
 
-void InitDefaultsGraphDef() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &InitDefaultsGraphDefImpl);
-}
+::google::protobuf::internal::SCCInfo<3> scc_info_GraphDef =
+    {{ATOMIC_VAR_INIT(::google::protobuf::internal::SCCInfoBase::kUninitialized), 3, InitDefaultsGraphDef}, {
+      &protobuf_graph_2eproto::scc_info_NodeDef.base,
+      &protobuf_versions_2eproto::scc_info_VersionDef.base,
+      &protobuf_function_2eproto::scc_info_FunctionDefLibrary.base,}};
 
-void InitDefaultsNodeDef_AttrEntry_DoNotUseImpl() {
+static void InitDefaultsNodeDef_AttrEntry_DoNotUse() {
   GOOGLE_PROTOBUF_VERIFY_VERSION;
 
-#ifdef GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  ::google::protobuf::internal::InitProtobufDefaultsForceUnique();
-#else
-  ::google::protobuf::internal::InitProtobufDefaults();
-#endif  // GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  protobuf_attr_5fvalue_2eproto::InitDefaultsAttrValue();
   {
     void* ptr = &::opencv_tensorflow::_NodeDef_AttrEntry_DoNotUse_default_instance_;
     new (ptr) ::opencv_tensorflow::NodeDef_AttrEntry_DoNotUse();
@@ -77,20 +77,13 @@ void InitDefaultsNodeDef_AttrEntry_DoNotUseImpl() {
   ::opencv_tensorflow::NodeDef_AttrEntry_DoNotUse::InitAsDefaultInstance();
 }
 
-void InitDefaultsNodeDef_AttrEntry_DoNotUse() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &InitDefaultsNodeDef_AttrEntry_DoNotUseImpl);
-}
+::google::protobuf::internal::SCCInfo<1> scc_info_NodeDef_AttrEntry_DoNotUse =
+    {{ATOMIC_VAR_INIT(::google::protobuf::internal::SCCInfoBase::kUninitialized), 1, InitDefaultsNodeDef_AttrEntry_DoNotUse}, {
+      &protobuf_attr_5fvalue_2eproto::scc_info_AttrValue.base,}};
 
-void InitDefaultsNodeDefImpl() {
+static void InitDefaultsNodeDef() {
   GOOGLE_PROTOBUF_VERIFY_VERSION;
 
-#ifdef GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  ::google::protobuf::internal::InitProtobufDefaultsForceUnique();
-#else
-  ::google::protobuf::internal::InitProtobufDefaults();
-#endif  // GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  protobuf_graph_2eproto::InitDefaultsNodeDef_AttrEntry_DoNotUse();
   {
     void* ptr = &::opencv_tensorflow::_NodeDef_default_instance_;
     new (ptr) ::opencv_tensorflow::NodeDef();
@@ -99,9 +92,14 @@ void InitDefaultsNodeDefImpl() {
   ::opencv_tensorflow::NodeDef::InitAsDefaultInstance();
 }
 
-void InitDefaultsNodeDef() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &InitDefaultsNodeDefImpl);
+::google::protobuf::internal::SCCInfo<1> scc_info_NodeDef =
+    {{ATOMIC_VAR_INIT(::google::protobuf::internal::SCCInfoBase::kUninitialized), 1, InitDefaultsNodeDef}, {
+      &protobuf_graph_2eproto::scc_info_NodeDef_AttrEntry_DoNotUse.base,}};
+
+void InitDefaults() {
+  ::google::protobuf::internal::InitSCC(&scc_info_GraphDef.base);
+  ::google::protobuf::internal::InitSCC(&scc_info_NodeDef_AttrEntry_DoNotUse.base);
+  ::google::protobuf::internal::InitSCC(&scc_info_NodeDef.base);
 }
 
 ::google::protobuf::Metadata file_level_metadata[3];
@@ -150,15 +148,14 @@ static ::google::protobuf::Message const * const file_default_instances[] = {
 
 void protobuf_AssignDescriptors() {
   AddDescriptors();
-  ::google::protobuf::MessageFactory* factory = NULL;
   AssignDescriptors(
-      "graph.proto", schemas, file_default_instances, TableStruct::offsets, factory,
+      "graph.proto", schemas, file_default_instances, TableStruct::offsets,
       file_level_metadata, NULL, NULL);
 }
 
 void protobuf_AssignDescriptorsOnce() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &protobuf_AssignDescriptors);
+  static ::google::protobuf::internal::once_flag once;
+  ::google::protobuf::internal::call_once(once, protobuf_AssignDescriptors);
 }
 
 void protobuf_RegisterTypes(const ::std::string&) GOOGLE_PROTOBUF_ATTRIBUTE_COLD;
@@ -194,8 +191,8 @@ void AddDescriptorsImpl() {
 }
 
 void AddDescriptors() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &AddDescriptorsImpl);
+  static ::google::protobuf::internal::once_flag once;
+  ::google::protobuf::internal::call_once(once, AddDescriptorsImpl);
 }
 // Force AddDescriptors() to be called at dynamic initialization time.
 struct StaticDescriptorInitializer {
@@ -214,10 +211,6 @@ void GraphDef::InitAsDefaultInstance() {
   ::opencv_tensorflow::_GraphDef_default_instance_._instance.get_mutable()->library_ = const_cast< ::opencv_tensorflow::FunctionDefLibrary*>(
       ::opencv_tensorflow::FunctionDefLibrary::internal_default_instance());
 }
-void GraphDef::_slow_mutable_versions() {
-  versions_ = ::google::protobuf::Arena::CreateMessage< ::opencv_tensorflow::VersionDef >(
-      GetArenaNoVirtual());
-}
 void GraphDef::unsafe_arena_set_allocated_versions(
     ::opencv_tensorflow::VersionDef* versions) {
   if (GetArenaNoVirtual() == NULL) {
@@ -225,9 +218,9 @@ void GraphDef::unsafe_arena_set_allocated_versions(
   }
   versions_ = versions;
   if (versions) {
-
+    
   } else {
-
+    
   }
   // @@protoc_insertion_point(field_unsafe_arena_set_allocated:opencv_tensorflow.GraphDef.versions)
 }
@@ -237,10 +230,6 @@ void GraphDef::clear_versions() {
   }
   versions_ = NULL;
 }
-void GraphDef::_slow_mutable_library() {
-  library_ = ::google::protobuf::Arena::CreateMessage< ::opencv_tensorflow::FunctionDefLibrary >(
-      GetArenaNoVirtual());
-}
 void GraphDef::unsafe_arena_set_allocated_library(
     ::opencv_tensorflow::FunctionDefLibrary* library) {
   if (GetArenaNoVirtual() == NULL) {
@@ -248,9 +237,9 @@ void GraphDef::unsafe_arena_set_allocated_library(
   }
   library_ = library;
   if (library) {
-
+    
   } else {
-
+    
   }
   // @@protoc_insertion_point(field_unsafe_arena_set_allocated:opencv_tensorflow.GraphDef.library)
 }
@@ -269,9 +258,8 @@ const int GraphDef::kLibraryFieldNumber;
 
 GraphDef::GraphDef()
   : ::google::protobuf::Message(), _internal_metadata_(NULL) {
-  if (GOOGLE_PREDICT_TRUE(this != internal_default_instance())) {
-    ::protobuf_graph_2eproto::InitDefaultsGraphDef();
-  }
+  ::google::protobuf::internal::InitSCC(
+      &protobuf_graph_2eproto::scc_info_GraphDef.base);
   SharedCtor();
   // @@protoc_insertion_point(constructor:opencv_tensorflow.GraphDef)
 }
@@ -279,7 +267,7 @@ GraphDef::GraphDef(::google::protobuf::Arena* arena)
   : ::google::protobuf::Message(),
   _internal_metadata_(arena),
   node_(arena) {
-  ::protobuf_graph_2eproto::InitDefaultsGraphDef();
+  ::google::protobuf::internal::InitSCC(&protobuf_graph_2eproto::scc_info_GraphDef.base);
   SharedCtor();
   RegisterArenaDtor(arena);
   // @@protoc_insertion_point(arena_constructor:opencv_tensorflow.GraphDef)
@@ -287,8 +275,7 @@ GraphDef::GraphDef(::google::protobuf::Arena* arena)
 GraphDef::GraphDef(const GraphDef& from)
   : ::google::protobuf::Message(),
       _internal_metadata_(NULL),
-      node_(from.node_),
-      _cached_size_(0) {
+      node_(from.node_) {
   _internal_metadata_.MergeFrom(from._internal_metadata_);
   if (from.has_library()) {
     library_ = new ::opencv_tensorflow::FunctionDefLibrary(*from.library_);
@@ -308,7 +295,6 @@ void GraphDef::SharedCtor() {
   ::memset(&library_, 0, static_cast<size_t>(
       reinterpret_cast<char*>(&version_) -
       reinterpret_cast<char*>(&library_)) + sizeof(version_));
-  _cached_size_ = 0;
 }
 
 GraphDef::~GraphDef() {
@@ -329,9 +315,7 @@ void GraphDef::ArenaDtor(void* object) {
 void GraphDef::RegisterArenaDtor(::google::protobuf::Arena* arena) {
 }
 void GraphDef::SetCachedSize(int size) const {
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  _cached_size_.Set(size);
 }
 const ::google::protobuf::Descriptor* GraphDef::descriptor() {
   ::protobuf_graph_2eproto::protobuf_AssignDescriptorsOnce();
@@ -339,13 +323,10 @@ const ::google::protobuf::Descriptor* GraphDef::descriptor() {
 }
 
 const GraphDef& GraphDef::default_instance() {
-  ::protobuf_graph_2eproto::InitDefaultsGraphDef();
+  ::google::protobuf::internal::InitSCC(&protobuf_graph_2eproto::scc_info_GraphDef.base);
   return *internal_default_instance();
 }
 
-GraphDef* GraphDef::New(::google::protobuf::Arena* arena) const {
-  return ::google::protobuf::Arena::CreateMessage<GraphDef>(arena);
-}
 
 void GraphDef::Clear() {
 // @@protoc_insertion_point(message_clear_start:opencv_tensorflow.GraphDef)
@@ -372,7 +353,7 @@ bool GraphDef::MergePartialFromCodedStream(
   ::google::protobuf::uint32 tag;
   // @@protoc_insertion_point(parse_start:opencv_tensorflow.GraphDef)
   for (;;) {
-    ::std::pair< ::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
+    ::std::pair<::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
     tag = p.first;
     if (!p.second) goto handle_unusual;
     switch (::google::protobuf::internal::WireFormatLite::GetTagFieldNumber(tag)) {
@@ -380,7 +361,8 @@ bool GraphDef::MergePartialFromCodedStream(
       case 1: {
         if (static_cast< ::google::protobuf::uint8>(tag) ==
             static_cast< ::google::protobuf::uint8>(10u /* 10 & 0xFF */)) {
-          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(input, add_node()));
+          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(
+                input, add_node()));
         } else {
           goto handle_unusual;
         }
@@ -455,13 +437,15 @@ void GraphDef::SerializeWithCachedSizes(
   for (unsigned int i = 0,
       n = static_cast<unsigned int>(this->node_size()); i < n; i++) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      1, this->node(static_cast<int>(i)), output);
+      1,
+      this->node(static_cast<int>(i)),
+      output);
   }
 
   // .opencv_tensorflow.FunctionDefLibrary library = 2;
   if (this->has_library()) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      2, *this->library_, output);
+      2, this->_internal_library(), output);
   }
 
   // int32 version = 3 [deprecated = true];
@@ -472,7 +456,7 @@ void GraphDef::SerializeWithCachedSizes(
   // .opencv_tensorflow.VersionDef versions = 4;
   if (this->has_versions()) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      4, *this->versions_, output);
+      4, this->_internal_versions(), output);
   }
 
   if ((_internal_metadata_.have_unknown_fields() &&  ::google::protobuf::internal::GetProto3PreserveUnknownsDefault())) {
@@ -501,7 +485,7 @@ void GraphDef::SerializeWithCachedSizes(
   if (this->has_library()) {
     target = ::google::protobuf::internal::WireFormatLite::
       InternalWriteMessageToArray(
-        2, *this->library_, deterministic, target);
+        2, this->_internal_library(), deterministic, target);
   }
 
   // int32 version = 3 [deprecated = true];
@@ -513,7 +497,7 @@ void GraphDef::SerializeWithCachedSizes(
   if (this->has_versions()) {
     target = ::google::protobuf::internal::WireFormatLite::
       InternalWriteMessageToArray(
-        4, *this->versions_, deterministic, target);
+        4, this->_internal_versions(), deterministic, target);
   }
 
   if ((_internal_metadata_.have_unknown_fields() &&  ::google::protobuf::internal::GetProto3PreserveUnknownsDefault())) {
@@ -548,14 +532,14 @@ size_t GraphDef::ByteSizeLong() const {
   if (this->has_library()) {
     total_size += 1 +
       ::google::protobuf::internal::WireFormatLite::MessageSize(
-        *this->library_);
+        *library_);
   }
 
   // .opencv_tensorflow.VersionDef versions = 4;
   if (this->has_versions()) {
     total_size += 1 +
       ::google::protobuf::internal::WireFormatLite::MessageSize(
-        *this->versions_);
+        *versions_);
   }
 
   // int32 version = 3 [deprecated = true];
@@ -566,9 +550,7 @@ size_t GraphDef::ByteSizeLong() const {
   }
 
   int cached_size = ::google::protobuf::internal::ToCachedSize(total_size);
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = cached_size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  SetCachedSize(cached_size);
   return total_size;
 }
 
@@ -645,12 +627,11 @@ void GraphDef::UnsafeArenaSwap(GraphDef* other) {
 }
 void GraphDef::InternalSwap(GraphDef* other) {
   using std::swap;
-  node_.InternalSwap(&other->node_);
+  CastToBase(&node_)->InternalSwap(CastToBase(&other->node_));
   swap(library_, other->library_);
   swap(versions_, other->versions_);
   swap(version_, other->version_);
   _internal_metadata_.Swap(&other->_internal_metadata_);
-  swap(_cached_size_, other->_cached_size_);
 }
 
 ::google::protobuf::Metadata GraphDef::GetMetadata() const {
@@ -693,9 +674,8 @@ const int NodeDef::kAttrFieldNumber;
 
 NodeDef::NodeDef()
   : ::google::protobuf::Message(), _internal_metadata_(NULL) {
-  if (GOOGLE_PREDICT_TRUE(this != internal_default_instance())) {
-    ::protobuf_graph_2eproto::InitDefaultsNodeDef();
-  }
+  ::google::protobuf::internal::InitSCC(
+      &protobuf_graph_2eproto::scc_info_NodeDef.base);
   SharedCtor();
   // @@protoc_insertion_point(constructor:opencv_tensorflow.NodeDef)
 }
@@ -704,7 +684,7 @@ NodeDef::NodeDef(::google::protobuf::Arena* arena)
   _internal_metadata_(arena),
   input_(arena),
   attr_(arena) {
-  ::protobuf_graph_2eproto::InitDefaultsNodeDef();
+  ::google::protobuf::internal::InitSCC(&protobuf_graph_2eproto::scc_info_NodeDef.base);
   SharedCtor();
   RegisterArenaDtor(arena);
   // @@protoc_insertion_point(arena_constructor:opencv_tensorflow.NodeDef)
@@ -712,8 +692,7 @@ NodeDef::NodeDef(::google::protobuf::Arena* arena)
 NodeDef::NodeDef(const NodeDef& from)
   : ::google::protobuf::Message(),
       _internal_metadata_(NULL),
-      input_(from.input_),
-      _cached_size_(0) {
+      input_(from.input_) {
   _internal_metadata_.MergeFrom(from._internal_metadata_);
   attr_.MergeFrom(from.attr_);
   name_.UnsafeSetDefault(&::google::protobuf::internal::GetEmptyStringAlreadyInited());
@@ -738,7 +717,6 @@ void NodeDef::SharedCtor() {
   name_.UnsafeSetDefault(&::google::protobuf::internal::GetEmptyStringAlreadyInited());
   op_.UnsafeSetDefault(&::google::protobuf::internal::GetEmptyStringAlreadyInited());
   device_.UnsafeSetDefault(&::google::protobuf::internal::GetEmptyStringAlreadyInited());
-  _cached_size_ = 0;
 }
 
 NodeDef::~NodeDef() {
@@ -760,9 +738,7 @@ void NodeDef::ArenaDtor(void* object) {
 void NodeDef::RegisterArenaDtor(::google::protobuf::Arena* arena) {
 }
 void NodeDef::SetCachedSize(int size) const {
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  _cached_size_.Set(size);
 }
 const ::google::protobuf::Descriptor* NodeDef::descriptor() {
   ::protobuf_graph_2eproto::protobuf_AssignDescriptorsOnce();
@@ -770,13 +746,10 @@ const ::google::protobuf::Descriptor* NodeDef::descriptor() {
 }
 
 const NodeDef& NodeDef::default_instance() {
-  ::protobuf_graph_2eproto::InitDefaultsNodeDef();
+  ::google::protobuf::internal::InitSCC(&protobuf_graph_2eproto::scc_info_NodeDef.base);
   return *internal_default_instance();
 }
 
-NodeDef* NodeDef::New(::google::protobuf::Arena* arena) const {
-  return ::google::protobuf::Arena::CreateMessage<NodeDef>(arena);
-}
 
 void NodeDef::Clear() {
 // @@protoc_insertion_point(message_clear_start:opencv_tensorflow.NodeDef)
@@ -798,7 +771,7 @@ bool NodeDef::MergePartialFromCodedStream(
   ::google::protobuf::uint32 tag;
   // @@protoc_insertion_point(parse_start:opencv_tensorflow.NodeDef)
   for (;;) {
-    ::std::pair< ::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
+    ::std::pair<::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
     tag = p.first;
     if (!p.second) goto handle_unusual;
     switch (::google::protobuf::internal::WireFormatLite::GetTagFieldNumber(tag)) {
@@ -973,7 +946,7 @@ void NodeDef::SerializeWithCachedSizes(
 
     if (output->IsSerializationDeterministic() &&
         this->attr().size() > 1) {
-      ::google::protobuf::scoped_array<SortItem> items(
+      ::std::unique_ptr<SortItem[]> items(
           new SortItem[this->attr().size()]);
       typedef ::google::protobuf::Map< ::std::string, ::opencv_tensorflow::AttrValue >::size_type size_type;
       size_type n = 0;
@@ -983,7 +956,7 @@ void NodeDef::SerializeWithCachedSizes(
         items[static_cast<ptrdiff_t>(n)] = SortItem(&*it);
       }
       ::std::sort(&items[0], &items[static_cast<ptrdiff_t>(n)], Less());
-      ::google::protobuf::scoped_ptr<NodeDef_AttrEntry_DoNotUse> entry;
+      ::std::unique_ptr<NodeDef_AttrEntry_DoNotUse> entry;
       for (size_type i = 0; i < n; i++) {
         entry.reset(attr_.NewEntryWrapper(
             items[static_cast<ptrdiff_t>(i)]->first, items[static_cast<ptrdiff_t>(i)]->second));
@@ -995,7 +968,7 @@ void NodeDef::SerializeWithCachedSizes(
         Utf8Check::Check(items[static_cast<ptrdiff_t>(i)]);
       }
     } else {
-      ::google::protobuf::scoped_ptr<NodeDef_AttrEntry_DoNotUse> entry;
+      ::std::unique_ptr<NodeDef_AttrEntry_DoNotUse> entry;
       for (::google::protobuf::Map< ::std::string, ::opencv_tensorflow::AttrValue >::const_iterator
           it = this->attr().begin();
           it != this->attr().end(); ++it) {
@@ -1085,7 +1058,7 @@ void NodeDef::SerializeWithCachedSizes(
 
     if (deterministic &&
         this->attr().size() > 1) {
-      ::google::protobuf::scoped_array<SortItem> items(
+      ::std::unique_ptr<SortItem[]> items(
           new SortItem[this->attr().size()]);
       typedef ::google::protobuf::Map< ::std::string, ::opencv_tensorflow::AttrValue >::size_type size_type;
       size_type n = 0;
@@ -1095,7 +1068,7 @@ void NodeDef::SerializeWithCachedSizes(
         items[static_cast<ptrdiff_t>(n)] = SortItem(&*it);
       }
       ::std::sort(&items[0], &items[static_cast<ptrdiff_t>(n)], Less());
-      ::google::protobuf::scoped_ptr<NodeDef_AttrEntry_DoNotUse> entry;
+      ::std::unique_ptr<NodeDef_AttrEntry_DoNotUse> entry;
       for (size_type i = 0; i < n; i++) {
         entry.reset(attr_.NewEntryWrapper(
             items[static_cast<ptrdiff_t>(i)]->first, items[static_cast<ptrdiff_t>(i)]->second));
@@ -1109,7 +1082,7 @@ void NodeDef::SerializeWithCachedSizes(
         Utf8Check::Check(items[static_cast<ptrdiff_t>(i)]);
       }
     } else {
-      ::google::protobuf::scoped_ptr<NodeDef_AttrEntry_DoNotUse> entry;
+      ::std::unique_ptr<NodeDef_AttrEntry_DoNotUse> entry;
       for (::google::protobuf::Map< ::std::string, ::opencv_tensorflow::AttrValue >::const_iterator
           it = this->attr().begin();
           it != this->attr().end(); ++it) {
@@ -1156,7 +1129,7 @@ size_t NodeDef::ByteSizeLong() const {
   total_size += 1 *
       ::google::protobuf::internal::FromIntSize(this->attr_size());
   {
-    ::google::protobuf::scoped_ptr<NodeDef_AttrEntry_DoNotUse> entry;
+    ::std::unique_ptr<NodeDef_AttrEntry_DoNotUse> entry;
     for (::google::protobuf::Map< ::std::string, ::opencv_tensorflow::AttrValue >::const_iterator
         it = this->attr().begin();
         it != this->attr().end(); ++it) {
@@ -1194,9 +1167,7 @@ size_t NodeDef::ByteSizeLong() const {
   }
 
   int cached_size = ::google::protobuf::internal::ToCachedSize(total_size);
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = cached_size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  SetCachedSize(cached_size);
   return total_size;
 }
 
@@ -1274,13 +1245,15 @@ void NodeDef::UnsafeArenaSwap(NodeDef* other) {
 }
 void NodeDef::InternalSwap(NodeDef* other) {
   using std::swap;
-  input_.InternalSwap(&other->input_);
+  input_.InternalSwap(CastToBase(&other->input_));
   attr_.Swap(&other->attr_);
-  name_.Swap(&other->name_);
-  op_.Swap(&other->op_);
-  device_.Swap(&other->device_);
+  name_.Swap(&other->name_, &::google::protobuf::internal::GetEmptyStringAlreadyInited(),
+    GetArenaNoVirtual());
+  op_.Swap(&other->op_, &::google::protobuf::internal::GetEmptyStringAlreadyInited(),
+    GetArenaNoVirtual());
+  device_.Swap(&other->device_, &::google::protobuf::internal::GetEmptyStringAlreadyInited(),
+    GetArenaNoVirtual());
   _internal_metadata_.Swap(&other->_internal_metadata_);
-  swap(_cached_size_, other->_cached_size_);
 }
 
 ::google::protobuf::Metadata NodeDef::GetMetadata() const {
@@ -1291,5 +1264,18 @@ void NodeDef::InternalSwap(NodeDef* other) {
 
 // @@protoc_insertion_point(namespace_scope)
 }  // namespace opencv_tensorflow
+namespace google {
+namespace protobuf {
+template<> GOOGLE_PROTOBUF_ATTRIBUTE_NOINLINE ::opencv_tensorflow::GraphDef* Arena::CreateMaybeMessage< ::opencv_tensorflow::GraphDef >(Arena* arena) {
+  return Arena::CreateMessageInternal< ::opencv_tensorflow::GraphDef >(arena);
+}
+template<> GOOGLE_PROTOBUF_ATTRIBUTE_NOINLINE ::opencv_tensorflow::NodeDef_AttrEntry_DoNotUse* Arena::CreateMaybeMessage< ::opencv_tensorflow::NodeDef_AttrEntry_DoNotUse >(Arena* arena) {
+  return Arena::CreateMessageInternal< ::opencv_tensorflow::NodeDef_AttrEntry_DoNotUse >(arena);
+}
+template<> GOOGLE_PROTOBUF_ATTRIBUTE_NOINLINE ::opencv_tensorflow::NodeDef* Arena::CreateMaybeMessage< ::opencv_tensorflow::NodeDef >(Arena* arena) {
+  return Arena::CreateMessageInternal< ::opencv_tensorflow::NodeDef >(arena);
+}
+}  // namespace protobuf
+}  // namespace google
 
 // @@protoc_insertion_point(global_scope)
diff --git a/modules/dnn/misc/tensorflow/graph.pb.h b/modules/dnn/misc/tensorflow/graph.pb.h
index 0f1dc80cd..77a5cd25c 100644
--- a/modules/dnn/misc/tensorflow/graph.pb.h
+++ b/modules/dnn/misc/tensorflow/graph.pb.h
@@ -1,19 +1,19 @@
 // Generated by the protocol buffer compiler.  DO NOT EDIT!
 // source: graph.proto
 
-#ifndef PROTOBUF_graph_2eproto__INCLUDED
-#define PROTOBUF_graph_2eproto__INCLUDED
+#ifndef PROTOBUF_INCLUDED_graph_2eproto
+#define PROTOBUF_INCLUDED_graph_2eproto
 
 #include <string>
 
 #include <google/protobuf/stubs/common.h>
 
-#if GOOGLE_PROTOBUF_VERSION < 3005000
+#if GOOGLE_PROTOBUF_VERSION < 3006001
 #error This file was generated by a newer version of protoc which is
 #error incompatible with your Protocol Buffer headers.  Please update
 #error your headers.
 #endif
-#if 3005001 < GOOGLE_PROTOBUF_MIN_PROTOC_VERSION
+#if 3006001 < GOOGLE_PROTOBUF_MIN_PROTOC_VERSION
 #error This file was generated by an older version of protoc which is
 #error incompatible with your Protocol Buffer headers.  Please
 #error regenerate this file with a newer version of protoc.
@@ -24,6 +24,7 @@
 #include <google/protobuf/arenastring.h>
 #include <google/protobuf/generated_message_table_driven.h>
 #include <google/protobuf/generated_message_util.h>
+#include <google/protobuf/inlined_string_field.h>
 #include <google/protobuf/metadata.h>
 #include <google/protobuf/message.h>
 #include <google/protobuf/repeated_field.h>  // IWYU pragma: export
@@ -36,6 +37,7 @@
 #include "function.pb.h"
 #include "versions.pb.h"
 // @@protoc_insertion_point(includes)
+#define PROTOBUF_INTERNAL_EXPORT_protobuf_graph_2eproto 
 
 namespace protobuf_graph_2eproto {
 // Internal implementation detail -- do not use these members.
@@ -48,17 +50,6 @@ struct TableStruct {
   static const ::google::protobuf::uint32 offsets[];
 };
 void AddDescriptors();
-void InitDefaultsGraphDefImpl();
-void InitDefaultsGraphDef();
-void InitDefaultsNodeDef_AttrEntry_DoNotUseImpl();
-void InitDefaultsNodeDef_AttrEntry_DoNotUse();
-void InitDefaultsNodeDefImpl();
-void InitDefaultsNodeDef();
-inline void InitDefaults() {
-  InitDefaultsGraphDef();
-  InitDefaultsNodeDef_AttrEntry_DoNotUse();
-  InitDefaultsNodeDef();
-}
 }  // namespace protobuf_graph_2eproto
 namespace opencv_tensorflow {
 class GraphDef;
@@ -71,6 +62,13 @@ class NodeDef_AttrEntry_DoNotUse;
 class NodeDef_AttrEntry_DoNotUseDefaultTypeInternal;
 extern NodeDef_AttrEntry_DoNotUseDefaultTypeInternal _NodeDef_AttrEntry_DoNotUse_default_instance_;
 }  // namespace opencv_tensorflow
+namespace google {
+namespace protobuf {
+template<> ::opencv_tensorflow::GraphDef* Arena::CreateMaybeMessage<::opencv_tensorflow::GraphDef>(Arena*);
+template<> ::opencv_tensorflow::NodeDef* Arena::CreateMaybeMessage<::opencv_tensorflow::NodeDef>(Arena*);
+template<> ::opencv_tensorflow::NodeDef_AttrEntry_DoNotUse* Arena::CreateMaybeMessage<::opencv_tensorflow::NodeDef_AttrEntry_DoNotUse>(Arena*);
+}  // namespace protobuf
+}  // namespace google
 namespace opencv_tensorflow {
 
 // ===================================================================
@@ -101,10 +99,10 @@ class GraphDef : public ::google::protobuf::Message /* @@protoc_insertion_point(
     return *this;
   }
   #endif
-  inline ::google::protobuf::Arena* GetArena() const PROTOBUF_FINAL {
+  inline ::google::protobuf::Arena* GetArena() const final {
     return GetArenaNoVirtual();
   }
-  inline void* GetMaybeArenaPointer() const PROTOBUF_FINAL {
+  inline void* GetMaybeArenaPointer() const final {
     return MaybeArenaPtr();
   }
   static const ::google::protobuf::Descriptor* descriptor();
@@ -115,7 +113,7 @@ class GraphDef : public ::google::protobuf::Message /* @@protoc_insertion_point(
     return reinterpret_cast<const GraphDef*>(
                &_GraphDef_default_instance_);
   }
-  static PROTOBUF_CONSTEXPR int const kIndexInFileMessages =
+  static constexpr int kIndexInFileMessages =
     0;
 
   void UnsafeArenaSwap(GraphDef* other);
@@ -126,28 +124,33 @@ class GraphDef : public ::google::protobuf::Message /* @@protoc_insertion_point(
 
   // implements Message ----------------------------------------------
 
-  inline GraphDef* New() const PROTOBUF_FINAL { return New(NULL); }
+  inline GraphDef* New() const final {
+    return CreateMaybeMessage<GraphDef>(NULL);
+  }
 
-  GraphDef* New(::google::protobuf::Arena* arena) const PROTOBUF_FINAL;
-  void CopyFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
-  void MergeFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
+  GraphDef* New(::google::protobuf::Arena* arena) const final {
+    return CreateMaybeMessage<GraphDef>(arena);
+  }
+  void CopyFrom(const ::google::protobuf::Message& from) final;
+  void MergeFrom(const ::google::protobuf::Message& from) final;
   void CopyFrom(const GraphDef& from);
   void MergeFrom(const GraphDef& from);
-  void Clear() PROTOBUF_FINAL;
-  bool IsInitialized() const PROTOBUF_FINAL;
+  void Clear() final;
+  bool IsInitialized() const final;
 
-  size_t ByteSizeLong() const PROTOBUF_FINAL;
+  size_t ByteSizeLong() const final;
   bool MergePartialFromCodedStream(
-      ::google::protobuf::io::CodedInputStream* input) PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedInputStream* input) final;
   void SerializeWithCachedSizes(
-      ::google::protobuf::io::CodedOutputStream* output) const PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedOutputStream* output) const final;
   ::google::protobuf::uint8* InternalSerializeWithCachedSizesToArray(
-      bool deterministic, ::google::protobuf::uint8* target) const PROTOBUF_FINAL;
-  int GetCachedSize() const PROTOBUF_FINAL { return _cached_size_; }
+      bool deterministic, ::google::protobuf::uint8* target) const final;
+  int GetCachedSize() const final { return _cached_size_.Get(); }
+
   private:
   void SharedCtor();
   void SharedDtor();
-  void SetCachedSize(int size) const PROTOBUF_FINAL;
+  void SetCachedSize(int size) const final;
   void InternalSwap(GraphDef* other);
   protected:
   explicit GraphDef(::google::protobuf::Arena* arena);
@@ -163,7 +166,7 @@ class GraphDef : public ::google::protobuf::Message /* @@protoc_insertion_point(
   }
   public:
 
-  ::google::protobuf::Metadata GetMetadata() const PROTOBUF_FINAL;
+  ::google::protobuf::Metadata GetMetadata() const final;
 
   // nested types ----------------------------------------------------
 
@@ -173,11 +176,11 @@ class GraphDef : public ::google::protobuf::Message /* @@protoc_insertion_point(
   int node_size() const;
   void clear_node();
   static const int kNodeFieldNumber = 1;
-  const ::opencv_tensorflow::NodeDef& node(int index) const;
   ::opencv_tensorflow::NodeDef* mutable_node(int index);
-  ::opencv_tensorflow::NodeDef* add_node();
   ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::NodeDef >*
       mutable_node();
+  const ::opencv_tensorflow::NodeDef& node(int index) const;
+  ::opencv_tensorflow::NodeDef* add_node();
   const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::NodeDef >&
       node() const;
 
@@ -186,7 +189,7 @@ class GraphDef : public ::google::protobuf::Message /* @@protoc_insertion_point(
   void clear_library();
   static const int kLibraryFieldNumber = 2;
   private:
-  void _slow_mutable_library();
+  const ::opencv_tensorflow::FunctionDefLibrary& _internal_library() const;
   public:
   const ::opencv_tensorflow::FunctionDefLibrary& library() const;
   ::opencv_tensorflow::FunctionDefLibrary* release_library();
@@ -201,7 +204,7 @@ class GraphDef : public ::google::protobuf::Message /* @@protoc_insertion_point(
   void clear_versions();
   static const int kVersionsFieldNumber = 4;
   private:
-  void _slow_mutable_versions();
+  const ::opencv_tensorflow::VersionDef& _internal_versions() const;
   public:
   const ::opencv_tensorflow::VersionDef& versions() const;
   ::opencv_tensorflow::VersionDef* release_versions();
@@ -228,19 +231,18 @@ class GraphDef : public ::google::protobuf::Message /* @@protoc_insertion_point(
   ::opencv_tensorflow::FunctionDefLibrary* library_;
   ::opencv_tensorflow::VersionDef* versions_;
   ::google::protobuf::int32 version_;
-  mutable int _cached_size_;
+  mutable ::google::protobuf::internal::CachedSize _cached_size_;
   friend struct ::protobuf_graph_2eproto::TableStruct;
-  friend void ::protobuf_graph_2eproto::InitDefaultsGraphDefImpl();
 };
 // -------------------------------------------------------------------
 
-class NodeDef_AttrEntry_DoNotUse : public ::google::protobuf::internal::MapEntry<NodeDef_AttrEntry_DoNotUse,
+class NodeDef_AttrEntry_DoNotUse : public ::google::protobuf::internal::MapEntry<NodeDef_AttrEntry_DoNotUse, 
     ::std::string, ::opencv_tensorflow::AttrValue,
     ::google::protobuf::internal::WireFormatLite::TYPE_STRING,
     ::google::protobuf::internal::WireFormatLite::TYPE_MESSAGE,
     0 > {
 public:
-  typedef ::google::protobuf::internal::MapEntry<NodeDef_AttrEntry_DoNotUse,
+  typedef ::google::protobuf::internal::MapEntry<NodeDef_AttrEntry_DoNotUse, 
     ::std::string, ::opencv_tensorflow::AttrValue,
     ::google::protobuf::internal::WireFormatLite::TYPE_STRING,
     ::google::protobuf::internal::WireFormatLite::TYPE_MESSAGE,
@@ -249,7 +251,7 @@ public:
   NodeDef_AttrEntry_DoNotUse(::google::protobuf::Arena* arena);
   void MergeFrom(const NodeDef_AttrEntry_DoNotUse& other);
   static const NodeDef_AttrEntry_DoNotUse* internal_default_instance() { return reinterpret_cast<const NodeDef_AttrEntry_DoNotUse*>(&_NodeDef_AttrEntry_DoNotUse_default_instance_); }
-  void MergeFrom(const ::google::protobuf::Message& other) PROTOBUF_FINAL;
+  void MergeFrom(const ::google::protobuf::Message& other) final;
   ::google::protobuf::Metadata GetMetadata() const;
 };
 
@@ -281,10 +283,10 @@ class NodeDef : public ::google::protobuf::Message /* @@protoc_insertion_point(c
     return *this;
   }
   #endif
-  inline ::google::protobuf::Arena* GetArena() const PROTOBUF_FINAL {
+  inline ::google::protobuf::Arena* GetArena() const final {
     return GetArenaNoVirtual();
   }
-  inline void* GetMaybeArenaPointer() const PROTOBUF_FINAL {
+  inline void* GetMaybeArenaPointer() const final {
     return MaybeArenaPtr();
   }
   static const ::google::protobuf::Descriptor* descriptor();
@@ -295,7 +297,7 @@ class NodeDef : public ::google::protobuf::Message /* @@protoc_insertion_point(c
     return reinterpret_cast<const NodeDef*>(
                &_NodeDef_default_instance_);
   }
-  static PROTOBUF_CONSTEXPR int const kIndexInFileMessages =
+  static constexpr int kIndexInFileMessages =
     2;
 
   void UnsafeArenaSwap(NodeDef* other);
@@ -306,28 +308,33 @@ class NodeDef : public ::google::protobuf::Message /* @@protoc_insertion_point(c
 
   // implements Message ----------------------------------------------
 
-  inline NodeDef* New() const PROTOBUF_FINAL { return New(NULL); }
+  inline NodeDef* New() const final {
+    return CreateMaybeMessage<NodeDef>(NULL);
+  }
 
-  NodeDef* New(::google::protobuf::Arena* arena) const PROTOBUF_FINAL;
-  void CopyFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
-  void MergeFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
+  NodeDef* New(::google::protobuf::Arena* arena) const final {
+    return CreateMaybeMessage<NodeDef>(arena);
+  }
+  void CopyFrom(const ::google::protobuf::Message& from) final;
+  void MergeFrom(const ::google::protobuf::Message& from) final;
   void CopyFrom(const NodeDef& from);
   void MergeFrom(const NodeDef& from);
-  void Clear() PROTOBUF_FINAL;
-  bool IsInitialized() const PROTOBUF_FINAL;
+  void Clear() final;
+  bool IsInitialized() const final;
 
-  size_t ByteSizeLong() const PROTOBUF_FINAL;
+  size_t ByteSizeLong() const final;
   bool MergePartialFromCodedStream(
-      ::google::protobuf::io::CodedInputStream* input) PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedInputStream* input) final;
   void SerializeWithCachedSizes(
-      ::google::protobuf::io::CodedOutputStream* output) const PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedOutputStream* output) const final;
   ::google::protobuf::uint8* InternalSerializeWithCachedSizesToArray(
-      bool deterministic, ::google::protobuf::uint8* target) const PROTOBUF_FINAL;
-  int GetCachedSize() const PROTOBUF_FINAL { return _cached_size_; }
+      bool deterministic, ::google::protobuf::uint8* target) const final;
+  int GetCachedSize() const final { return _cached_size_.Get(); }
+
   private:
   void SharedCtor();
   void SharedDtor();
-  void SetCachedSize(int size) const PROTOBUF_FINAL;
+  void SetCachedSize(int size) const final;
   void InternalSwap(NodeDef* other);
   protected:
   explicit NodeDef(::google::protobuf::Arena* arena);
@@ -343,7 +350,7 @@ class NodeDef : public ::google::protobuf::Message /* @@protoc_insertion_point(c
   }
   public:
 
-  ::google::protobuf::Metadata GetMetadata() const PROTOBUF_FINAL;
+  ::google::protobuf::Metadata GetMetadata() const final;
 
   // nested types ----------------------------------------------------
 
@@ -467,9 +474,8 @@ class NodeDef : public ::google::protobuf::Message /* @@protoc_insertion_point(c
   ::google::protobuf::internal::ArenaStringPtr name_;
   ::google::protobuf::internal::ArenaStringPtr op_;
   ::google::protobuf::internal::ArenaStringPtr device_;
-  mutable int _cached_size_;
+  mutable ::google::protobuf::internal::CachedSize _cached_size_;
   friend struct ::protobuf_graph_2eproto::TableStruct;
-  friend void ::protobuf_graph_2eproto::InitDefaultsNodeDefImpl();
 };
 // ===================================================================
 
@@ -489,23 +495,23 @@ inline int GraphDef::node_size() const {
 inline void GraphDef::clear_node() {
   node_.Clear();
 }
-inline const ::opencv_tensorflow::NodeDef& GraphDef::node(int index) const {
-  // @@protoc_insertion_point(field_get:opencv_tensorflow.GraphDef.node)
-  return node_.Get(index);
-}
 inline ::opencv_tensorflow::NodeDef* GraphDef::mutable_node(int index) {
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.GraphDef.node)
   return node_.Mutable(index);
 }
-inline ::opencv_tensorflow::NodeDef* GraphDef::add_node() {
-  // @@protoc_insertion_point(field_add:opencv_tensorflow.GraphDef.node)
-  return node_.Add();
-}
 inline ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::NodeDef >*
 GraphDef::mutable_node() {
   // @@protoc_insertion_point(field_mutable_list:opencv_tensorflow.GraphDef.node)
   return &node_;
 }
+inline const ::opencv_tensorflow::NodeDef& GraphDef::node(int index) const {
+  // @@protoc_insertion_point(field_get:opencv_tensorflow.GraphDef.node)
+  return node_.Get(index);
+}
+inline ::opencv_tensorflow::NodeDef* GraphDef::add_node() {
+  // @@protoc_insertion_point(field_add:opencv_tensorflow.GraphDef.node)
+  return node_.Add();
+}
 inline const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::NodeDef >&
 GraphDef::node() const {
   // @@protoc_insertion_point(field_list:opencv_tensorflow.GraphDef.node)
@@ -516,6 +522,9 @@ GraphDef::node() const {
 inline bool GraphDef::has_versions() const {
   return this != internal_default_instance() && versions_ != NULL;
 }
+inline const ::opencv_tensorflow::VersionDef& GraphDef::_internal_versions() const {
+  return *versions_;
+}
 inline const ::opencv_tensorflow::VersionDef& GraphDef::versions() const {
   const ::opencv_tensorflow::VersionDef* p = versions_;
   // @@protoc_insertion_point(field_get:opencv_tensorflow.GraphDef.versions)
@@ -524,25 +533,26 @@ inline const ::opencv_tensorflow::VersionDef& GraphDef::versions() const {
 }
 inline ::opencv_tensorflow::VersionDef* GraphDef::release_versions() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.GraphDef.versions)
-
+  
   ::opencv_tensorflow::VersionDef* temp = versions_;
   if (GetArenaNoVirtual() != NULL) {
-    temp = ::google::protobuf::internal::DuplicateIfNonNull(temp, NULL);
+    temp = ::google::protobuf::internal::DuplicateIfNonNull(temp);
   }
   versions_ = NULL;
   return temp;
 }
 inline ::opencv_tensorflow::VersionDef* GraphDef::unsafe_arena_release_versions() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.GraphDef.versions)
-
+  
   ::opencv_tensorflow::VersionDef* temp = versions_;
   versions_ = NULL;
   return temp;
 }
 inline ::opencv_tensorflow::VersionDef* GraphDef::mutable_versions() {
-
+  
   if (versions_ == NULL) {
-    _slow_mutable_versions();
+    auto* p = CreateMaybeMessage<::opencv_tensorflow::VersionDef>(GetArenaNoVirtual());
+    versions_ = p;
   }
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.GraphDef.versions)
   return versions_;
@@ -554,14 +564,14 @@ inline void GraphDef::set_allocated_versions(::opencv_tensorflow::VersionDef* ve
   }
   if (versions) {
     ::google::protobuf::Arena* submessage_arena =
-      reinterpret_cast< ::google::protobuf::MessageLite*>(versions)->GetArena();
+      reinterpret_cast<::google::protobuf::MessageLite*>(versions)->GetArena();
     if (message_arena != submessage_arena) {
       versions = ::google::protobuf::internal::GetOwnedMessage(
           message_arena, versions, submessage_arena);
     }
-
+    
   } else {
-
+    
   }
   versions_ = versions;
   // @@protoc_insertion_point(field_set_allocated:opencv_tensorflow.GraphDef.versions)
@@ -576,7 +586,7 @@ inline ::google::protobuf::int32 GraphDef::version() const {
   return version_;
 }
 inline void GraphDef::set_version(::google::protobuf::int32 value) {
-
+  
   version_ = value;
   // @@protoc_insertion_point(field_set:opencv_tensorflow.GraphDef.version)
 }
@@ -585,6 +595,9 @@ inline void GraphDef::set_version(::google::protobuf::int32 value) {
 inline bool GraphDef::has_library() const {
   return this != internal_default_instance() && library_ != NULL;
 }
+inline const ::opencv_tensorflow::FunctionDefLibrary& GraphDef::_internal_library() const {
+  return *library_;
+}
 inline const ::opencv_tensorflow::FunctionDefLibrary& GraphDef::library() const {
   const ::opencv_tensorflow::FunctionDefLibrary* p = library_;
   // @@protoc_insertion_point(field_get:opencv_tensorflow.GraphDef.library)
@@ -593,25 +606,26 @@ inline const ::opencv_tensorflow::FunctionDefLibrary& GraphDef::library() const
 }
 inline ::opencv_tensorflow::FunctionDefLibrary* GraphDef::release_library() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.GraphDef.library)
-
+  
   ::opencv_tensorflow::FunctionDefLibrary* temp = library_;
   if (GetArenaNoVirtual() != NULL) {
-    temp = ::google::protobuf::internal::DuplicateIfNonNull(temp, NULL);
+    temp = ::google::protobuf::internal::DuplicateIfNonNull(temp);
   }
   library_ = NULL;
   return temp;
 }
 inline ::opencv_tensorflow::FunctionDefLibrary* GraphDef::unsafe_arena_release_library() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.GraphDef.library)
-
+  
   ::opencv_tensorflow::FunctionDefLibrary* temp = library_;
   library_ = NULL;
   return temp;
 }
 inline ::opencv_tensorflow::FunctionDefLibrary* GraphDef::mutable_library() {
-
+  
   if (library_ == NULL) {
-    _slow_mutable_library();
+    auto* p = CreateMaybeMessage<::opencv_tensorflow::FunctionDefLibrary>(GetArenaNoVirtual());
+    library_ = p;
   }
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.GraphDef.library)
   return library_;
@@ -623,14 +637,14 @@ inline void GraphDef::set_allocated_library(::opencv_tensorflow::FunctionDefLibr
   }
   if (library) {
     ::google::protobuf::Arena* submessage_arena =
-      reinterpret_cast< ::google::protobuf::MessageLite*>(library)->GetArena();
+      reinterpret_cast<::google::protobuf::MessageLite*>(library)->GetArena();
     if (message_arena != submessage_arena) {
       library = ::google::protobuf::internal::GetOwnedMessage(
           message_arena, library, submessage_arena);
     }
-
+    
   } else {
-
+    
   }
   library_ = library;
   // @@protoc_insertion_point(field_set_allocated:opencv_tensorflow.GraphDef.library)
@@ -651,13 +665,13 @@ inline const ::std::string& NodeDef::name() const {
   return name_.Get();
 }
 inline void NodeDef::set_name(const ::std::string& value) {
-
+  
   name_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), value, GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set:opencv_tensorflow.NodeDef.name)
 }
 #if LANG_CXX11
 inline void NodeDef::set_name(::std::string&& value) {
-
+  
   name_.Set(
     &::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::move(value), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_rvalue:opencv_tensorflow.NodeDef.name)
@@ -665,33 +679,33 @@ inline void NodeDef::set_name(::std::string&& value) {
 #endif
 inline void NodeDef::set_name(const char* value) {
   GOOGLE_DCHECK(value != NULL);
-
+  
   name_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(value),
               GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_char:opencv_tensorflow.NodeDef.name)
 }
 inline void NodeDef::set_name(const char* value,
     size_t size) {
-
+  
   name_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(
       reinterpret_cast<const char*>(value), size), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_pointer:opencv_tensorflow.NodeDef.name)
 }
 inline ::std::string* NodeDef::mutable_name() {
-
+  
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.NodeDef.name)
   return name_.Mutable(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline ::std::string* NodeDef::release_name() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.NodeDef.name)
-
+  
   return name_.Release(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline void NodeDef::set_allocated_name(::std::string* name) {
   if (name != NULL) {
-
+    
   } else {
-
+    
   }
   name_.SetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), name,
       GetArenaNoVirtual());
@@ -700,7 +714,7 @@ inline void NodeDef::set_allocated_name(::std::string* name) {
 inline ::std::string* NodeDef::unsafe_arena_release_name() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.NodeDef.name)
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
-
+  
   return name_.UnsafeArenaRelease(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       GetArenaNoVirtual());
 }
@@ -708,9 +722,9 @@ inline void NodeDef::unsafe_arena_set_allocated_name(
     ::std::string* name) {
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
   if (name != NULL) {
-
+    
   } else {
-
+    
   }
   name_.UnsafeArenaSetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       name, GetArenaNoVirtual());
@@ -726,13 +740,13 @@ inline const ::std::string& NodeDef::op() const {
   return op_.Get();
 }
 inline void NodeDef::set_op(const ::std::string& value) {
-
+  
   op_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), value, GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set:opencv_tensorflow.NodeDef.op)
 }
 #if LANG_CXX11
 inline void NodeDef::set_op(::std::string&& value) {
-
+  
   op_.Set(
     &::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::move(value), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_rvalue:opencv_tensorflow.NodeDef.op)
@@ -740,33 +754,33 @@ inline void NodeDef::set_op(::std::string&& value) {
 #endif
 inline void NodeDef::set_op(const char* value) {
   GOOGLE_DCHECK(value != NULL);
-
+  
   op_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(value),
               GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_char:opencv_tensorflow.NodeDef.op)
 }
 inline void NodeDef::set_op(const char* value,
     size_t size) {
-
+  
   op_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(
       reinterpret_cast<const char*>(value), size), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_pointer:opencv_tensorflow.NodeDef.op)
 }
 inline ::std::string* NodeDef::mutable_op() {
-
+  
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.NodeDef.op)
   return op_.Mutable(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline ::std::string* NodeDef::release_op() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.NodeDef.op)
-
+  
   return op_.Release(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline void NodeDef::set_allocated_op(::std::string* op) {
   if (op != NULL) {
-
+    
   } else {
-
+    
   }
   op_.SetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), op,
       GetArenaNoVirtual());
@@ -775,7 +789,7 @@ inline void NodeDef::set_allocated_op(::std::string* op) {
 inline ::std::string* NodeDef::unsafe_arena_release_op() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.NodeDef.op)
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
-
+  
   return op_.UnsafeArenaRelease(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       GetArenaNoVirtual());
 }
@@ -783,9 +797,9 @@ inline void NodeDef::unsafe_arena_set_allocated_op(
     ::std::string* op) {
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
   if (op != NULL) {
-
+    
   } else {
-
+    
   }
   op_.UnsafeArenaSetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       op, GetArenaNoVirtual());
@@ -870,13 +884,13 @@ inline const ::std::string& NodeDef::device() const {
   return device_.Get();
 }
 inline void NodeDef::set_device(const ::std::string& value) {
-
+  
   device_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), value, GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set:opencv_tensorflow.NodeDef.device)
 }
 #if LANG_CXX11
 inline void NodeDef::set_device(::std::string&& value) {
-
+  
   device_.Set(
     &::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::move(value), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_rvalue:opencv_tensorflow.NodeDef.device)
@@ -884,33 +898,33 @@ inline void NodeDef::set_device(::std::string&& value) {
 #endif
 inline void NodeDef::set_device(const char* value) {
   GOOGLE_DCHECK(value != NULL);
-
+  
   device_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(value),
               GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_char:opencv_tensorflow.NodeDef.device)
 }
 inline void NodeDef::set_device(const char* value,
     size_t size) {
-
+  
   device_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(
       reinterpret_cast<const char*>(value), size), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_pointer:opencv_tensorflow.NodeDef.device)
 }
 inline ::std::string* NodeDef::mutable_device() {
-
+  
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.NodeDef.device)
   return device_.Mutable(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline ::std::string* NodeDef::release_device() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.NodeDef.device)
-
+  
   return device_.Release(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline void NodeDef::set_allocated_device(::std::string* device) {
   if (device != NULL) {
-
+    
   } else {
-
+    
   }
   device_.SetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), device,
       GetArenaNoVirtual());
@@ -919,7 +933,7 @@ inline void NodeDef::set_allocated_device(::std::string* device) {
 inline ::std::string* NodeDef::unsafe_arena_release_device() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.NodeDef.device)
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
-
+  
   return device_.UnsafeArenaRelease(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       GetArenaNoVirtual());
 }
@@ -927,9 +941,9 @@ inline void NodeDef::unsafe_arena_set_allocated_device(
     ::std::string* device) {
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
   if (device != NULL) {
-
+    
   } else {
-
+    
   }
   device_.UnsafeArenaSetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       device, GetArenaNoVirtual());
@@ -965,4 +979,4 @@ NodeDef::mutable_attr() {
 
 // @@protoc_insertion_point(global_scope)
 
-#endif  // PROTOBUF_graph_2eproto__INCLUDED
+#endif  // PROTOBUF_INCLUDED_graph_2eproto
diff --git a/modules/dnn/misc/tensorflow/op_def.pb.cc b/modules/dnn/misc/tensorflow/op_def.pb.cc
index 7ffd40a67..b7478ff73 100644
--- a/modules/dnn/misc/tensorflow/op_def.pb.cc
+++ b/modules/dnn/misc/tensorflow/op_def.pb.cc
@@ -7,7 +7,6 @@
 
 #include <google/protobuf/stubs/common.h>
 #include <google/protobuf/stubs/port.h>
-#include <google/protobuf/stubs/once.h>
 #include <google/protobuf/io/coded_stream.h>
 #include <google/protobuf/wire_format_lite_inl.h>
 #include <google/protobuf/descriptor.h>
@@ -19,6 +18,16 @@
 #include "third_party/protobuf/version.h"
 #endif
 // @@protoc_insertion_point(includes)
+
+namespace protobuf_attr_5fvalue_2eproto {
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_attr_5fvalue_2eproto ::google::protobuf::internal::SCCInfo<3> scc_info_AttrValue;
+}  // namespace protobuf_attr_5fvalue_2eproto
+namespace protobuf_op_5fdef_2eproto {
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_op_5fdef_2eproto ::google::protobuf::internal::SCCInfo<0> scc_info_OpDef_ArgDef;
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_op_5fdef_2eproto ::google::protobuf::internal::SCCInfo<0> scc_info_OpDeprecation;
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_op_5fdef_2eproto ::google::protobuf::internal::SCCInfo<1> scc_info_OpDef_AttrDef;
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_op_5fdef_2eproto ::google::protobuf::internal::SCCInfo<3> scc_info_OpDef;
+}  // namespace protobuf_op_5fdef_2eproto
 namespace opencv_tensorflow {
 class OpDef_ArgDefDefaultTypeInternal {
  public:
@@ -47,14 +56,9 @@ class OpListDefaultTypeInternal {
 } _OpList_default_instance_;
 }  // namespace opencv_tensorflow
 namespace protobuf_op_5fdef_2eproto {
-void InitDefaultsOpDef_ArgDefImpl() {
+static void InitDefaultsOpDef_ArgDef() {
   GOOGLE_PROTOBUF_VERIFY_VERSION;
 
-#ifdef GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  ::google::protobuf::internal::InitProtobufDefaultsForceUnique();
-#else
-  ::google::protobuf::internal::InitProtobufDefaults();
-#endif  // GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
   {
     void* ptr = &::opencv_tensorflow::_OpDef_ArgDef_default_instance_;
     new (ptr) ::opencv_tensorflow::OpDef_ArgDef();
@@ -63,20 +67,12 @@ void InitDefaultsOpDef_ArgDefImpl() {
   ::opencv_tensorflow::OpDef_ArgDef::InitAsDefaultInstance();
 }
 
-void InitDefaultsOpDef_ArgDef() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &InitDefaultsOpDef_ArgDefImpl);
-}
+::google::protobuf::internal::SCCInfo<0> scc_info_OpDef_ArgDef =
+    {{ATOMIC_VAR_INIT(::google::protobuf::internal::SCCInfoBase::kUninitialized), 0, InitDefaultsOpDef_ArgDef}, {}};
 
-void InitDefaultsOpDef_AttrDefImpl() {
+static void InitDefaultsOpDef_AttrDef() {
   GOOGLE_PROTOBUF_VERIFY_VERSION;
 
-#ifdef GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  ::google::protobuf::internal::InitProtobufDefaultsForceUnique();
-#else
-  ::google::protobuf::internal::InitProtobufDefaults();
-#endif  // GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  protobuf_attr_5fvalue_2eproto::InitDefaultsAttrValue();
   {
     void* ptr = &::opencv_tensorflow::_OpDef_AttrDef_default_instance_;
     new (ptr) ::opencv_tensorflow::OpDef_AttrDef();
@@ -85,22 +81,13 @@ void InitDefaultsOpDef_AttrDefImpl() {
   ::opencv_tensorflow::OpDef_AttrDef::InitAsDefaultInstance();
 }
 
-void InitDefaultsOpDef_AttrDef() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &InitDefaultsOpDef_AttrDefImpl);
-}
+::google::protobuf::internal::SCCInfo<1> scc_info_OpDef_AttrDef =
+    {{ATOMIC_VAR_INIT(::google::protobuf::internal::SCCInfoBase::kUninitialized), 1, InitDefaultsOpDef_AttrDef}, {
+      &protobuf_attr_5fvalue_2eproto::scc_info_AttrValue.base,}};
 
-void InitDefaultsOpDefImpl() {
+static void InitDefaultsOpDef() {
   GOOGLE_PROTOBUF_VERIFY_VERSION;
 
-#ifdef GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  ::google::protobuf::internal::InitProtobufDefaultsForceUnique();
-#else
-  ::google::protobuf::internal::InitProtobufDefaults();
-#endif  // GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  protobuf_op_5fdef_2eproto::InitDefaultsOpDef_ArgDef();
-  protobuf_op_5fdef_2eproto::InitDefaultsOpDef_AttrDef();
-  protobuf_op_5fdef_2eproto::InitDefaultsOpDeprecation();
   {
     void* ptr = &::opencv_tensorflow::_OpDef_default_instance_;
     new (ptr) ::opencv_tensorflow::OpDef();
@@ -109,19 +96,15 @@ void InitDefaultsOpDefImpl() {
   ::opencv_tensorflow::OpDef::InitAsDefaultInstance();
 }
 
-void InitDefaultsOpDef() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &InitDefaultsOpDefImpl);
-}
+::google::protobuf::internal::SCCInfo<3> scc_info_OpDef =
+    {{ATOMIC_VAR_INIT(::google::protobuf::internal::SCCInfoBase::kUninitialized), 3, InitDefaultsOpDef}, {
+      &protobuf_op_5fdef_2eproto::scc_info_OpDef_ArgDef.base,
+      &protobuf_op_5fdef_2eproto::scc_info_OpDef_AttrDef.base,
+      &protobuf_op_5fdef_2eproto::scc_info_OpDeprecation.base,}};
 
-void InitDefaultsOpDeprecationImpl() {
+static void InitDefaultsOpDeprecation() {
   GOOGLE_PROTOBUF_VERIFY_VERSION;
 
-#ifdef GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  ::google::protobuf::internal::InitProtobufDefaultsForceUnique();
-#else
-  ::google::protobuf::internal::InitProtobufDefaults();
-#endif  // GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
   {
     void* ptr = &::opencv_tensorflow::_OpDeprecation_default_instance_;
     new (ptr) ::opencv_tensorflow::OpDeprecation();
@@ -130,20 +113,12 @@ void InitDefaultsOpDeprecationImpl() {
   ::opencv_tensorflow::OpDeprecation::InitAsDefaultInstance();
 }
 
-void InitDefaultsOpDeprecation() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &InitDefaultsOpDeprecationImpl);
-}
+::google::protobuf::internal::SCCInfo<0> scc_info_OpDeprecation =
+    {{ATOMIC_VAR_INIT(::google::protobuf::internal::SCCInfoBase::kUninitialized), 0, InitDefaultsOpDeprecation}, {}};
 
-void InitDefaultsOpListImpl() {
+static void InitDefaultsOpList() {
   GOOGLE_PROTOBUF_VERIFY_VERSION;
 
-#ifdef GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  ::google::protobuf::internal::InitProtobufDefaultsForceUnique();
-#else
-  ::google::protobuf::internal::InitProtobufDefaults();
-#endif  // GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  protobuf_op_5fdef_2eproto::InitDefaultsOpDef();
   {
     void* ptr = &::opencv_tensorflow::_OpList_default_instance_;
     new (ptr) ::opencv_tensorflow::OpList();
@@ -152,9 +127,16 @@ void InitDefaultsOpListImpl() {
   ::opencv_tensorflow::OpList::InitAsDefaultInstance();
 }
 
-void InitDefaultsOpList() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &InitDefaultsOpListImpl);
+::google::protobuf::internal::SCCInfo<1> scc_info_OpList =
+    {{ATOMIC_VAR_INIT(::google::protobuf::internal::SCCInfoBase::kUninitialized), 1, InitDefaultsOpList}, {
+      &protobuf_op_5fdef_2eproto::scc_info_OpDef.base,}};
+
+void InitDefaults() {
+  ::google::protobuf::internal::InitSCC(&scc_info_OpDef_ArgDef.base);
+  ::google::protobuf::internal::InitSCC(&scc_info_OpDef_AttrDef.base);
+  ::google::protobuf::internal::InitSCC(&scc_info_OpDef.base);
+  ::google::protobuf::internal::InitSCC(&scc_info_OpDeprecation.base);
+  ::google::protobuf::internal::InitSCC(&scc_info_OpList.base);
 }
 
 ::google::protobuf::Metadata file_level_metadata[5];
@@ -232,15 +214,14 @@ static ::google::protobuf::Message const * const file_default_instances[] = {
 
 void protobuf_AssignDescriptors() {
   AddDescriptors();
-  ::google::protobuf::MessageFactory* factory = NULL;
   AssignDescriptors(
-      "op_def.proto", schemas, file_default_instances, TableStruct::offsets, factory,
+      "op_def.proto", schemas, file_default_instances, TableStruct::offsets,
       file_level_metadata, NULL, NULL);
 }
 
 void protobuf_AssignDescriptorsOnce() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &protobuf_AssignDescriptors);
+  static ::google::protobuf::internal::once_flag once;
+  ::google::protobuf::internal::call_once(once, protobuf_AssignDescriptors);
 }
 
 void protobuf_RegisterTypes(const ::std::string&) GOOGLE_PROTOBUF_ATTRIBUTE_COLD;
@@ -287,8 +268,8 @@ void AddDescriptorsImpl() {
 }
 
 void AddDescriptors() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &AddDescriptorsImpl);
+  static ::google::protobuf::internal::once_flag once;
+  ::google::protobuf::internal::call_once(once, AddDescriptorsImpl);
 }
 // Force AddDescriptors() to be called at dynamic initialization time.
 struct StaticDescriptorInitializer {
@@ -315,24 +296,22 @@ const int OpDef_ArgDef::kIsRefFieldNumber;
 
 OpDef_ArgDef::OpDef_ArgDef()
   : ::google::protobuf::Message(), _internal_metadata_(NULL) {
-  if (GOOGLE_PREDICT_TRUE(this != internal_default_instance())) {
-    ::protobuf_op_5fdef_2eproto::InitDefaultsOpDef_ArgDef();
-  }
+  ::google::protobuf::internal::InitSCC(
+      &protobuf_op_5fdef_2eproto::scc_info_OpDef_ArgDef.base);
   SharedCtor();
   // @@protoc_insertion_point(constructor:opencv_tensorflow.OpDef.ArgDef)
 }
 OpDef_ArgDef::OpDef_ArgDef(::google::protobuf::Arena* arena)
   : ::google::protobuf::Message(),
   _internal_metadata_(arena) {
-  ::protobuf_op_5fdef_2eproto::InitDefaultsOpDef_ArgDef();
+  ::google::protobuf::internal::InitSCC(&protobuf_op_5fdef_2eproto::scc_info_OpDef_ArgDef.base);
   SharedCtor();
   RegisterArenaDtor(arena);
   // @@protoc_insertion_point(arena_constructor:opencv_tensorflow.OpDef.ArgDef)
 }
 OpDef_ArgDef::OpDef_ArgDef(const OpDef_ArgDef& from)
   : ::google::protobuf::Message(),
-      _internal_metadata_(NULL),
-      _cached_size_(0) {
+      _internal_metadata_(NULL) {
   _internal_metadata_.MergeFrom(from._internal_metadata_);
   name_.UnsafeSetDefault(&::google::protobuf::internal::GetEmptyStringAlreadyInited());
   if (from.name().size() > 0) {
@@ -374,7 +353,6 @@ void OpDef_ArgDef::SharedCtor() {
   ::memset(&type_, 0, static_cast<size_t>(
       reinterpret_cast<char*>(&is_ref_) -
       reinterpret_cast<char*>(&type_)) + sizeof(is_ref_));
-  _cached_size_ = 0;
 }
 
 OpDef_ArgDef::~OpDef_ArgDef() {
@@ -398,9 +376,7 @@ void OpDef_ArgDef::ArenaDtor(void* object) {
 void OpDef_ArgDef::RegisterArenaDtor(::google::protobuf::Arena* arena) {
 }
 void OpDef_ArgDef::SetCachedSize(int size) const {
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  _cached_size_.Set(size);
 }
 const ::google::protobuf::Descriptor* OpDef_ArgDef::descriptor() {
   ::protobuf_op_5fdef_2eproto::protobuf_AssignDescriptorsOnce();
@@ -408,13 +384,10 @@ const ::google::protobuf::Descriptor* OpDef_ArgDef::descriptor() {
 }
 
 const OpDef_ArgDef& OpDef_ArgDef::default_instance() {
-  ::protobuf_op_5fdef_2eproto::InitDefaultsOpDef_ArgDef();
+  ::google::protobuf::internal::InitSCC(&protobuf_op_5fdef_2eproto::scc_info_OpDef_ArgDef.base);
   return *internal_default_instance();
 }
 
-OpDef_ArgDef* OpDef_ArgDef::New(::google::protobuf::Arena* arena) const {
-  return ::google::protobuf::Arena::CreateMessage<OpDef_ArgDef>(arena);
-}
 
 void OpDef_ArgDef::Clear() {
 // @@protoc_insertion_point(message_clear_start:opencv_tensorflow.OpDef.ArgDef)
@@ -439,7 +412,7 @@ bool OpDef_ArgDef::MergePartialFromCodedStream(
   ::google::protobuf::uint32 tag;
   // @@protoc_insertion_point(parse_start:opencv_tensorflow.OpDef.ArgDef)
   for (;;) {
-    ::std::pair< ::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(16383u);
+    ::std::pair<::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(16383u);
     tag = p.first;
     if (!p.second) goto handle_unusual;
     switch (::google::protobuf::internal::WireFormatLite::GetTagFieldNumber(tag)) {
@@ -783,9 +756,7 @@ size_t OpDef_ArgDef::ByteSizeLong() const {
   }
 
   int cached_size = ::google::protobuf::internal::ToCachedSize(total_size);
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = cached_size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  SetCachedSize(cached_size);
   return total_size;
 }
 
@@ -873,15 +844,19 @@ void OpDef_ArgDef::UnsafeArenaSwap(OpDef_ArgDef* other) {
 }
 void OpDef_ArgDef::InternalSwap(OpDef_ArgDef* other) {
   using std::swap;
-  name_.Swap(&other->name_);
-  description_.Swap(&other->description_);
-  type_attr_.Swap(&other->type_attr_);
-  number_attr_.Swap(&other->number_attr_);
-  type_list_attr_.Swap(&other->type_list_attr_);
+  name_.Swap(&other->name_, &::google::protobuf::internal::GetEmptyStringAlreadyInited(),
+    GetArenaNoVirtual());
+  description_.Swap(&other->description_, &::google::protobuf::internal::GetEmptyStringAlreadyInited(),
+    GetArenaNoVirtual());
+  type_attr_.Swap(&other->type_attr_, &::google::protobuf::internal::GetEmptyStringAlreadyInited(),
+    GetArenaNoVirtual());
+  number_attr_.Swap(&other->number_attr_, &::google::protobuf::internal::GetEmptyStringAlreadyInited(),
+    GetArenaNoVirtual());
+  type_list_attr_.Swap(&other->type_list_attr_, &::google::protobuf::internal::GetEmptyStringAlreadyInited(),
+    GetArenaNoVirtual());
   swap(type_, other->type_);
   swap(is_ref_, other->is_ref_);
   _internal_metadata_.Swap(&other->_internal_metadata_);
-  swap(_cached_size_, other->_cached_size_);
 }
 
 ::google::protobuf::Metadata OpDef_ArgDef::GetMetadata() const {
@@ -898,10 +873,6 @@ void OpDef_AttrDef::InitAsDefaultInstance() {
   ::opencv_tensorflow::_OpDef_AttrDef_default_instance_._instance.get_mutable()->allowed_values_ = const_cast< ::opencv_tensorflow::AttrValue*>(
       ::opencv_tensorflow::AttrValue::internal_default_instance());
 }
-void OpDef_AttrDef::_slow_mutable_default_value() {
-  default_value_ = ::google::protobuf::Arena::CreateMessage< ::opencv_tensorflow::AttrValue >(
-      GetArenaNoVirtual());
-}
 void OpDef_AttrDef::unsafe_arena_set_allocated_default_value(
     ::opencv_tensorflow::AttrValue* default_value) {
   if (GetArenaNoVirtual() == NULL) {
@@ -909,9 +880,9 @@ void OpDef_AttrDef::unsafe_arena_set_allocated_default_value(
   }
   default_value_ = default_value;
   if (default_value) {
-
+    
   } else {
-
+    
   }
   // @@protoc_insertion_point(field_unsafe_arena_set_allocated:opencv_tensorflow.OpDef.AttrDef.default_value)
 }
@@ -921,10 +892,6 @@ void OpDef_AttrDef::clear_default_value() {
   }
   default_value_ = NULL;
 }
-void OpDef_AttrDef::_slow_mutable_allowed_values() {
-  allowed_values_ = ::google::protobuf::Arena::CreateMessage< ::opencv_tensorflow::AttrValue >(
-      GetArenaNoVirtual());
-}
 void OpDef_AttrDef::unsafe_arena_set_allocated_allowed_values(
     ::opencv_tensorflow::AttrValue* allowed_values) {
   if (GetArenaNoVirtual() == NULL) {
@@ -932,9 +899,9 @@ void OpDef_AttrDef::unsafe_arena_set_allocated_allowed_values(
   }
   allowed_values_ = allowed_values;
   if (allowed_values) {
-
+    
   } else {
-
+    
   }
   // @@protoc_insertion_point(field_unsafe_arena_set_allocated:opencv_tensorflow.OpDef.AttrDef.allowed_values)
 }
@@ -956,24 +923,22 @@ const int OpDef_AttrDef::kAllowedValuesFieldNumber;
 
 OpDef_AttrDef::OpDef_AttrDef()
   : ::google::protobuf::Message(), _internal_metadata_(NULL) {
-  if (GOOGLE_PREDICT_TRUE(this != internal_default_instance())) {
-    ::protobuf_op_5fdef_2eproto::InitDefaultsOpDef_AttrDef();
-  }
+  ::google::protobuf::internal::InitSCC(
+      &protobuf_op_5fdef_2eproto::scc_info_OpDef_AttrDef.base);
   SharedCtor();
   // @@protoc_insertion_point(constructor:opencv_tensorflow.OpDef.AttrDef)
 }
 OpDef_AttrDef::OpDef_AttrDef(::google::protobuf::Arena* arena)
   : ::google::protobuf::Message(),
   _internal_metadata_(arena) {
-  ::protobuf_op_5fdef_2eproto::InitDefaultsOpDef_AttrDef();
+  ::google::protobuf::internal::InitSCC(&protobuf_op_5fdef_2eproto::scc_info_OpDef_AttrDef.base);
   SharedCtor();
   RegisterArenaDtor(arena);
   // @@protoc_insertion_point(arena_constructor:opencv_tensorflow.OpDef.AttrDef)
 }
 OpDef_AttrDef::OpDef_AttrDef(const OpDef_AttrDef& from)
   : ::google::protobuf::Message(),
-      _internal_metadata_(NULL),
-      _cached_size_(0) {
+      _internal_metadata_(NULL) {
   _internal_metadata_.MergeFrom(from._internal_metadata_);
   name_.UnsafeSetDefault(&::google::protobuf::internal::GetEmptyStringAlreadyInited());
   if (from.name().size() > 0) {
@@ -1013,7 +978,6 @@ void OpDef_AttrDef::SharedCtor() {
   ::memset(&default_value_, 0, static_cast<size_t>(
       reinterpret_cast<char*>(&has_minimum_) -
       reinterpret_cast<char*>(&default_value_)) + sizeof(has_minimum_));
-  _cached_size_ = 0;
 }
 
 OpDef_AttrDef::~OpDef_AttrDef() {
@@ -1037,9 +1001,7 @@ void OpDef_AttrDef::ArenaDtor(void* object) {
 void OpDef_AttrDef::RegisterArenaDtor(::google::protobuf::Arena* arena) {
 }
 void OpDef_AttrDef::SetCachedSize(int size) const {
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  _cached_size_.Set(size);
 }
 const ::google::protobuf::Descriptor* OpDef_AttrDef::descriptor() {
   ::protobuf_op_5fdef_2eproto::protobuf_AssignDescriptorsOnce();
@@ -1047,13 +1009,10 @@ const ::google::protobuf::Descriptor* OpDef_AttrDef::descriptor() {
 }
 
 const OpDef_AttrDef& OpDef_AttrDef::default_instance() {
-  ::protobuf_op_5fdef_2eproto::InitDefaultsOpDef_AttrDef();
+  ::google::protobuf::internal::InitSCC(&protobuf_op_5fdef_2eproto::scc_info_OpDef_AttrDef.base);
   return *internal_default_instance();
 }
 
-OpDef_AttrDef* OpDef_AttrDef::New(::google::protobuf::Arena* arena) const {
-  return ::google::protobuf::Arena::CreateMessage<OpDef_AttrDef>(arena);
-}
 
 void OpDef_AttrDef::Clear() {
 // @@protoc_insertion_point(message_clear_start:opencv_tensorflow.OpDef.AttrDef)
@@ -1084,7 +1043,7 @@ bool OpDef_AttrDef::MergePartialFromCodedStream(
   ::google::protobuf::uint32 tag;
   // @@protoc_insertion_point(parse_start:opencv_tensorflow.OpDef.AttrDef)
   for (;;) {
-    ::std::pair< ::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
+    ::std::pair<::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
     tag = p.first;
     if (!p.second) goto handle_unusual;
     switch (::google::protobuf::internal::WireFormatLite::GetTagFieldNumber(tag)) {
@@ -1237,7 +1196,7 @@ void OpDef_AttrDef::SerializeWithCachedSizes(
   // .opencv_tensorflow.AttrValue default_value = 3;
   if (this->has_default_value()) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      3, *this->default_value_, output);
+      3, this->_internal_default_value(), output);
   }
 
   // string description = 4;
@@ -1263,7 +1222,7 @@ void OpDef_AttrDef::SerializeWithCachedSizes(
   // .opencv_tensorflow.AttrValue allowed_values = 7;
   if (this->has_allowed_values()) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      7, *this->allowed_values_, output);
+      7, this->_internal_allowed_values(), output);
   }
 
   if ((_internal_metadata_.have_unknown_fields() &&  ::google::protobuf::internal::GetProto3PreserveUnknownsDefault())) {
@@ -1306,7 +1265,7 @@ void OpDef_AttrDef::SerializeWithCachedSizes(
   if (this->has_default_value()) {
     target = ::google::protobuf::internal::WireFormatLite::
       InternalWriteMessageToArray(
-        3, *this->default_value_, deterministic, target);
+        3, this->_internal_default_value(), deterministic, target);
   }
 
   // string description = 4;
@@ -1334,7 +1293,7 @@ void OpDef_AttrDef::SerializeWithCachedSizes(
   if (this->has_allowed_values()) {
     target = ::google::protobuf::internal::WireFormatLite::
       InternalWriteMessageToArray(
-        7, *this->allowed_values_, deterministic, target);
+        7, this->_internal_allowed_values(), deterministic, target);
   }
 
   if ((_internal_metadata_.have_unknown_fields() &&  ::google::protobuf::internal::GetProto3PreserveUnknownsDefault())) {
@@ -1379,14 +1338,14 @@ size_t OpDef_AttrDef::ByteSizeLong() const {
   if (this->has_default_value()) {
     total_size += 1 +
       ::google::protobuf::internal::WireFormatLite::MessageSize(
-        *this->default_value_);
+        *default_value_);
   }
 
   // .opencv_tensorflow.AttrValue allowed_values = 7;
   if (this->has_allowed_values()) {
     total_size += 1 +
       ::google::protobuf::internal::WireFormatLite::MessageSize(
-        *this->allowed_values_);
+        *allowed_values_);
   }
 
   // int64 minimum = 6;
@@ -1402,9 +1361,7 @@ size_t OpDef_AttrDef::ByteSizeLong() const {
   }
 
   int cached_size = ::google::protobuf::internal::ToCachedSize(total_size);
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = cached_size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  SetCachedSize(cached_size);
   return total_size;
 }
 
@@ -1492,15 +1449,17 @@ void OpDef_AttrDef::UnsafeArenaSwap(OpDef_AttrDef* other) {
 }
 void OpDef_AttrDef::InternalSwap(OpDef_AttrDef* other) {
   using std::swap;
-  name_.Swap(&other->name_);
-  type_.Swap(&other->type_);
-  description_.Swap(&other->description_);
+  name_.Swap(&other->name_, &::google::protobuf::internal::GetEmptyStringAlreadyInited(),
+    GetArenaNoVirtual());
+  type_.Swap(&other->type_, &::google::protobuf::internal::GetEmptyStringAlreadyInited(),
+    GetArenaNoVirtual());
+  description_.Swap(&other->description_, &::google::protobuf::internal::GetEmptyStringAlreadyInited(),
+    GetArenaNoVirtual());
   swap(default_value_, other->default_value_);
   swap(allowed_values_, other->allowed_values_);
   swap(minimum_, other->minimum_);
   swap(has_minimum_, other->has_minimum_);
   _internal_metadata_.Swap(&other->_internal_metadata_);
-  swap(_cached_size_, other->_cached_size_);
 }
 
 ::google::protobuf::Metadata OpDef_AttrDef::GetMetadata() const {
@@ -1515,10 +1474,6 @@ void OpDef::InitAsDefaultInstance() {
   ::opencv_tensorflow::_OpDef_default_instance_._instance.get_mutable()->deprecation_ = const_cast< ::opencv_tensorflow::OpDeprecation*>(
       ::opencv_tensorflow::OpDeprecation::internal_default_instance());
 }
-void OpDef::_slow_mutable_deprecation() {
-  deprecation_ = ::google::protobuf::Arena::CreateMessage< ::opencv_tensorflow::OpDeprecation >(
-      GetArenaNoVirtual());
-}
 void OpDef::unsafe_arena_set_allocated_deprecation(
     ::opencv_tensorflow::OpDeprecation* deprecation) {
   if (GetArenaNoVirtual() == NULL) {
@@ -1526,9 +1481,9 @@ void OpDef::unsafe_arena_set_allocated_deprecation(
   }
   deprecation_ = deprecation;
   if (deprecation) {
-
+    
   } else {
-
+    
   }
   // @@protoc_insertion_point(field_unsafe_arena_set_allocated:opencv_tensorflow.OpDef.deprecation)
 }
@@ -1548,9 +1503,8 @@ const int OpDef::kAllowsUninitializedInputFieldNumber;
 
 OpDef::OpDef()
   : ::google::protobuf::Message(), _internal_metadata_(NULL) {
-  if (GOOGLE_PREDICT_TRUE(this != internal_default_instance())) {
-    ::protobuf_op_5fdef_2eproto::InitDefaultsOpDef();
-  }
+  ::google::protobuf::internal::InitSCC(
+      &protobuf_op_5fdef_2eproto::scc_info_OpDef.base);
   SharedCtor();
   // @@protoc_insertion_point(constructor:opencv_tensorflow.OpDef)
 }
@@ -1560,7 +1514,7 @@ OpDef::OpDef(::google::protobuf::Arena* arena)
   input_arg_(arena),
   output_arg_(arena),
   attr_(arena) {
-  ::protobuf_op_5fdef_2eproto::InitDefaultsOpDef();
+  ::google::protobuf::internal::InitSCC(&protobuf_op_5fdef_2eproto::scc_info_OpDef.base);
   SharedCtor();
   RegisterArenaDtor(arena);
   // @@protoc_insertion_point(arena_constructor:opencv_tensorflow.OpDef)
@@ -1570,8 +1524,7 @@ OpDef::OpDef(const OpDef& from)
       _internal_metadata_(NULL),
       input_arg_(from.input_arg_),
       output_arg_(from.output_arg_),
-      attr_(from.attr_),
-      _cached_size_(0) {
+      attr_(from.attr_) {
   _internal_metadata_.MergeFrom(from._internal_metadata_);
   name_.UnsafeSetDefault(&::google::protobuf::internal::GetEmptyStringAlreadyInited());
   if (from.name().size() > 0) {
@@ -1606,7 +1559,6 @@ void OpDef::SharedCtor() {
   ::memset(&deprecation_, 0, static_cast<size_t>(
       reinterpret_cast<char*>(&allows_uninitialized_input_) -
       reinterpret_cast<char*>(&deprecation_)) + sizeof(allows_uninitialized_input_));
-  _cached_size_ = 0;
 }
 
 OpDef::~OpDef() {
@@ -1629,9 +1581,7 @@ void OpDef::ArenaDtor(void* object) {
 void OpDef::RegisterArenaDtor(::google::protobuf::Arena* arena) {
 }
 void OpDef::SetCachedSize(int size) const {
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  _cached_size_.Set(size);
 }
 const ::google::protobuf::Descriptor* OpDef::descriptor() {
   ::protobuf_op_5fdef_2eproto::protobuf_AssignDescriptorsOnce();
@@ -1639,13 +1589,10 @@ const ::google::protobuf::Descriptor* OpDef::descriptor() {
 }
 
 const OpDef& OpDef::default_instance() {
-  ::protobuf_op_5fdef_2eproto::InitDefaultsOpDef();
+  ::google::protobuf::internal::InitSCC(&protobuf_op_5fdef_2eproto::scc_info_OpDef.base);
   return *internal_default_instance();
 }
 
-OpDef* OpDef::New(::google::protobuf::Arena* arena) const {
-  return ::google::protobuf::Arena::CreateMessage<OpDef>(arena);
-}
 
 void OpDef::Clear() {
 // @@protoc_insertion_point(message_clear_start:opencv_tensorflow.OpDef)
@@ -1675,7 +1622,7 @@ bool OpDef::MergePartialFromCodedStream(
   ::google::protobuf::uint32 tag;
   // @@protoc_insertion_point(parse_start:opencv_tensorflow.OpDef)
   for (;;) {
-    ::std::pair< ::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(16383u);
+    ::std::pair<::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(16383u);
     tag = p.first;
     if (!p.second) goto handle_unusual;
     switch (::google::protobuf::internal::WireFormatLite::GetTagFieldNumber(tag)) {
@@ -1699,7 +1646,8 @@ bool OpDef::MergePartialFromCodedStream(
       case 2: {
         if (static_cast< ::google::protobuf::uint8>(tag) ==
             static_cast< ::google::protobuf::uint8>(18u /* 18 & 0xFF */)) {
-          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(input, add_input_arg()));
+          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(
+                input, add_input_arg()));
         } else {
           goto handle_unusual;
         }
@@ -1710,7 +1658,8 @@ bool OpDef::MergePartialFromCodedStream(
       case 3: {
         if (static_cast< ::google::protobuf::uint8>(tag) ==
             static_cast< ::google::protobuf::uint8>(26u /* 26 & 0xFF */)) {
-          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(input, add_output_arg()));
+          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(
+                input, add_output_arg()));
         } else {
           goto handle_unusual;
         }
@@ -1721,7 +1670,8 @@ bool OpDef::MergePartialFromCodedStream(
       case 4: {
         if (static_cast< ::google::protobuf::uint8>(tag) ==
             static_cast< ::google::protobuf::uint8>(34u /* 34 & 0xFF */)) {
-          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(input, add_attr()));
+          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(
+                input, add_attr()));
         } else {
           goto handle_unusual;
         }
@@ -1868,21 +1818,27 @@ void OpDef::SerializeWithCachedSizes(
   for (unsigned int i = 0,
       n = static_cast<unsigned int>(this->input_arg_size()); i < n; i++) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      2, this->input_arg(static_cast<int>(i)), output);
+      2,
+      this->input_arg(static_cast<int>(i)),
+      output);
   }
 
   // repeated .opencv_tensorflow.OpDef.ArgDef output_arg = 3;
   for (unsigned int i = 0,
       n = static_cast<unsigned int>(this->output_arg_size()); i < n; i++) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      3, this->output_arg(static_cast<int>(i)), output);
+      3,
+      this->output_arg(static_cast<int>(i)),
+      output);
   }
 
   // repeated .opencv_tensorflow.OpDef.AttrDef attr = 4;
   for (unsigned int i = 0,
       n = static_cast<unsigned int>(this->attr_size()); i < n; i++) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      4, this->attr(static_cast<int>(i)), output);
+      4,
+      this->attr(static_cast<int>(i)),
+      output);
   }
 
   // string summary = 5;
@@ -1908,7 +1864,7 @@ void OpDef::SerializeWithCachedSizes(
   // .opencv_tensorflow.OpDeprecation deprecation = 8;
   if (this->has_deprecation()) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      8, *this->deprecation_, output);
+      8, this->_internal_deprecation(), output);
   }
 
   // bool is_aggregate = 16;
@@ -2006,7 +1962,7 @@ void OpDef::SerializeWithCachedSizes(
   if (this->has_deprecation()) {
     target = ::google::protobuf::internal::WireFormatLite::
       InternalWriteMessageToArray(
-        8, *this->deprecation_, deterministic, target);
+        8, this->_internal_deprecation(), deterministic, target);
   }
 
   // bool is_aggregate = 16;
@@ -2104,7 +2060,7 @@ size_t OpDef::ByteSizeLong() const {
   if (this->has_deprecation()) {
     total_size += 1 +
       ::google::protobuf::internal::WireFormatLite::MessageSize(
-        *this->deprecation_);
+        *deprecation_);
   }
 
   // bool is_commutative = 18;
@@ -2128,9 +2084,7 @@ size_t OpDef::ByteSizeLong() const {
   }
 
   int cached_size = ::google::protobuf::internal::ToCachedSize(total_size);
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = cached_size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  SetCachedSize(cached_size);
   return total_size;
 }
 
@@ -2224,19 +2178,21 @@ void OpDef::UnsafeArenaSwap(OpDef* other) {
 }
 void OpDef::InternalSwap(OpDef* other) {
   using std::swap;
-  input_arg_.InternalSwap(&other->input_arg_);
-  output_arg_.InternalSwap(&other->output_arg_);
-  attr_.InternalSwap(&other->attr_);
-  name_.Swap(&other->name_);
-  summary_.Swap(&other->summary_);
-  description_.Swap(&other->description_);
+  CastToBase(&input_arg_)->InternalSwap(CastToBase(&other->input_arg_));
+  CastToBase(&output_arg_)->InternalSwap(CastToBase(&other->output_arg_));
+  CastToBase(&attr_)->InternalSwap(CastToBase(&other->attr_));
+  name_.Swap(&other->name_, &::google::protobuf::internal::GetEmptyStringAlreadyInited(),
+    GetArenaNoVirtual());
+  summary_.Swap(&other->summary_, &::google::protobuf::internal::GetEmptyStringAlreadyInited(),
+    GetArenaNoVirtual());
+  description_.Swap(&other->description_, &::google::protobuf::internal::GetEmptyStringAlreadyInited(),
+    GetArenaNoVirtual());
   swap(deprecation_, other->deprecation_);
   swap(is_commutative_, other->is_commutative_);
   swap(is_aggregate_, other->is_aggregate_);
   swap(is_stateful_, other->is_stateful_);
   swap(allows_uninitialized_input_, other->allows_uninitialized_input_);
   _internal_metadata_.Swap(&other->_internal_metadata_);
-  swap(_cached_size_, other->_cached_size_);
 }
 
 ::google::protobuf::Metadata OpDef::GetMetadata() const {
@@ -2256,24 +2212,22 @@ const int OpDeprecation::kExplanationFieldNumber;
 
 OpDeprecation::OpDeprecation()
   : ::google::protobuf::Message(), _internal_metadata_(NULL) {
-  if (GOOGLE_PREDICT_TRUE(this != internal_default_instance())) {
-    ::protobuf_op_5fdef_2eproto::InitDefaultsOpDeprecation();
-  }
+  ::google::protobuf::internal::InitSCC(
+      &protobuf_op_5fdef_2eproto::scc_info_OpDeprecation.base);
   SharedCtor();
   // @@protoc_insertion_point(constructor:opencv_tensorflow.OpDeprecation)
 }
 OpDeprecation::OpDeprecation(::google::protobuf::Arena* arena)
   : ::google::protobuf::Message(),
   _internal_metadata_(arena) {
-  ::protobuf_op_5fdef_2eproto::InitDefaultsOpDeprecation();
+  ::google::protobuf::internal::InitSCC(&protobuf_op_5fdef_2eproto::scc_info_OpDeprecation.base);
   SharedCtor();
   RegisterArenaDtor(arena);
   // @@protoc_insertion_point(arena_constructor:opencv_tensorflow.OpDeprecation)
 }
 OpDeprecation::OpDeprecation(const OpDeprecation& from)
   : ::google::protobuf::Message(),
-      _internal_metadata_(NULL),
-      _cached_size_(0) {
+      _internal_metadata_(NULL) {
   _internal_metadata_.MergeFrom(from._internal_metadata_);
   explanation_.UnsafeSetDefault(&::google::protobuf::internal::GetEmptyStringAlreadyInited());
   if (from.explanation().size() > 0) {
@@ -2287,7 +2241,6 @@ OpDeprecation::OpDeprecation(const OpDeprecation& from)
 void OpDeprecation::SharedCtor() {
   explanation_.UnsafeSetDefault(&::google::protobuf::internal::GetEmptyStringAlreadyInited());
   version_ = 0;
-  _cached_size_ = 0;
 }
 
 OpDeprecation::~OpDeprecation() {
@@ -2307,9 +2260,7 @@ void OpDeprecation::ArenaDtor(void* object) {
 void OpDeprecation::RegisterArenaDtor(::google::protobuf::Arena* arena) {
 }
 void OpDeprecation::SetCachedSize(int size) const {
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  _cached_size_.Set(size);
 }
 const ::google::protobuf::Descriptor* OpDeprecation::descriptor() {
   ::protobuf_op_5fdef_2eproto::protobuf_AssignDescriptorsOnce();
@@ -2317,13 +2268,10 @@ const ::google::protobuf::Descriptor* OpDeprecation::descriptor() {
 }
 
 const OpDeprecation& OpDeprecation::default_instance() {
-  ::protobuf_op_5fdef_2eproto::InitDefaultsOpDeprecation();
+  ::google::protobuf::internal::InitSCC(&protobuf_op_5fdef_2eproto::scc_info_OpDeprecation.base);
   return *internal_default_instance();
 }
 
-OpDeprecation* OpDeprecation::New(::google::protobuf::Arena* arena) const {
-  return ::google::protobuf::Arena::CreateMessage<OpDeprecation>(arena);
-}
 
 void OpDeprecation::Clear() {
 // @@protoc_insertion_point(message_clear_start:opencv_tensorflow.OpDeprecation)
@@ -2342,7 +2290,7 @@ bool OpDeprecation::MergePartialFromCodedStream(
   ::google::protobuf::uint32 tag;
   // @@protoc_insertion_point(parse_start:opencv_tensorflow.OpDeprecation)
   for (;;) {
-    ::std::pair< ::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
+    ::std::pair<::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
     tag = p.first;
     if (!p.second) goto handle_unusual;
     switch (::google::protobuf::internal::WireFormatLite::GetTagFieldNumber(tag)) {
@@ -2479,9 +2427,7 @@ size_t OpDeprecation::ByteSizeLong() const {
   }
 
   int cached_size = ::google::protobuf::internal::ToCachedSize(total_size);
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = cached_size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  SetCachedSize(cached_size);
   return total_size;
 }
 
@@ -2554,10 +2500,10 @@ void OpDeprecation::UnsafeArenaSwap(OpDeprecation* other) {
 }
 void OpDeprecation::InternalSwap(OpDeprecation* other) {
   using std::swap;
-  explanation_.Swap(&other->explanation_);
+  explanation_.Swap(&other->explanation_, &::google::protobuf::internal::GetEmptyStringAlreadyInited(),
+    GetArenaNoVirtual());
   swap(version_, other->version_);
   _internal_metadata_.Swap(&other->_internal_metadata_);
-  swap(_cached_size_, other->_cached_size_);
 }
 
 ::google::protobuf::Metadata OpDeprecation::GetMetadata() const {
@@ -2576,9 +2522,8 @@ const int OpList::kOpFieldNumber;
 
 OpList::OpList()
   : ::google::protobuf::Message(), _internal_metadata_(NULL) {
-  if (GOOGLE_PREDICT_TRUE(this != internal_default_instance())) {
-    ::protobuf_op_5fdef_2eproto::InitDefaultsOpList();
-  }
+  ::google::protobuf::internal::InitSCC(
+      &protobuf_op_5fdef_2eproto::scc_info_OpList.base);
   SharedCtor();
   // @@protoc_insertion_point(constructor:opencv_tensorflow.OpList)
 }
@@ -2586,7 +2531,7 @@ OpList::OpList(::google::protobuf::Arena* arena)
   : ::google::protobuf::Message(),
   _internal_metadata_(arena),
   op_(arena) {
-  ::protobuf_op_5fdef_2eproto::InitDefaultsOpList();
+  ::google::protobuf::internal::InitSCC(&protobuf_op_5fdef_2eproto::scc_info_OpList.base);
   SharedCtor();
   RegisterArenaDtor(arena);
   // @@protoc_insertion_point(arena_constructor:opencv_tensorflow.OpList)
@@ -2594,14 +2539,12 @@ OpList::OpList(::google::protobuf::Arena* arena)
 OpList::OpList(const OpList& from)
   : ::google::protobuf::Message(),
       _internal_metadata_(NULL),
-      op_(from.op_),
-      _cached_size_(0) {
+      op_(from.op_) {
   _internal_metadata_.MergeFrom(from._internal_metadata_);
   // @@protoc_insertion_point(copy_constructor:opencv_tensorflow.OpList)
 }
 
 void OpList::SharedCtor() {
-  _cached_size_ = 0;
 }
 
 OpList::~OpList() {
@@ -2620,9 +2563,7 @@ void OpList::ArenaDtor(void* object) {
 void OpList::RegisterArenaDtor(::google::protobuf::Arena* arena) {
 }
 void OpList::SetCachedSize(int size) const {
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  _cached_size_.Set(size);
 }
 const ::google::protobuf::Descriptor* OpList::descriptor() {
   ::protobuf_op_5fdef_2eproto::protobuf_AssignDescriptorsOnce();
@@ -2630,13 +2571,10 @@ const ::google::protobuf::Descriptor* OpList::descriptor() {
 }
 
 const OpList& OpList::default_instance() {
-  ::protobuf_op_5fdef_2eproto::InitDefaultsOpList();
+  ::google::protobuf::internal::InitSCC(&protobuf_op_5fdef_2eproto::scc_info_OpList.base);
   return *internal_default_instance();
 }
 
-OpList* OpList::New(::google::protobuf::Arena* arena) const {
-  return ::google::protobuf::Arena::CreateMessage<OpList>(arena);
-}
 
 void OpList::Clear() {
 // @@protoc_insertion_point(message_clear_start:opencv_tensorflow.OpList)
@@ -2654,7 +2592,7 @@ bool OpList::MergePartialFromCodedStream(
   ::google::protobuf::uint32 tag;
   // @@protoc_insertion_point(parse_start:opencv_tensorflow.OpList)
   for (;;) {
-    ::std::pair< ::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
+    ::std::pair<::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
     tag = p.first;
     if (!p.second) goto handle_unusual;
     switch (::google::protobuf::internal::WireFormatLite::GetTagFieldNumber(tag)) {
@@ -2662,7 +2600,8 @@ bool OpList::MergePartialFromCodedStream(
       case 1: {
         if (static_cast< ::google::protobuf::uint8>(tag) ==
             static_cast< ::google::protobuf::uint8>(10u /* 10 & 0xFF */)) {
-          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(input, add_op()));
+          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(
+                input, add_op()));
         } else {
           goto handle_unusual;
         }
@@ -2699,7 +2638,9 @@ void OpList::SerializeWithCachedSizes(
   for (unsigned int i = 0,
       n = static_cast<unsigned int>(this->op_size()); i < n; i++) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      1, this->op(static_cast<int>(i)), output);
+      1,
+      this->op(static_cast<int>(i)),
+      output);
   }
 
   if ((_internal_metadata_.have_unknown_fields() &&  ::google::protobuf::internal::GetProto3PreserveUnknownsDefault())) {
@@ -2753,9 +2694,7 @@ size_t OpList::ByteSizeLong() const {
   }
 
   int cached_size = ::google::protobuf::internal::ToCachedSize(total_size);
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = cached_size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  SetCachedSize(cached_size);
   return total_size;
 }
 
@@ -2823,9 +2762,8 @@ void OpList::UnsafeArenaSwap(OpList* other) {
 }
 void OpList::InternalSwap(OpList* other) {
   using std::swap;
-  op_.InternalSwap(&other->op_);
+  CastToBase(&op_)->InternalSwap(CastToBase(&other->op_));
   _internal_metadata_.Swap(&other->_internal_metadata_);
-  swap(_cached_size_, other->_cached_size_);
 }
 
 ::google::protobuf::Metadata OpList::GetMetadata() const {
@@ -2836,5 +2774,24 @@ void OpList::InternalSwap(OpList* other) {
 
 // @@protoc_insertion_point(namespace_scope)
 }  // namespace opencv_tensorflow
+namespace google {
+namespace protobuf {
+template<> GOOGLE_PROTOBUF_ATTRIBUTE_NOINLINE ::opencv_tensorflow::OpDef_ArgDef* Arena::CreateMaybeMessage< ::opencv_tensorflow::OpDef_ArgDef >(Arena* arena) {
+  return Arena::CreateMessageInternal< ::opencv_tensorflow::OpDef_ArgDef >(arena);
+}
+template<> GOOGLE_PROTOBUF_ATTRIBUTE_NOINLINE ::opencv_tensorflow::OpDef_AttrDef* Arena::CreateMaybeMessage< ::opencv_tensorflow::OpDef_AttrDef >(Arena* arena) {
+  return Arena::CreateMessageInternal< ::opencv_tensorflow::OpDef_AttrDef >(arena);
+}
+template<> GOOGLE_PROTOBUF_ATTRIBUTE_NOINLINE ::opencv_tensorflow::OpDef* Arena::CreateMaybeMessage< ::opencv_tensorflow::OpDef >(Arena* arena) {
+  return Arena::CreateMessageInternal< ::opencv_tensorflow::OpDef >(arena);
+}
+template<> GOOGLE_PROTOBUF_ATTRIBUTE_NOINLINE ::opencv_tensorflow::OpDeprecation* Arena::CreateMaybeMessage< ::opencv_tensorflow::OpDeprecation >(Arena* arena) {
+  return Arena::CreateMessageInternal< ::opencv_tensorflow::OpDeprecation >(arena);
+}
+template<> GOOGLE_PROTOBUF_ATTRIBUTE_NOINLINE ::opencv_tensorflow::OpList* Arena::CreateMaybeMessage< ::opencv_tensorflow::OpList >(Arena* arena) {
+  return Arena::CreateMessageInternal< ::opencv_tensorflow::OpList >(arena);
+}
+}  // namespace protobuf
+}  // namespace google
 
 // @@protoc_insertion_point(global_scope)
diff --git a/modules/dnn/misc/tensorflow/op_def.pb.h b/modules/dnn/misc/tensorflow/op_def.pb.h
index a69c6add2..790d66192 100644
--- a/modules/dnn/misc/tensorflow/op_def.pb.h
+++ b/modules/dnn/misc/tensorflow/op_def.pb.h
@@ -1,19 +1,19 @@
 // Generated by the protocol buffer compiler.  DO NOT EDIT!
 // source: op_def.proto
 
-#ifndef PROTOBUF_op_5fdef_2eproto__INCLUDED
-#define PROTOBUF_op_5fdef_2eproto__INCLUDED
+#ifndef PROTOBUF_INCLUDED_op_5fdef_2eproto
+#define PROTOBUF_INCLUDED_op_5fdef_2eproto
 
 #include <string>
 
 #include <google/protobuf/stubs/common.h>
 
-#if GOOGLE_PROTOBUF_VERSION < 3005000
+#if GOOGLE_PROTOBUF_VERSION < 3006001
 #error This file was generated by a newer version of protoc which is
 #error incompatible with your Protocol Buffer headers.  Please update
 #error your headers.
 #endif
-#if 3005001 < GOOGLE_PROTOBUF_MIN_PROTOC_VERSION
+#if 3006001 < GOOGLE_PROTOBUF_MIN_PROTOC_VERSION
 #error This file was generated by an older version of protoc which is
 #error incompatible with your Protocol Buffer headers.  Please
 #error regenerate this file with a newer version of protoc.
@@ -24,6 +24,7 @@
 #include <google/protobuf/arenastring.h>
 #include <google/protobuf/generated_message_table_driven.h>
 #include <google/protobuf/generated_message_util.h>
+#include <google/protobuf/inlined_string_field.h>
 #include <google/protobuf/metadata.h>
 #include <google/protobuf/message.h>
 #include <google/protobuf/repeated_field.h>  // IWYU pragma: export
@@ -32,6 +33,7 @@
 #include "attr_value.pb.h"
 #include "types.pb.h"
 // @@protoc_insertion_point(includes)
+#define PROTOBUF_INTERNAL_EXPORT_protobuf_op_5fdef_2eproto 
 
 namespace protobuf_op_5fdef_2eproto {
 // Internal implementation detail -- do not use these members.
@@ -44,23 +46,6 @@ struct TableStruct {
   static const ::google::protobuf::uint32 offsets[];
 };
 void AddDescriptors();
-void InitDefaultsOpDef_ArgDefImpl();
-void InitDefaultsOpDef_ArgDef();
-void InitDefaultsOpDef_AttrDefImpl();
-void InitDefaultsOpDef_AttrDef();
-void InitDefaultsOpDefImpl();
-void InitDefaultsOpDef();
-void InitDefaultsOpDeprecationImpl();
-void InitDefaultsOpDeprecation();
-void InitDefaultsOpListImpl();
-void InitDefaultsOpList();
-inline void InitDefaults() {
-  InitDefaultsOpDef_ArgDef();
-  InitDefaultsOpDef_AttrDef();
-  InitDefaultsOpDef();
-  InitDefaultsOpDeprecation();
-  InitDefaultsOpList();
-}
 }  // namespace protobuf_op_5fdef_2eproto
 namespace opencv_tensorflow {
 class OpDef;
@@ -79,6 +64,15 @@ class OpList;
 class OpListDefaultTypeInternal;
 extern OpListDefaultTypeInternal _OpList_default_instance_;
 }  // namespace opencv_tensorflow
+namespace google {
+namespace protobuf {
+template<> ::opencv_tensorflow::OpDef* Arena::CreateMaybeMessage<::opencv_tensorflow::OpDef>(Arena*);
+template<> ::opencv_tensorflow::OpDef_ArgDef* Arena::CreateMaybeMessage<::opencv_tensorflow::OpDef_ArgDef>(Arena*);
+template<> ::opencv_tensorflow::OpDef_AttrDef* Arena::CreateMaybeMessage<::opencv_tensorflow::OpDef_AttrDef>(Arena*);
+template<> ::opencv_tensorflow::OpDeprecation* Arena::CreateMaybeMessage<::opencv_tensorflow::OpDeprecation>(Arena*);
+template<> ::opencv_tensorflow::OpList* Arena::CreateMaybeMessage<::opencv_tensorflow::OpList>(Arena*);
+}  // namespace protobuf
+}  // namespace google
 namespace opencv_tensorflow {
 
 // ===================================================================
@@ -109,10 +103,10 @@ class OpDef_ArgDef : public ::google::protobuf::Message /* @@protoc_insertion_po
     return *this;
   }
   #endif
-  inline ::google::protobuf::Arena* GetArena() const PROTOBUF_FINAL {
+  inline ::google::protobuf::Arena* GetArena() const final {
     return GetArenaNoVirtual();
   }
-  inline void* GetMaybeArenaPointer() const PROTOBUF_FINAL {
+  inline void* GetMaybeArenaPointer() const final {
     return MaybeArenaPtr();
   }
   static const ::google::protobuf::Descriptor* descriptor();
@@ -123,7 +117,7 @@ class OpDef_ArgDef : public ::google::protobuf::Message /* @@protoc_insertion_po
     return reinterpret_cast<const OpDef_ArgDef*>(
                &_OpDef_ArgDef_default_instance_);
   }
-  static PROTOBUF_CONSTEXPR int const kIndexInFileMessages =
+  static constexpr int kIndexInFileMessages =
     0;
 
   void UnsafeArenaSwap(OpDef_ArgDef* other);
@@ -134,28 +128,33 @@ class OpDef_ArgDef : public ::google::protobuf::Message /* @@protoc_insertion_po
 
   // implements Message ----------------------------------------------
 
-  inline OpDef_ArgDef* New() const PROTOBUF_FINAL { return New(NULL); }
+  inline OpDef_ArgDef* New() const final {
+    return CreateMaybeMessage<OpDef_ArgDef>(NULL);
+  }
 
-  OpDef_ArgDef* New(::google::protobuf::Arena* arena) const PROTOBUF_FINAL;
-  void CopyFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
-  void MergeFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
+  OpDef_ArgDef* New(::google::protobuf::Arena* arena) const final {
+    return CreateMaybeMessage<OpDef_ArgDef>(arena);
+  }
+  void CopyFrom(const ::google::protobuf::Message& from) final;
+  void MergeFrom(const ::google::protobuf::Message& from) final;
   void CopyFrom(const OpDef_ArgDef& from);
   void MergeFrom(const OpDef_ArgDef& from);
-  void Clear() PROTOBUF_FINAL;
-  bool IsInitialized() const PROTOBUF_FINAL;
+  void Clear() final;
+  bool IsInitialized() const final;
 
-  size_t ByteSizeLong() const PROTOBUF_FINAL;
+  size_t ByteSizeLong() const final;
   bool MergePartialFromCodedStream(
-      ::google::protobuf::io::CodedInputStream* input) PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedInputStream* input) final;
   void SerializeWithCachedSizes(
-      ::google::protobuf::io::CodedOutputStream* output) const PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedOutputStream* output) const final;
   ::google::protobuf::uint8* InternalSerializeWithCachedSizesToArray(
-      bool deterministic, ::google::protobuf::uint8* target) const PROTOBUF_FINAL;
-  int GetCachedSize() const PROTOBUF_FINAL { return _cached_size_; }
+      bool deterministic, ::google::protobuf::uint8* target) const final;
+  int GetCachedSize() const final { return _cached_size_.Get(); }
+
   private:
   void SharedCtor();
   void SharedDtor();
-  void SetCachedSize(int size) const PROTOBUF_FINAL;
+  void SetCachedSize(int size) const final;
   void InternalSwap(OpDef_ArgDef* other);
   protected:
   explicit OpDef_ArgDef(::google::protobuf::Arena* arena);
@@ -171,7 +170,7 @@ class OpDef_ArgDef : public ::google::protobuf::Message /* @@protoc_insertion_po
   }
   public:
 
-  ::google::protobuf::Metadata GetMetadata() const PROTOBUF_FINAL;
+  ::google::protobuf::Metadata GetMetadata() const final;
 
   // nested types ----------------------------------------------------
 
@@ -318,9 +317,8 @@ class OpDef_ArgDef : public ::google::protobuf::Message /* @@protoc_insertion_po
   ::google::protobuf::internal::ArenaStringPtr type_list_attr_;
   int type_;
   bool is_ref_;
-  mutable int _cached_size_;
+  mutable ::google::protobuf::internal::CachedSize _cached_size_;
   friend struct ::protobuf_op_5fdef_2eproto::TableStruct;
-  friend void ::protobuf_op_5fdef_2eproto::InitDefaultsOpDef_ArgDefImpl();
 };
 // -------------------------------------------------------------------
 
@@ -350,10 +348,10 @@ class OpDef_AttrDef : public ::google::protobuf::Message /* @@protoc_insertion_p
     return *this;
   }
   #endif
-  inline ::google::protobuf::Arena* GetArena() const PROTOBUF_FINAL {
+  inline ::google::protobuf::Arena* GetArena() const final {
     return GetArenaNoVirtual();
   }
-  inline void* GetMaybeArenaPointer() const PROTOBUF_FINAL {
+  inline void* GetMaybeArenaPointer() const final {
     return MaybeArenaPtr();
   }
   static const ::google::protobuf::Descriptor* descriptor();
@@ -364,7 +362,7 @@ class OpDef_AttrDef : public ::google::protobuf::Message /* @@protoc_insertion_p
     return reinterpret_cast<const OpDef_AttrDef*>(
                &_OpDef_AttrDef_default_instance_);
   }
-  static PROTOBUF_CONSTEXPR int const kIndexInFileMessages =
+  static constexpr int kIndexInFileMessages =
     1;
 
   void UnsafeArenaSwap(OpDef_AttrDef* other);
@@ -375,28 +373,33 @@ class OpDef_AttrDef : public ::google::protobuf::Message /* @@protoc_insertion_p
 
   // implements Message ----------------------------------------------
 
-  inline OpDef_AttrDef* New() const PROTOBUF_FINAL { return New(NULL); }
+  inline OpDef_AttrDef* New() const final {
+    return CreateMaybeMessage<OpDef_AttrDef>(NULL);
+  }
 
-  OpDef_AttrDef* New(::google::protobuf::Arena* arena) const PROTOBUF_FINAL;
-  void CopyFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
-  void MergeFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
+  OpDef_AttrDef* New(::google::protobuf::Arena* arena) const final {
+    return CreateMaybeMessage<OpDef_AttrDef>(arena);
+  }
+  void CopyFrom(const ::google::protobuf::Message& from) final;
+  void MergeFrom(const ::google::protobuf::Message& from) final;
   void CopyFrom(const OpDef_AttrDef& from);
   void MergeFrom(const OpDef_AttrDef& from);
-  void Clear() PROTOBUF_FINAL;
-  bool IsInitialized() const PROTOBUF_FINAL;
+  void Clear() final;
+  bool IsInitialized() const final;
 
-  size_t ByteSizeLong() const PROTOBUF_FINAL;
+  size_t ByteSizeLong() const final;
   bool MergePartialFromCodedStream(
-      ::google::protobuf::io::CodedInputStream* input) PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedInputStream* input) final;
   void SerializeWithCachedSizes(
-      ::google::protobuf::io::CodedOutputStream* output) const PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedOutputStream* output) const final;
   ::google::protobuf::uint8* InternalSerializeWithCachedSizesToArray(
-      bool deterministic, ::google::protobuf::uint8* target) const PROTOBUF_FINAL;
-  int GetCachedSize() const PROTOBUF_FINAL { return _cached_size_; }
+      bool deterministic, ::google::protobuf::uint8* target) const final;
+  int GetCachedSize() const final { return _cached_size_.Get(); }
+
   private:
   void SharedCtor();
   void SharedDtor();
-  void SetCachedSize(int size) const PROTOBUF_FINAL;
+  void SetCachedSize(int size) const final;
   void InternalSwap(OpDef_AttrDef* other);
   protected:
   explicit OpDef_AttrDef(::google::protobuf::Arena* arena);
@@ -412,7 +415,7 @@ class OpDef_AttrDef : public ::google::protobuf::Message /* @@protoc_insertion_p
   }
   public:
 
-  ::google::protobuf::Metadata GetMetadata() const PROTOBUF_FINAL;
+  ::google::protobuf::Metadata GetMetadata() const final;
 
   // nested types ----------------------------------------------------
 
@@ -492,7 +495,7 @@ class OpDef_AttrDef : public ::google::protobuf::Message /* @@protoc_insertion_p
   void clear_default_value();
   static const int kDefaultValueFieldNumber = 3;
   private:
-  void _slow_mutable_default_value();
+  const ::opencv_tensorflow::AttrValue& _internal_default_value() const;
   public:
   const ::opencv_tensorflow::AttrValue& default_value() const;
   ::opencv_tensorflow::AttrValue* release_default_value();
@@ -507,7 +510,7 @@ class OpDef_AttrDef : public ::google::protobuf::Message /* @@protoc_insertion_p
   void clear_allowed_values();
   static const int kAllowedValuesFieldNumber = 7;
   private:
-  void _slow_mutable_allowed_values();
+  const ::opencv_tensorflow::AttrValue& _internal_allowed_values() const;
   public:
   const ::opencv_tensorflow::AttrValue& allowed_values() const;
   ::opencv_tensorflow::AttrValue* release_allowed_values();
@@ -543,9 +546,8 @@ class OpDef_AttrDef : public ::google::protobuf::Message /* @@protoc_insertion_p
   ::opencv_tensorflow::AttrValue* allowed_values_;
   ::google::protobuf::int64 minimum_;
   bool has_minimum_;
-  mutable int _cached_size_;
+  mutable ::google::protobuf::internal::CachedSize _cached_size_;
   friend struct ::protobuf_op_5fdef_2eproto::TableStruct;
-  friend void ::protobuf_op_5fdef_2eproto::InitDefaultsOpDef_AttrDefImpl();
 };
 // -------------------------------------------------------------------
 
@@ -575,10 +577,10 @@ class OpDef : public ::google::protobuf::Message /* @@protoc_insertion_point(cla
     return *this;
   }
   #endif
-  inline ::google::protobuf::Arena* GetArena() const PROTOBUF_FINAL {
+  inline ::google::protobuf::Arena* GetArena() const final {
     return GetArenaNoVirtual();
   }
-  inline void* GetMaybeArenaPointer() const PROTOBUF_FINAL {
+  inline void* GetMaybeArenaPointer() const final {
     return MaybeArenaPtr();
   }
   static const ::google::protobuf::Descriptor* descriptor();
@@ -589,7 +591,7 @@ class OpDef : public ::google::protobuf::Message /* @@protoc_insertion_point(cla
     return reinterpret_cast<const OpDef*>(
                &_OpDef_default_instance_);
   }
-  static PROTOBUF_CONSTEXPR int const kIndexInFileMessages =
+  static constexpr int kIndexInFileMessages =
     2;
 
   void UnsafeArenaSwap(OpDef* other);
@@ -600,28 +602,33 @@ class OpDef : public ::google::protobuf::Message /* @@protoc_insertion_point(cla
 
   // implements Message ----------------------------------------------
 
-  inline OpDef* New() const PROTOBUF_FINAL { return New(NULL); }
+  inline OpDef* New() const final {
+    return CreateMaybeMessage<OpDef>(NULL);
+  }
 
-  OpDef* New(::google::protobuf::Arena* arena) const PROTOBUF_FINAL;
-  void CopyFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
-  void MergeFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
+  OpDef* New(::google::protobuf::Arena* arena) const final {
+    return CreateMaybeMessage<OpDef>(arena);
+  }
+  void CopyFrom(const ::google::protobuf::Message& from) final;
+  void MergeFrom(const ::google::protobuf::Message& from) final;
   void CopyFrom(const OpDef& from);
   void MergeFrom(const OpDef& from);
-  void Clear() PROTOBUF_FINAL;
-  bool IsInitialized() const PROTOBUF_FINAL;
+  void Clear() final;
+  bool IsInitialized() const final;
 
-  size_t ByteSizeLong() const PROTOBUF_FINAL;
+  size_t ByteSizeLong() const final;
   bool MergePartialFromCodedStream(
-      ::google::protobuf::io::CodedInputStream* input) PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedInputStream* input) final;
   void SerializeWithCachedSizes(
-      ::google::protobuf::io::CodedOutputStream* output) const PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedOutputStream* output) const final;
   ::google::protobuf::uint8* InternalSerializeWithCachedSizesToArray(
-      bool deterministic, ::google::protobuf::uint8* target) const PROTOBUF_FINAL;
-  int GetCachedSize() const PROTOBUF_FINAL { return _cached_size_; }
+      bool deterministic, ::google::protobuf::uint8* target) const final;
+  int GetCachedSize() const final { return _cached_size_.Get(); }
+
   private:
   void SharedCtor();
   void SharedDtor();
-  void SetCachedSize(int size) const PROTOBUF_FINAL;
+  void SetCachedSize(int size) const final;
   void InternalSwap(OpDef* other);
   protected:
   explicit OpDef(::google::protobuf::Arena* arena);
@@ -637,7 +644,7 @@ class OpDef : public ::google::protobuf::Message /* @@protoc_insertion_point(cla
   }
   public:
 
-  ::google::protobuf::Metadata GetMetadata() const PROTOBUF_FINAL;
+  ::google::protobuf::Metadata GetMetadata() const final;
 
   // nested types ----------------------------------------------------
 
@@ -650,11 +657,11 @@ class OpDef : public ::google::protobuf::Message /* @@protoc_insertion_point(cla
   int input_arg_size() const;
   void clear_input_arg();
   static const int kInputArgFieldNumber = 2;
-  const ::opencv_tensorflow::OpDef_ArgDef& input_arg(int index) const;
   ::opencv_tensorflow::OpDef_ArgDef* mutable_input_arg(int index);
-  ::opencv_tensorflow::OpDef_ArgDef* add_input_arg();
   ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::OpDef_ArgDef >*
       mutable_input_arg();
+  const ::opencv_tensorflow::OpDef_ArgDef& input_arg(int index) const;
+  ::opencv_tensorflow::OpDef_ArgDef* add_input_arg();
   const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::OpDef_ArgDef >&
       input_arg() const;
 
@@ -662,11 +669,11 @@ class OpDef : public ::google::protobuf::Message /* @@protoc_insertion_point(cla
   int output_arg_size() const;
   void clear_output_arg();
   static const int kOutputArgFieldNumber = 3;
-  const ::opencv_tensorflow::OpDef_ArgDef& output_arg(int index) const;
   ::opencv_tensorflow::OpDef_ArgDef* mutable_output_arg(int index);
-  ::opencv_tensorflow::OpDef_ArgDef* add_output_arg();
   ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::OpDef_ArgDef >*
       mutable_output_arg();
+  const ::opencv_tensorflow::OpDef_ArgDef& output_arg(int index) const;
+  ::opencv_tensorflow::OpDef_ArgDef* add_output_arg();
   const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::OpDef_ArgDef >&
       output_arg() const;
 
@@ -674,11 +681,11 @@ class OpDef : public ::google::protobuf::Message /* @@protoc_insertion_point(cla
   int attr_size() const;
   void clear_attr();
   static const int kAttrFieldNumber = 4;
-  const ::opencv_tensorflow::OpDef_AttrDef& attr(int index) const;
   ::opencv_tensorflow::OpDef_AttrDef* mutable_attr(int index);
-  ::opencv_tensorflow::OpDef_AttrDef* add_attr();
   ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::OpDef_AttrDef >*
       mutable_attr();
+  const ::opencv_tensorflow::OpDef_AttrDef& attr(int index) const;
+  ::opencv_tensorflow::OpDef_AttrDef* add_attr();
   const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::OpDef_AttrDef >&
       attr() const;
 
@@ -756,7 +763,7 @@ class OpDef : public ::google::protobuf::Message /* @@protoc_insertion_point(cla
   void clear_deprecation();
   static const int kDeprecationFieldNumber = 8;
   private:
-  void _slow_mutable_deprecation();
+  const ::opencv_tensorflow::OpDeprecation& _internal_deprecation() const;
   public:
   const ::opencv_tensorflow::OpDeprecation& deprecation() const;
   ::opencv_tensorflow::OpDeprecation* release_deprecation();
@@ -808,9 +815,8 @@ class OpDef : public ::google::protobuf::Message /* @@protoc_insertion_point(cla
   bool is_aggregate_;
   bool is_stateful_;
   bool allows_uninitialized_input_;
-  mutable int _cached_size_;
+  mutable ::google::protobuf::internal::CachedSize _cached_size_;
   friend struct ::protobuf_op_5fdef_2eproto::TableStruct;
-  friend void ::protobuf_op_5fdef_2eproto::InitDefaultsOpDefImpl();
 };
 // -------------------------------------------------------------------
 
@@ -840,10 +846,10 @@ class OpDeprecation : public ::google::protobuf::Message /* @@protoc_insertion_p
     return *this;
   }
   #endif
-  inline ::google::protobuf::Arena* GetArena() const PROTOBUF_FINAL {
+  inline ::google::protobuf::Arena* GetArena() const final {
     return GetArenaNoVirtual();
   }
-  inline void* GetMaybeArenaPointer() const PROTOBUF_FINAL {
+  inline void* GetMaybeArenaPointer() const final {
     return MaybeArenaPtr();
   }
   static const ::google::protobuf::Descriptor* descriptor();
@@ -854,7 +860,7 @@ class OpDeprecation : public ::google::protobuf::Message /* @@protoc_insertion_p
     return reinterpret_cast<const OpDeprecation*>(
                &_OpDeprecation_default_instance_);
   }
-  static PROTOBUF_CONSTEXPR int const kIndexInFileMessages =
+  static constexpr int kIndexInFileMessages =
     3;
 
   void UnsafeArenaSwap(OpDeprecation* other);
@@ -865,28 +871,33 @@ class OpDeprecation : public ::google::protobuf::Message /* @@protoc_insertion_p
 
   // implements Message ----------------------------------------------
 
-  inline OpDeprecation* New() const PROTOBUF_FINAL { return New(NULL); }
+  inline OpDeprecation* New() const final {
+    return CreateMaybeMessage<OpDeprecation>(NULL);
+  }
 
-  OpDeprecation* New(::google::protobuf::Arena* arena) const PROTOBUF_FINAL;
-  void CopyFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
-  void MergeFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
+  OpDeprecation* New(::google::protobuf::Arena* arena) const final {
+    return CreateMaybeMessage<OpDeprecation>(arena);
+  }
+  void CopyFrom(const ::google::protobuf::Message& from) final;
+  void MergeFrom(const ::google::protobuf::Message& from) final;
   void CopyFrom(const OpDeprecation& from);
   void MergeFrom(const OpDeprecation& from);
-  void Clear() PROTOBUF_FINAL;
-  bool IsInitialized() const PROTOBUF_FINAL;
+  void Clear() final;
+  bool IsInitialized() const final;
 
-  size_t ByteSizeLong() const PROTOBUF_FINAL;
+  size_t ByteSizeLong() const final;
   bool MergePartialFromCodedStream(
-      ::google::protobuf::io::CodedInputStream* input) PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedInputStream* input) final;
   void SerializeWithCachedSizes(
-      ::google::protobuf::io::CodedOutputStream* output) const PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedOutputStream* output) const final;
   ::google::protobuf::uint8* InternalSerializeWithCachedSizesToArray(
-      bool deterministic, ::google::protobuf::uint8* target) const PROTOBUF_FINAL;
-  int GetCachedSize() const PROTOBUF_FINAL { return _cached_size_; }
+      bool deterministic, ::google::protobuf::uint8* target) const final;
+  int GetCachedSize() const final { return _cached_size_.Get(); }
+
   private:
   void SharedCtor();
   void SharedDtor();
-  void SetCachedSize(int size) const PROTOBUF_FINAL;
+  void SetCachedSize(int size) const final;
   void InternalSwap(OpDeprecation* other);
   protected:
   explicit OpDeprecation(::google::protobuf::Arena* arena);
@@ -902,7 +913,7 @@ class OpDeprecation : public ::google::protobuf::Message /* @@protoc_insertion_p
   }
   public:
 
-  ::google::protobuf::Metadata GetMetadata() const PROTOBUF_FINAL;
+  ::google::protobuf::Metadata GetMetadata() const final;
 
   // nested types ----------------------------------------------------
 
@@ -946,9 +957,8 @@ class OpDeprecation : public ::google::protobuf::Message /* @@protoc_insertion_p
   typedef void DestructorSkippable_;
   ::google::protobuf::internal::ArenaStringPtr explanation_;
   ::google::protobuf::int32 version_;
-  mutable int _cached_size_;
+  mutable ::google::protobuf::internal::CachedSize _cached_size_;
   friend struct ::protobuf_op_5fdef_2eproto::TableStruct;
-  friend void ::protobuf_op_5fdef_2eproto::InitDefaultsOpDeprecationImpl();
 };
 // -------------------------------------------------------------------
 
@@ -978,10 +988,10 @@ class OpList : public ::google::protobuf::Message /* @@protoc_insertion_point(cl
     return *this;
   }
   #endif
-  inline ::google::protobuf::Arena* GetArena() const PROTOBUF_FINAL {
+  inline ::google::protobuf::Arena* GetArena() const final {
     return GetArenaNoVirtual();
   }
-  inline void* GetMaybeArenaPointer() const PROTOBUF_FINAL {
+  inline void* GetMaybeArenaPointer() const final {
     return MaybeArenaPtr();
   }
   static const ::google::protobuf::Descriptor* descriptor();
@@ -992,7 +1002,7 @@ class OpList : public ::google::protobuf::Message /* @@protoc_insertion_point(cl
     return reinterpret_cast<const OpList*>(
                &_OpList_default_instance_);
   }
-  static PROTOBUF_CONSTEXPR int const kIndexInFileMessages =
+  static constexpr int kIndexInFileMessages =
     4;
 
   void UnsafeArenaSwap(OpList* other);
@@ -1003,28 +1013,33 @@ class OpList : public ::google::protobuf::Message /* @@protoc_insertion_point(cl
 
   // implements Message ----------------------------------------------
 
-  inline OpList* New() const PROTOBUF_FINAL { return New(NULL); }
+  inline OpList* New() const final {
+    return CreateMaybeMessage<OpList>(NULL);
+  }
 
-  OpList* New(::google::protobuf::Arena* arena) const PROTOBUF_FINAL;
-  void CopyFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
-  void MergeFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
+  OpList* New(::google::protobuf::Arena* arena) const final {
+    return CreateMaybeMessage<OpList>(arena);
+  }
+  void CopyFrom(const ::google::protobuf::Message& from) final;
+  void MergeFrom(const ::google::protobuf::Message& from) final;
   void CopyFrom(const OpList& from);
   void MergeFrom(const OpList& from);
-  void Clear() PROTOBUF_FINAL;
-  bool IsInitialized() const PROTOBUF_FINAL;
+  void Clear() final;
+  bool IsInitialized() const final;
 
-  size_t ByteSizeLong() const PROTOBUF_FINAL;
+  size_t ByteSizeLong() const final;
   bool MergePartialFromCodedStream(
-      ::google::protobuf::io::CodedInputStream* input) PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedInputStream* input) final;
   void SerializeWithCachedSizes(
-      ::google::protobuf::io::CodedOutputStream* output) const PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedOutputStream* output) const final;
   ::google::protobuf::uint8* InternalSerializeWithCachedSizesToArray(
-      bool deterministic, ::google::protobuf::uint8* target) const PROTOBUF_FINAL;
-  int GetCachedSize() const PROTOBUF_FINAL { return _cached_size_; }
+      bool deterministic, ::google::protobuf::uint8* target) const final;
+  int GetCachedSize() const final { return _cached_size_.Get(); }
+
   private:
   void SharedCtor();
   void SharedDtor();
-  void SetCachedSize(int size) const PROTOBUF_FINAL;
+  void SetCachedSize(int size) const final;
   void InternalSwap(OpList* other);
   protected:
   explicit OpList(::google::protobuf::Arena* arena);
@@ -1040,7 +1055,7 @@ class OpList : public ::google::protobuf::Message /* @@protoc_insertion_point(cl
   }
   public:
 
-  ::google::protobuf::Metadata GetMetadata() const PROTOBUF_FINAL;
+  ::google::protobuf::Metadata GetMetadata() const final;
 
   // nested types ----------------------------------------------------
 
@@ -1050,11 +1065,11 @@ class OpList : public ::google::protobuf::Message /* @@protoc_insertion_point(cl
   int op_size() const;
   void clear_op();
   static const int kOpFieldNumber = 1;
-  const ::opencv_tensorflow::OpDef& op(int index) const;
   ::opencv_tensorflow::OpDef* mutable_op(int index);
-  ::opencv_tensorflow::OpDef* add_op();
   ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::OpDef >*
       mutable_op();
+  const ::opencv_tensorflow::OpDef& op(int index) const;
+  ::opencv_tensorflow::OpDef* add_op();
   const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::OpDef >&
       op() const;
 
@@ -1066,9 +1081,8 @@ class OpList : public ::google::protobuf::Message /* @@protoc_insertion_point(cl
   typedef void InternalArenaConstructable_;
   typedef void DestructorSkippable_;
   ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::OpDef > op_;
-  mutable int _cached_size_;
+  mutable ::google::protobuf::internal::CachedSize _cached_size_;
   friend struct ::protobuf_op_5fdef_2eproto::TableStruct;
-  friend void ::protobuf_op_5fdef_2eproto::InitDefaultsOpListImpl();
 };
 // ===================================================================
 
@@ -1090,13 +1104,13 @@ inline const ::std::string& OpDef_ArgDef::name() const {
   return name_.Get();
 }
 inline void OpDef_ArgDef::set_name(const ::std::string& value) {
-
+  
   name_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), value, GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set:opencv_tensorflow.OpDef.ArgDef.name)
 }
 #if LANG_CXX11
 inline void OpDef_ArgDef::set_name(::std::string&& value) {
-
+  
   name_.Set(
     &::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::move(value), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_rvalue:opencv_tensorflow.OpDef.ArgDef.name)
@@ -1104,33 +1118,33 @@ inline void OpDef_ArgDef::set_name(::std::string&& value) {
 #endif
 inline void OpDef_ArgDef::set_name(const char* value) {
   GOOGLE_DCHECK(value != NULL);
-
+  
   name_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(value),
               GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_char:opencv_tensorflow.OpDef.ArgDef.name)
 }
 inline void OpDef_ArgDef::set_name(const char* value,
     size_t size) {
-
+  
   name_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(
       reinterpret_cast<const char*>(value), size), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_pointer:opencv_tensorflow.OpDef.ArgDef.name)
 }
 inline ::std::string* OpDef_ArgDef::mutable_name() {
-
+  
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.OpDef.ArgDef.name)
   return name_.Mutable(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline ::std::string* OpDef_ArgDef::release_name() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.OpDef.ArgDef.name)
-
+  
   return name_.Release(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline void OpDef_ArgDef::set_allocated_name(::std::string* name) {
   if (name != NULL) {
-
+    
   } else {
-
+    
   }
   name_.SetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), name,
       GetArenaNoVirtual());
@@ -1139,7 +1153,7 @@ inline void OpDef_ArgDef::set_allocated_name(::std::string* name) {
 inline ::std::string* OpDef_ArgDef::unsafe_arena_release_name() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.OpDef.ArgDef.name)
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
-
+  
   return name_.UnsafeArenaRelease(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       GetArenaNoVirtual());
 }
@@ -1147,9 +1161,9 @@ inline void OpDef_ArgDef::unsafe_arena_set_allocated_name(
     ::std::string* name) {
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
   if (name != NULL) {
-
+    
   } else {
-
+    
   }
   name_.UnsafeArenaSetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       name, GetArenaNoVirtual());
@@ -1165,13 +1179,13 @@ inline const ::std::string& OpDef_ArgDef::description() const {
   return description_.Get();
 }
 inline void OpDef_ArgDef::set_description(const ::std::string& value) {
-
+  
   description_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), value, GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set:opencv_tensorflow.OpDef.ArgDef.description)
 }
 #if LANG_CXX11
 inline void OpDef_ArgDef::set_description(::std::string&& value) {
-
+  
   description_.Set(
     &::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::move(value), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_rvalue:opencv_tensorflow.OpDef.ArgDef.description)
@@ -1179,33 +1193,33 @@ inline void OpDef_ArgDef::set_description(::std::string&& value) {
 #endif
 inline void OpDef_ArgDef::set_description(const char* value) {
   GOOGLE_DCHECK(value != NULL);
-
+  
   description_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(value),
               GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_char:opencv_tensorflow.OpDef.ArgDef.description)
 }
 inline void OpDef_ArgDef::set_description(const char* value,
     size_t size) {
-
+  
   description_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(
       reinterpret_cast<const char*>(value), size), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_pointer:opencv_tensorflow.OpDef.ArgDef.description)
 }
 inline ::std::string* OpDef_ArgDef::mutable_description() {
-
+  
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.OpDef.ArgDef.description)
   return description_.Mutable(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline ::std::string* OpDef_ArgDef::release_description() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.OpDef.ArgDef.description)
-
+  
   return description_.Release(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline void OpDef_ArgDef::set_allocated_description(::std::string* description) {
   if (description != NULL) {
-
+    
   } else {
-
+    
   }
   description_.SetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), description,
       GetArenaNoVirtual());
@@ -1214,7 +1228,7 @@ inline void OpDef_ArgDef::set_allocated_description(::std::string* description)
 inline ::std::string* OpDef_ArgDef::unsafe_arena_release_description() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.OpDef.ArgDef.description)
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
-
+  
   return description_.UnsafeArenaRelease(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       GetArenaNoVirtual());
 }
@@ -1222,9 +1236,9 @@ inline void OpDef_ArgDef::unsafe_arena_set_allocated_description(
     ::std::string* description) {
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
   if (description != NULL) {
-
+    
   } else {
-
+    
   }
   description_.UnsafeArenaSetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       description, GetArenaNoVirtual());
@@ -1240,7 +1254,7 @@ inline ::opencv_tensorflow::DataType OpDef_ArgDef::type() const {
   return static_cast< ::opencv_tensorflow::DataType >(type_);
 }
 inline void OpDef_ArgDef::set_type(::opencv_tensorflow::DataType value) {
-
+  
   type_ = value;
   // @@protoc_insertion_point(field_set:opencv_tensorflow.OpDef.ArgDef.type)
 }
@@ -1254,13 +1268,13 @@ inline const ::std::string& OpDef_ArgDef::type_attr() const {
   return type_attr_.Get();
 }
 inline void OpDef_ArgDef::set_type_attr(const ::std::string& value) {
-
+  
   type_attr_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), value, GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set:opencv_tensorflow.OpDef.ArgDef.type_attr)
 }
 #if LANG_CXX11
 inline void OpDef_ArgDef::set_type_attr(::std::string&& value) {
-
+  
   type_attr_.Set(
     &::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::move(value), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_rvalue:opencv_tensorflow.OpDef.ArgDef.type_attr)
@@ -1268,33 +1282,33 @@ inline void OpDef_ArgDef::set_type_attr(::std::string&& value) {
 #endif
 inline void OpDef_ArgDef::set_type_attr(const char* value) {
   GOOGLE_DCHECK(value != NULL);
-
+  
   type_attr_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(value),
               GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_char:opencv_tensorflow.OpDef.ArgDef.type_attr)
 }
 inline void OpDef_ArgDef::set_type_attr(const char* value,
     size_t size) {
-
+  
   type_attr_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(
       reinterpret_cast<const char*>(value), size), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_pointer:opencv_tensorflow.OpDef.ArgDef.type_attr)
 }
 inline ::std::string* OpDef_ArgDef::mutable_type_attr() {
-
+  
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.OpDef.ArgDef.type_attr)
   return type_attr_.Mutable(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline ::std::string* OpDef_ArgDef::release_type_attr() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.OpDef.ArgDef.type_attr)
-
+  
   return type_attr_.Release(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline void OpDef_ArgDef::set_allocated_type_attr(::std::string* type_attr) {
   if (type_attr != NULL) {
-
+    
   } else {
-
+    
   }
   type_attr_.SetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), type_attr,
       GetArenaNoVirtual());
@@ -1303,7 +1317,7 @@ inline void OpDef_ArgDef::set_allocated_type_attr(::std::string* type_attr) {
 inline ::std::string* OpDef_ArgDef::unsafe_arena_release_type_attr() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.OpDef.ArgDef.type_attr)
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
-
+  
   return type_attr_.UnsafeArenaRelease(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       GetArenaNoVirtual());
 }
@@ -1311,9 +1325,9 @@ inline void OpDef_ArgDef::unsafe_arena_set_allocated_type_attr(
     ::std::string* type_attr) {
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
   if (type_attr != NULL) {
-
+    
   } else {
-
+    
   }
   type_attr_.UnsafeArenaSetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       type_attr, GetArenaNoVirtual());
@@ -1329,13 +1343,13 @@ inline const ::std::string& OpDef_ArgDef::number_attr() const {
   return number_attr_.Get();
 }
 inline void OpDef_ArgDef::set_number_attr(const ::std::string& value) {
-
+  
   number_attr_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), value, GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set:opencv_tensorflow.OpDef.ArgDef.number_attr)
 }
 #if LANG_CXX11
 inline void OpDef_ArgDef::set_number_attr(::std::string&& value) {
-
+  
   number_attr_.Set(
     &::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::move(value), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_rvalue:opencv_tensorflow.OpDef.ArgDef.number_attr)
@@ -1343,33 +1357,33 @@ inline void OpDef_ArgDef::set_number_attr(::std::string&& value) {
 #endif
 inline void OpDef_ArgDef::set_number_attr(const char* value) {
   GOOGLE_DCHECK(value != NULL);
-
+  
   number_attr_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(value),
               GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_char:opencv_tensorflow.OpDef.ArgDef.number_attr)
 }
 inline void OpDef_ArgDef::set_number_attr(const char* value,
     size_t size) {
-
+  
   number_attr_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(
       reinterpret_cast<const char*>(value), size), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_pointer:opencv_tensorflow.OpDef.ArgDef.number_attr)
 }
 inline ::std::string* OpDef_ArgDef::mutable_number_attr() {
-
+  
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.OpDef.ArgDef.number_attr)
   return number_attr_.Mutable(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline ::std::string* OpDef_ArgDef::release_number_attr() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.OpDef.ArgDef.number_attr)
-
+  
   return number_attr_.Release(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline void OpDef_ArgDef::set_allocated_number_attr(::std::string* number_attr) {
   if (number_attr != NULL) {
-
+    
   } else {
-
+    
   }
   number_attr_.SetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), number_attr,
       GetArenaNoVirtual());
@@ -1378,7 +1392,7 @@ inline void OpDef_ArgDef::set_allocated_number_attr(::std::string* number_attr)
 inline ::std::string* OpDef_ArgDef::unsafe_arena_release_number_attr() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.OpDef.ArgDef.number_attr)
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
-
+  
   return number_attr_.UnsafeArenaRelease(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       GetArenaNoVirtual());
 }
@@ -1386,9 +1400,9 @@ inline void OpDef_ArgDef::unsafe_arena_set_allocated_number_attr(
     ::std::string* number_attr) {
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
   if (number_attr != NULL) {
-
+    
   } else {
-
+    
   }
   number_attr_.UnsafeArenaSetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       number_attr, GetArenaNoVirtual());
@@ -1404,13 +1418,13 @@ inline const ::std::string& OpDef_ArgDef::type_list_attr() const {
   return type_list_attr_.Get();
 }
 inline void OpDef_ArgDef::set_type_list_attr(const ::std::string& value) {
-
+  
   type_list_attr_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), value, GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set:opencv_tensorflow.OpDef.ArgDef.type_list_attr)
 }
 #if LANG_CXX11
 inline void OpDef_ArgDef::set_type_list_attr(::std::string&& value) {
-
+  
   type_list_attr_.Set(
     &::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::move(value), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_rvalue:opencv_tensorflow.OpDef.ArgDef.type_list_attr)
@@ -1418,33 +1432,33 @@ inline void OpDef_ArgDef::set_type_list_attr(::std::string&& value) {
 #endif
 inline void OpDef_ArgDef::set_type_list_attr(const char* value) {
   GOOGLE_DCHECK(value != NULL);
-
+  
   type_list_attr_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(value),
               GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_char:opencv_tensorflow.OpDef.ArgDef.type_list_attr)
 }
 inline void OpDef_ArgDef::set_type_list_attr(const char* value,
     size_t size) {
-
+  
   type_list_attr_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(
       reinterpret_cast<const char*>(value), size), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_pointer:opencv_tensorflow.OpDef.ArgDef.type_list_attr)
 }
 inline ::std::string* OpDef_ArgDef::mutable_type_list_attr() {
-
+  
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.OpDef.ArgDef.type_list_attr)
   return type_list_attr_.Mutable(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline ::std::string* OpDef_ArgDef::release_type_list_attr() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.OpDef.ArgDef.type_list_attr)
-
+  
   return type_list_attr_.Release(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline void OpDef_ArgDef::set_allocated_type_list_attr(::std::string* type_list_attr) {
   if (type_list_attr != NULL) {
-
+    
   } else {
-
+    
   }
   type_list_attr_.SetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), type_list_attr,
       GetArenaNoVirtual());
@@ -1453,7 +1467,7 @@ inline void OpDef_ArgDef::set_allocated_type_list_attr(::std::string* type_list_
 inline ::std::string* OpDef_ArgDef::unsafe_arena_release_type_list_attr() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.OpDef.ArgDef.type_list_attr)
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
-
+  
   return type_list_attr_.UnsafeArenaRelease(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       GetArenaNoVirtual());
 }
@@ -1461,9 +1475,9 @@ inline void OpDef_ArgDef::unsafe_arena_set_allocated_type_list_attr(
     ::std::string* type_list_attr) {
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
   if (type_list_attr != NULL) {
-
+    
   } else {
-
+    
   }
   type_list_attr_.UnsafeArenaSetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       type_list_attr, GetArenaNoVirtual());
@@ -1479,7 +1493,7 @@ inline bool OpDef_ArgDef::is_ref() const {
   return is_ref_;
 }
 inline void OpDef_ArgDef::set_is_ref(bool value) {
-
+  
   is_ref_ = value;
   // @@protoc_insertion_point(field_set:opencv_tensorflow.OpDef.ArgDef.is_ref)
 }
@@ -1497,13 +1511,13 @@ inline const ::std::string& OpDef_AttrDef::name() const {
   return name_.Get();
 }
 inline void OpDef_AttrDef::set_name(const ::std::string& value) {
-
+  
   name_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), value, GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set:opencv_tensorflow.OpDef.AttrDef.name)
 }
 #if LANG_CXX11
 inline void OpDef_AttrDef::set_name(::std::string&& value) {
-
+  
   name_.Set(
     &::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::move(value), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_rvalue:opencv_tensorflow.OpDef.AttrDef.name)
@@ -1511,33 +1525,33 @@ inline void OpDef_AttrDef::set_name(::std::string&& value) {
 #endif
 inline void OpDef_AttrDef::set_name(const char* value) {
   GOOGLE_DCHECK(value != NULL);
-
+  
   name_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(value),
               GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_char:opencv_tensorflow.OpDef.AttrDef.name)
 }
 inline void OpDef_AttrDef::set_name(const char* value,
     size_t size) {
-
+  
   name_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(
       reinterpret_cast<const char*>(value), size), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_pointer:opencv_tensorflow.OpDef.AttrDef.name)
 }
 inline ::std::string* OpDef_AttrDef::mutable_name() {
-
+  
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.OpDef.AttrDef.name)
   return name_.Mutable(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline ::std::string* OpDef_AttrDef::release_name() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.OpDef.AttrDef.name)
-
+  
   return name_.Release(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline void OpDef_AttrDef::set_allocated_name(::std::string* name) {
   if (name != NULL) {
-
+    
   } else {
-
+    
   }
   name_.SetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), name,
       GetArenaNoVirtual());
@@ -1546,7 +1560,7 @@ inline void OpDef_AttrDef::set_allocated_name(::std::string* name) {
 inline ::std::string* OpDef_AttrDef::unsafe_arena_release_name() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.OpDef.AttrDef.name)
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
-
+  
   return name_.UnsafeArenaRelease(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       GetArenaNoVirtual());
 }
@@ -1554,9 +1568,9 @@ inline void OpDef_AttrDef::unsafe_arena_set_allocated_name(
     ::std::string* name) {
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
   if (name != NULL) {
-
+    
   } else {
-
+    
   }
   name_.UnsafeArenaSetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       name, GetArenaNoVirtual());
@@ -1572,13 +1586,13 @@ inline const ::std::string& OpDef_AttrDef::type() const {
   return type_.Get();
 }
 inline void OpDef_AttrDef::set_type(const ::std::string& value) {
-
+  
   type_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), value, GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set:opencv_tensorflow.OpDef.AttrDef.type)
 }
 #if LANG_CXX11
 inline void OpDef_AttrDef::set_type(::std::string&& value) {
-
+  
   type_.Set(
     &::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::move(value), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_rvalue:opencv_tensorflow.OpDef.AttrDef.type)
@@ -1586,33 +1600,33 @@ inline void OpDef_AttrDef::set_type(::std::string&& value) {
 #endif
 inline void OpDef_AttrDef::set_type(const char* value) {
   GOOGLE_DCHECK(value != NULL);
-
+  
   type_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(value),
               GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_char:opencv_tensorflow.OpDef.AttrDef.type)
 }
 inline void OpDef_AttrDef::set_type(const char* value,
     size_t size) {
-
+  
   type_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(
       reinterpret_cast<const char*>(value), size), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_pointer:opencv_tensorflow.OpDef.AttrDef.type)
 }
 inline ::std::string* OpDef_AttrDef::mutable_type() {
-
+  
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.OpDef.AttrDef.type)
   return type_.Mutable(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline ::std::string* OpDef_AttrDef::release_type() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.OpDef.AttrDef.type)
-
+  
   return type_.Release(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline void OpDef_AttrDef::set_allocated_type(::std::string* type) {
   if (type != NULL) {
-
+    
   } else {
-
+    
   }
   type_.SetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), type,
       GetArenaNoVirtual());
@@ -1621,7 +1635,7 @@ inline void OpDef_AttrDef::set_allocated_type(::std::string* type) {
 inline ::std::string* OpDef_AttrDef::unsafe_arena_release_type() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.OpDef.AttrDef.type)
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
-
+  
   return type_.UnsafeArenaRelease(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       GetArenaNoVirtual());
 }
@@ -1629,9 +1643,9 @@ inline void OpDef_AttrDef::unsafe_arena_set_allocated_type(
     ::std::string* type) {
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
   if (type != NULL) {
-
+    
   } else {
-
+    
   }
   type_.UnsafeArenaSetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       type, GetArenaNoVirtual());
@@ -1642,6 +1656,9 @@ inline void OpDef_AttrDef::unsafe_arena_set_allocated_type(
 inline bool OpDef_AttrDef::has_default_value() const {
   return this != internal_default_instance() && default_value_ != NULL;
 }
+inline const ::opencv_tensorflow::AttrValue& OpDef_AttrDef::_internal_default_value() const {
+  return *default_value_;
+}
 inline const ::opencv_tensorflow::AttrValue& OpDef_AttrDef::default_value() const {
   const ::opencv_tensorflow::AttrValue* p = default_value_;
   // @@protoc_insertion_point(field_get:opencv_tensorflow.OpDef.AttrDef.default_value)
@@ -1650,25 +1667,26 @@ inline const ::opencv_tensorflow::AttrValue& OpDef_AttrDef::default_value() cons
 }
 inline ::opencv_tensorflow::AttrValue* OpDef_AttrDef::release_default_value() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.OpDef.AttrDef.default_value)
-
+  
   ::opencv_tensorflow::AttrValue* temp = default_value_;
   if (GetArenaNoVirtual() != NULL) {
-    temp = ::google::protobuf::internal::DuplicateIfNonNull(temp, NULL);
+    temp = ::google::protobuf::internal::DuplicateIfNonNull(temp);
   }
   default_value_ = NULL;
   return temp;
 }
 inline ::opencv_tensorflow::AttrValue* OpDef_AttrDef::unsafe_arena_release_default_value() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.OpDef.AttrDef.default_value)
-
+  
   ::opencv_tensorflow::AttrValue* temp = default_value_;
   default_value_ = NULL;
   return temp;
 }
 inline ::opencv_tensorflow::AttrValue* OpDef_AttrDef::mutable_default_value() {
-
+  
   if (default_value_ == NULL) {
-    _slow_mutable_default_value();
+    auto* p = CreateMaybeMessage<::opencv_tensorflow::AttrValue>(GetArenaNoVirtual());
+    default_value_ = p;
   }
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.OpDef.AttrDef.default_value)
   return default_value_;
@@ -1680,14 +1698,14 @@ inline void OpDef_AttrDef::set_allocated_default_value(::opencv_tensorflow::Attr
   }
   if (default_value) {
     ::google::protobuf::Arena* submessage_arena =
-      reinterpret_cast< ::google::protobuf::MessageLite*>(default_value)->GetArena();
+      reinterpret_cast<::google::protobuf::MessageLite*>(default_value)->GetArena();
     if (message_arena != submessage_arena) {
       default_value = ::google::protobuf::internal::GetOwnedMessage(
           message_arena, default_value, submessage_arena);
     }
-
+    
   } else {
-
+    
   }
   default_value_ = default_value;
   // @@protoc_insertion_point(field_set_allocated:opencv_tensorflow.OpDef.AttrDef.default_value)
@@ -1702,13 +1720,13 @@ inline const ::std::string& OpDef_AttrDef::description() const {
   return description_.Get();
 }
 inline void OpDef_AttrDef::set_description(const ::std::string& value) {
-
+  
   description_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), value, GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set:opencv_tensorflow.OpDef.AttrDef.description)
 }
 #if LANG_CXX11
 inline void OpDef_AttrDef::set_description(::std::string&& value) {
-
+  
   description_.Set(
     &::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::move(value), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_rvalue:opencv_tensorflow.OpDef.AttrDef.description)
@@ -1716,33 +1734,33 @@ inline void OpDef_AttrDef::set_description(::std::string&& value) {
 #endif
 inline void OpDef_AttrDef::set_description(const char* value) {
   GOOGLE_DCHECK(value != NULL);
-
+  
   description_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(value),
               GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_char:opencv_tensorflow.OpDef.AttrDef.description)
 }
 inline void OpDef_AttrDef::set_description(const char* value,
     size_t size) {
-
+  
   description_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(
       reinterpret_cast<const char*>(value), size), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_pointer:opencv_tensorflow.OpDef.AttrDef.description)
 }
 inline ::std::string* OpDef_AttrDef::mutable_description() {
-
+  
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.OpDef.AttrDef.description)
   return description_.Mutable(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline ::std::string* OpDef_AttrDef::release_description() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.OpDef.AttrDef.description)
-
+  
   return description_.Release(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline void OpDef_AttrDef::set_allocated_description(::std::string* description) {
   if (description != NULL) {
-
+    
   } else {
-
+    
   }
   description_.SetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), description,
       GetArenaNoVirtual());
@@ -1751,7 +1769,7 @@ inline void OpDef_AttrDef::set_allocated_description(::std::string* description)
 inline ::std::string* OpDef_AttrDef::unsafe_arena_release_description() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.OpDef.AttrDef.description)
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
-
+  
   return description_.UnsafeArenaRelease(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       GetArenaNoVirtual());
 }
@@ -1759,9 +1777,9 @@ inline void OpDef_AttrDef::unsafe_arena_set_allocated_description(
     ::std::string* description) {
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
   if (description != NULL) {
-
+    
   } else {
-
+    
   }
   description_.UnsafeArenaSetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       description, GetArenaNoVirtual());
@@ -1777,7 +1795,7 @@ inline bool OpDef_AttrDef::has_minimum() const {
   return has_minimum_;
 }
 inline void OpDef_AttrDef::set_has_minimum(bool value) {
-
+  
   has_minimum_ = value;
   // @@protoc_insertion_point(field_set:opencv_tensorflow.OpDef.AttrDef.has_minimum)
 }
@@ -1791,7 +1809,7 @@ inline ::google::protobuf::int64 OpDef_AttrDef::minimum() const {
   return minimum_;
 }
 inline void OpDef_AttrDef::set_minimum(::google::protobuf::int64 value) {
-
+  
   minimum_ = value;
   // @@protoc_insertion_point(field_set:opencv_tensorflow.OpDef.AttrDef.minimum)
 }
@@ -1800,6 +1818,9 @@ inline void OpDef_AttrDef::set_minimum(::google::protobuf::int64 value) {
 inline bool OpDef_AttrDef::has_allowed_values() const {
   return this != internal_default_instance() && allowed_values_ != NULL;
 }
+inline const ::opencv_tensorflow::AttrValue& OpDef_AttrDef::_internal_allowed_values() const {
+  return *allowed_values_;
+}
 inline const ::opencv_tensorflow::AttrValue& OpDef_AttrDef::allowed_values() const {
   const ::opencv_tensorflow::AttrValue* p = allowed_values_;
   // @@protoc_insertion_point(field_get:opencv_tensorflow.OpDef.AttrDef.allowed_values)
@@ -1808,25 +1829,26 @@ inline const ::opencv_tensorflow::AttrValue& OpDef_AttrDef::allowed_values() con
 }
 inline ::opencv_tensorflow::AttrValue* OpDef_AttrDef::release_allowed_values() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.OpDef.AttrDef.allowed_values)
-
+  
   ::opencv_tensorflow::AttrValue* temp = allowed_values_;
   if (GetArenaNoVirtual() != NULL) {
-    temp = ::google::protobuf::internal::DuplicateIfNonNull(temp, NULL);
+    temp = ::google::protobuf::internal::DuplicateIfNonNull(temp);
   }
   allowed_values_ = NULL;
   return temp;
 }
 inline ::opencv_tensorflow::AttrValue* OpDef_AttrDef::unsafe_arena_release_allowed_values() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.OpDef.AttrDef.allowed_values)
-
+  
   ::opencv_tensorflow::AttrValue* temp = allowed_values_;
   allowed_values_ = NULL;
   return temp;
 }
 inline ::opencv_tensorflow::AttrValue* OpDef_AttrDef::mutable_allowed_values() {
-
+  
   if (allowed_values_ == NULL) {
-    _slow_mutable_allowed_values();
+    auto* p = CreateMaybeMessage<::opencv_tensorflow::AttrValue>(GetArenaNoVirtual());
+    allowed_values_ = p;
   }
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.OpDef.AttrDef.allowed_values)
   return allowed_values_;
@@ -1838,14 +1860,14 @@ inline void OpDef_AttrDef::set_allocated_allowed_values(::opencv_tensorflow::Att
   }
   if (allowed_values) {
     ::google::protobuf::Arena* submessage_arena =
-      reinterpret_cast< ::google::protobuf::MessageLite*>(allowed_values)->GetArena();
+      reinterpret_cast<::google::protobuf::MessageLite*>(allowed_values)->GetArena();
     if (message_arena != submessage_arena) {
       allowed_values = ::google::protobuf::internal::GetOwnedMessage(
           message_arena, allowed_values, submessage_arena);
     }
-
+    
   } else {
-
+    
   }
   allowed_values_ = allowed_values;
   // @@protoc_insertion_point(field_set_allocated:opencv_tensorflow.OpDef.AttrDef.allowed_values)
@@ -1864,13 +1886,13 @@ inline const ::std::string& OpDef::name() const {
   return name_.Get();
 }
 inline void OpDef::set_name(const ::std::string& value) {
-
+  
   name_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), value, GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set:opencv_tensorflow.OpDef.name)
 }
 #if LANG_CXX11
 inline void OpDef::set_name(::std::string&& value) {
-
+  
   name_.Set(
     &::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::move(value), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_rvalue:opencv_tensorflow.OpDef.name)
@@ -1878,33 +1900,33 @@ inline void OpDef::set_name(::std::string&& value) {
 #endif
 inline void OpDef::set_name(const char* value) {
   GOOGLE_DCHECK(value != NULL);
-
+  
   name_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(value),
               GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_char:opencv_tensorflow.OpDef.name)
 }
 inline void OpDef::set_name(const char* value,
     size_t size) {
-
+  
   name_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(
       reinterpret_cast<const char*>(value), size), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_pointer:opencv_tensorflow.OpDef.name)
 }
 inline ::std::string* OpDef::mutable_name() {
-
+  
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.OpDef.name)
   return name_.Mutable(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline ::std::string* OpDef::release_name() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.OpDef.name)
-
+  
   return name_.Release(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline void OpDef::set_allocated_name(::std::string* name) {
   if (name != NULL) {
-
+    
   } else {
-
+    
   }
   name_.SetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), name,
       GetArenaNoVirtual());
@@ -1913,7 +1935,7 @@ inline void OpDef::set_allocated_name(::std::string* name) {
 inline ::std::string* OpDef::unsafe_arena_release_name() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.OpDef.name)
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
-
+  
   return name_.UnsafeArenaRelease(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       GetArenaNoVirtual());
 }
@@ -1921,9 +1943,9 @@ inline void OpDef::unsafe_arena_set_allocated_name(
     ::std::string* name) {
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
   if (name != NULL) {
-
+    
   } else {
-
+    
   }
   name_.UnsafeArenaSetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       name, GetArenaNoVirtual());
@@ -1937,23 +1959,23 @@ inline int OpDef::input_arg_size() const {
 inline void OpDef::clear_input_arg() {
   input_arg_.Clear();
 }
-inline const ::opencv_tensorflow::OpDef_ArgDef& OpDef::input_arg(int index) const {
-  // @@protoc_insertion_point(field_get:opencv_tensorflow.OpDef.input_arg)
-  return input_arg_.Get(index);
-}
 inline ::opencv_tensorflow::OpDef_ArgDef* OpDef::mutable_input_arg(int index) {
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.OpDef.input_arg)
   return input_arg_.Mutable(index);
 }
-inline ::opencv_tensorflow::OpDef_ArgDef* OpDef::add_input_arg() {
-  // @@protoc_insertion_point(field_add:opencv_tensorflow.OpDef.input_arg)
-  return input_arg_.Add();
-}
 inline ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::OpDef_ArgDef >*
 OpDef::mutable_input_arg() {
   // @@protoc_insertion_point(field_mutable_list:opencv_tensorflow.OpDef.input_arg)
   return &input_arg_;
 }
+inline const ::opencv_tensorflow::OpDef_ArgDef& OpDef::input_arg(int index) const {
+  // @@protoc_insertion_point(field_get:opencv_tensorflow.OpDef.input_arg)
+  return input_arg_.Get(index);
+}
+inline ::opencv_tensorflow::OpDef_ArgDef* OpDef::add_input_arg() {
+  // @@protoc_insertion_point(field_add:opencv_tensorflow.OpDef.input_arg)
+  return input_arg_.Add();
+}
 inline const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::OpDef_ArgDef >&
 OpDef::input_arg() const {
   // @@protoc_insertion_point(field_list:opencv_tensorflow.OpDef.input_arg)
@@ -1967,23 +1989,23 @@ inline int OpDef::output_arg_size() const {
 inline void OpDef::clear_output_arg() {
   output_arg_.Clear();
 }
-inline const ::opencv_tensorflow::OpDef_ArgDef& OpDef::output_arg(int index) const {
-  // @@protoc_insertion_point(field_get:opencv_tensorflow.OpDef.output_arg)
-  return output_arg_.Get(index);
-}
 inline ::opencv_tensorflow::OpDef_ArgDef* OpDef::mutable_output_arg(int index) {
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.OpDef.output_arg)
   return output_arg_.Mutable(index);
 }
-inline ::opencv_tensorflow::OpDef_ArgDef* OpDef::add_output_arg() {
-  // @@protoc_insertion_point(field_add:opencv_tensorflow.OpDef.output_arg)
-  return output_arg_.Add();
-}
 inline ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::OpDef_ArgDef >*
 OpDef::mutable_output_arg() {
   // @@protoc_insertion_point(field_mutable_list:opencv_tensorflow.OpDef.output_arg)
   return &output_arg_;
 }
+inline const ::opencv_tensorflow::OpDef_ArgDef& OpDef::output_arg(int index) const {
+  // @@protoc_insertion_point(field_get:opencv_tensorflow.OpDef.output_arg)
+  return output_arg_.Get(index);
+}
+inline ::opencv_tensorflow::OpDef_ArgDef* OpDef::add_output_arg() {
+  // @@protoc_insertion_point(field_add:opencv_tensorflow.OpDef.output_arg)
+  return output_arg_.Add();
+}
 inline const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::OpDef_ArgDef >&
 OpDef::output_arg() const {
   // @@protoc_insertion_point(field_list:opencv_tensorflow.OpDef.output_arg)
@@ -1997,23 +2019,23 @@ inline int OpDef::attr_size() const {
 inline void OpDef::clear_attr() {
   attr_.Clear();
 }
-inline const ::opencv_tensorflow::OpDef_AttrDef& OpDef::attr(int index) const {
-  // @@protoc_insertion_point(field_get:opencv_tensorflow.OpDef.attr)
-  return attr_.Get(index);
-}
 inline ::opencv_tensorflow::OpDef_AttrDef* OpDef::mutable_attr(int index) {
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.OpDef.attr)
   return attr_.Mutable(index);
 }
-inline ::opencv_tensorflow::OpDef_AttrDef* OpDef::add_attr() {
-  // @@protoc_insertion_point(field_add:opencv_tensorflow.OpDef.attr)
-  return attr_.Add();
-}
 inline ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::OpDef_AttrDef >*
 OpDef::mutable_attr() {
   // @@protoc_insertion_point(field_mutable_list:opencv_tensorflow.OpDef.attr)
   return &attr_;
 }
+inline const ::opencv_tensorflow::OpDef_AttrDef& OpDef::attr(int index) const {
+  // @@protoc_insertion_point(field_get:opencv_tensorflow.OpDef.attr)
+  return attr_.Get(index);
+}
+inline ::opencv_tensorflow::OpDef_AttrDef* OpDef::add_attr() {
+  // @@protoc_insertion_point(field_add:opencv_tensorflow.OpDef.attr)
+  return attr_.Add();
+}
 inline const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::OpDef_AttrDef >&
 OpDef::attr() const {
   // @@protoc_insertion_point(field_list:opencv_tensorflow.OpDef.attr)
@@ -2030,6 +2052,9 @@ inline void OpDef::clear_deprecation() {
   }
   deprecation_ = NULL;
 }
+inline const ::opencv_tensorflow::OpDeprecation& OpDef::_internal_deprecation() const {
+  return *deprecation_;
+}
 inline const ::opencv_tensorflow::OpDeprecation& OpDef::deprecation() const {
   const ::opencv_tensorflow::OpDeprecation* p = deprecation_;
   // @@protoc_insertion_point(field_get:opencv_tensorflow.OpDef.deprecation)
@@ -2038,25 +2063,26 @@ inline const ::opencv_tensorflow::OpDeprecation& OpDef::deprecation() const {
 }
 inline ::opencv_tensorflow::OpDeprecation* OpDef::release_deprecation() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.OpDef.deprecation)
-
+  
   ::opencv_tensorflow::OpDeprecation* temp = deprecation_;
   if (GetArenaNoVirtual() != NULL) {
-    temp = ::google::protobuf::internal::DuplicateIfNonNull(temp, NULL);
+    temp = ::google::protobuf::internal::DuplicateIfNonNull(temp);
   }
   deprecation_ = NULL;
   return temp;
 }
 inline ::opencv_tensorflow::OpDeprecation* OpDef::unsafe_arena_release_deprecation() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.OpDef.deprecation)
-
+  
   ::opencv_tensorflow::OpDeprecation* temp = deprecation_;
   deprecation_ = NULL;
   return temp;
 }
 inline ::opencv_tensorflow::OpDeprecation* OpDef::mutable_deprecation() {
-
+  
   if (deprecation_ == NULL) {
-    _slow_mutable_deprecation();
+    auto* p = CreateMaybeMessage<::opencv_tensorflow::OpDeprecation>(GetArenaNoVirtual());
+    deprecation_ = p;
   }
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.OpDef.deprecation)
   return deprecation_;
@@ -2073,9 +2099,9 @@ inline void OpDef::set_allocated_deprecation(::opencv_tensorflow::OpDeprecation*
       deprecation = ::google::protobuf::internal::GetOwnedMessage(
           message_arena, deprecation, submessage_arena);
     }
-
+    
   } else {
-
+    
   }
   deprecation_ = deprecation;
   // @@protoc_insertion_point(field_set_allocated:opencv_tensorflow.OpDef.deprecation)
@@ -2090,13 +2116,13 @@ inline const ::std::string& OpDef::summary() const {
   return summary_.Get();
 }
 inline void OpDef::set_summary(const ::std::string& value) {
-
+  
   summary_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), value, GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set:opencv_tensorflow.OpDef.summary)
 }
 #if LANG_CXX11
 inline void OpDef::set_summary(::std::string&& value) {
-
+  
   summary_.Set(
     &::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::move(value), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_rvalue:opencv_tensorflow.OpDef.summary)
@@ -2104,33 +2130,33 @@ inline void OpDef::set_summary(::std::string&& value) {
 #endif
 inline void OpDef::set_summary(const char* value) {
   GOOGLE_DCHECK(value != NULL);
-
+  
   summary_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(value),
               GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_char:opencv_tensorflow.OpDef.summary)
 }
 inline void OpDef::set_summary(const char* value,
     size_t size) {
-
+  
   summary_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(
       reinterpret_cast<const char*>(value), size), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_pointer:opencv_tensorflow.OpDef.summary)
 }
 inline ::std::string* OpDef::mutable_summary() {
-
+  
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.OpDef.summary)
   return summary_.Mutable(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline ::std::string* OpDef::release_summary() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.OpDef.summary)
-
+  
   return summary_.Release(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline void OpDef::set_allocated_summary(::std::string* summary) {
   if (summary != NULL) {
-
+    
   } else {
-
+    
   }
   summary_.SetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), summary,
       GetArenaNoVirtual());
@@ -2139,7 +2165,7 @@ inline void OpDef::set_allocated_summary(::std::string* summary) {
 inline ::std::string* OpDef::unsafe_arena_release_summary() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.OpDef.summary)
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
-
+  
   return summary_.UnsafeArenaRelease(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       GetArenaNoVirtual());
 }
@@ -2147,9 +2173,9 @@ inline void OpDef::unsafe_arena_set_allocated_summary(
     ::std::string* summary) {
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
   if (summary != NULL) {
-
+    
   } else {
-
+    
   }
   summary_.UnsafeArenaSetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       summary, GetArenaNoVirtual());
@@ -2165,13 +2191,13 @@ inline const ::std::string& OpDef::description() const {
   return description_.Get();
 }
 inline void OpDef::set_description(const ::std::string& value) {
-
+  
   description_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), value, GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set:opencv_tensorflow.OpDef.description)
 }
 #if LANG_CXX11
 inline void OpDef::set_description(::std::string&& value) {
-
+  
   description_.Set(
     &::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::move(value), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_rvalue:opencv_tensorflow.OpDef.description)
@@ -2179,33 +2205,33 @@ inline void OpDef::set_description(::std::string&& value) {
 #endif
 inline void OpDef::set_description(const char* value) {
   GOOGLE_DCHECK(value != NULL);
-
+  
   description_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(value),
               GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_char:opencv_tensorflow.OpDef.description)
 }
 inline void OpDef::set_description(const char* value,
     size_t size) {
-
+  
   description_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(
       reinterpret_cast<const char*>(value), size), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_pointer:opencv_tensorflow.OpDef.description)
 }
 inline ::std::string* OpDef::mutable_description() {
-
+  
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.OpDef.description)
   return description_.Mutable(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline ::std::string* OpDef::release_description() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.OpDef.description)
-
+  
   return description_.Release(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline void OpDef::set_allocated_description(::std::string* description) {
   if (description != NULL) {
-
+    
   } else {
-
+    
   }
   description_.SetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), description,
       GetArenaNoVirtual());
@@ -2214,7 +2240,7 @@ inline void OpDef::set_allocated_description(::std::string* description) {
 inline ::std::string* OpDef::unsafe_arena_release_description() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.OpDef.description)
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
-
+  
   return description_.UnsafeArenaRelease(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       GetArenaNoVirtual());
 }
@@ -2222,9 +2248,9 @@ inline void OpDef::unsafe_arena_set_allocated_description(
     ::std::string* description) {
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
   if (description != NULL) {
-
+    
   } else {
-
+    
   }
   description_.UnsafeArenaSetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       description, GetArenaNoVirtual());
@@ -2240,7 +2266,7 @@ inline bool OpDef::is_commutative() const {
   return is_commutative_;
 }
 inline void OpDef::set_is_commutative(bool value) {
-
+  
   is_commutative_ = value;
   // @@protoc_insertion_point(field_set:opencv_tensorflow.OpDef.is_commutative)
 }
@@ -2254,7 +2280,7 @@ inline bool OpDef::is_aggregate() const {
   return is_aggregate_;
 }
 inline void OpDef::set_is_aggregate(bool value) {
-
+  
   is_aggregate_ = value;
   // @@protoc_insertion_point(field_set:opencv_tensorflow.OpDef.is_aggregate)
 }
@@ -2268,7 +2294,7 @@ inline bool OpDef::is_stateful() const {
   return is_stateful_;
 }
 inline void OpDef::set_is_stateful(bool value) {
-
+  
   is_stateful_ = value;
   // @@protoc_insertion_point(field_set:opencv_tensorflow.OpDef.is_stateful)
 }
@@ -2282,7 +2308,7 @@ inline bool OpDef::allows_uninitialized_input() const {
   return allows_uninitialized_input_;
 }
 inline void OpDef::set_allows_uninitialized_input(bool value) {
-
+  
   allows_uninitialized_input_ = value;
   // @@protoc_insertion_point(field_set:opencv_tensorflow.OpDef.allows_uninitialized_input)
 }
@@ -2300,7 +2326,7 @@ inline ::google::protobuf::int32 OpDeprecation::version() const {
   return version_;
 }
 inline void OpDeprecation::set_version(::google::protobuf::int32 value) {
-
+  
   version_ = value;
   // @@protoc_insertion_point(field_set:opencv_tensorflow.OpDeprecation.version)
 }
@@ -2314,13 +2340,13 @@ inline const ::std::string& OpDeprecation::explanation() const {
   return explanation_.Get();
 }
 inline void OpDeprecation::set_explanation(const ::std::string& value) {
-
+  
   explanation_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), value, GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set:opencv_tensorflow.OpDeprecation.explanation)
 }
 #if LANG_CXX11
 inline void OpDeprecation::set_explanation(::std::string&& value) {
-
+  
   explanation_.Set(
     &::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::move(value), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_rvalue:opencv_tensorflow.OpDeprecation.explanation)
@@ -2328,33 +2354,33 @@ inline void OpDeprecation::set_explanation(::std::string&& value) {
 #endif
 inline void OpDeprecation::set_explanation(const char* value) {
   GOOGLE_DCHECK(value != NULL);
-
+  
   explanation_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(value),
               GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_char:opencv_tensorflow.OpDeprecation.explanation)
 }
 inline void OpDeprecation::set_explanation(const char* value,
     size_t size) {
-
+  
   explanation_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(
       reinterpret_cast<const char*>(value), size), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_pointer:opencv_tensorflow.OpDeprecation.explanation)
 }
 inline ::std::string* OpDeprecation::mutable_explanation() {
-
+  
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.OpDeprecation.explanation)
   return explanation_.Mutable(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline ::std::string* OpDeprecation::release_explanation() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.OpDeprecation.explanation)
-
+  
   return explanation_.Release(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline void OpDeprecation::set_allocated_explanation(::std::string* explanation) {
   if (explanation != NULL) {
-
+    
   } else {
-
+    
   }
   explanation_.SetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), explanation,
       GetArenaNoVirtual());
@@ -2363,7 +2389,7 @@ inline void OpDeprecation::set_allocated_explanation(::std::string* explanation)
 inline ::std::string* OpDeprecation::unsafe_arena_release_explanation() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.OpDeprecation.explanation)
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
-
+  
   return explanation_.UnsafeArenaRelease(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       GetArenaNoVirtual());
 }
@@ -2371,9 +2397,9 @@ inline void OpDeprecation::unsafe_arena_set_allocated_explanation(
     ::std::string* explanation) {
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
   if (explanation != NULL) {
-
+    
   } else {
-
+    
   }
   explanation_.UnsafeArenaSetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       explanation, GetArenaNoVirtual());
@@ -2391,23 +2417,23 @@ inline int OpList::op_size() const {
 inline void OpList::clear_op() {
   op_.Clear();
 }
-inline const ::opencv_tensorflow::OpDef& OpList::op(int index) const {
-  // @@protoc_insertion_point(field_get:opencv_tensorflow.OpList.op)
-  return op_.Get(index);
-}
 inline ::opencv_tensorflow::OpDef* OpList::mutable_op(int index) {
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.OpList.op)
   return op_.Mutable(index);
 }
-inline ::opencv_tensorflow::OpDef* OpList::add_op() {
-  // @@protoc_insertion_point(field_add:opencv_tensorflow.OpList.op)
-  return op_.Add();
-}
 inline ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::OpDef >*
 OpList::mutable_op() {
   // @@protoc_insertion_point(field_mutable_list:opencv_tensorflow.OpList.op)
   return &op_;
 }
+inline const ::opencv_tensorflow::OpDef& OpList::op(int index) const {
+  // @@protoc_insertion_point(field_get:opencv_tensorflow.OpList.op)
+  return op_.Get(index);
+}
+inline ::opencv_tensorflow::OpDef* OpList::add_op() {
+  // @@protoc_insertion_point(field_add:opencv_tensorflow.OpList.op)
+  return op_.Add();
+}
 inline const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::OpDef >&
 OpList::op() const {
   // @@protoc_insertion_point(field_list:opencv_tensorflow.OpList.op)
@@ -2432,4 +2458,4 @@ OpList::op() const {
 
 // @@protoc_insertion_point(global_scope)
 
-#endif  // PROTOBUF_op_5fdef_2eproto__INCLUDED
+#endif  // PROTOBUF_INCLUDED_op_5fdef_2eproto
diff --git a/modules/dnn/misc/tensorflow/tensor.pb.cc b/modules/dnn/misc/tensorflow/tensor.pb.cc
index 25f3a8083..7947c4c49 100644
--- a/modules/dnn/misc/tensorflow/tensor.pb.cc
+++ b/modules/dnn/misc/tensorflow/tensor.pb.cc
@@ -7,7 +7,6 @@
 
 #include <google/protobuf/stubs/common.h>
 #include <google/protobuf/stubs/port.h>
-#include <google/protobuf/stubs/once.h>
 #include <google/protobuf/io/coded_stream.h>
 #include <google/protobuf/wire_format_lite_inl.h>
 #include <google/protobuf/descriptor.h>
@@ -19,6 +18,10 @@
 #include "third_party/protobuf/version.h"
 #endif
 // @@protoc_insertion_point(includes)
+
+namespace protobuf_tensor_5fshape_2eproto {
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_tensor_5fshape_2eproto ::google::protobuf::internal::SCCInfo<1> scc_info_TensorShapeProto;
+}  // namespace protobuf_tensor_5fshape_2eproto
 namespace opencv_tensorflow {
 class TensorProtoDefaultTypeInternal {
  public:
@@ -27,15 +30,9 @@ class TensorProtoDefaultTypeInternal {
 } _TensorProto_default_instance_;
 }  // namespace opencv_tensorflow
 namespace protobuf_tensor_2eproto {
-void InitDefaultsTensorProtoImpl() {
+static void InitDefaultsTensorProto() {
   GOOGLE_PROTOBUF_VERIFY_VERSION;
 
-#ifdef GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  ::google::protobuf::internal::InitProtobufDefaultsForceUnique();
-#else
-  ::google::protobuf::internal::InitProtobufDefaults();
-#endif  // GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  protobuf_tensor_5fshape_2eproto::InitDefaultsTensorShapeProto();
   {
     void* ptr = &::opencv_tensorflow::_TensorProto_default_instance_;
     new (ptr) ::opencv_tensorflow::TensorProto();
@@ -44,9 +41,12 @@ void InitDefaultsTensorProtoImpl() {
   ::opencv_tensorflow::TensorProto::InitAsDefaultInstance();
 }
 
-void InitDefaultsTensorProto() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &InitDefaultsTensorProtoImpl);
+::google::protobuf::internal::SCCInfo<1> scc_info_TensorProto =
+    {{ATOMIC_VAR_INIT(::google::protobuf::internal::SCCInfoBase::kUninitialized), 1, InitDefaultsTensorProto}, {
+      &protobuf_tensor_5fshape_2eproto::scc_info_TensorShapeProto.base,}};
+
+void InitDefaults() {
+  ::google::protobuf::internal::InitSCC(&scc_info_TensorProto.base);
 }
 
 ::google::protobuf::Metadata file_level_metadata[1];
@@ -81,15 +81,14 @@ static ::google::protobuf::Message const * const file_default_instances[] = {
 
 void protobuf_AssignDescriptors() {
   AddDescriptors();
-  ::google::protobuf::MessageFactory* factory = NULL;
   AssignDescriptors(
-      "tensor.proto", schemas, file_default_instances, TableStruct::offsets, factory,
+      "tensor.proto", schemas, file_default_instances, TableStruct::offsets,
       file_level_metadata, NULL, NULL);
 }
 
 void protobuf_AssignDescriptorsOnce() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &protobuf_AssignDescriptors);
+  static ::google::protobuf::internal::once_flag once;
+  ::google::protobuf::internal::call_once(once, protobuf_AssignDescriptors);
 }
 
 void protobuf_RegisterTypes(const ::std::string&) GOOGLE_PROTOBUF_ATTRIBUTE_COLD;
@@ -124,8 +123,8 @@ void AddDescriptorsImpl() {
 }
 
 void AddDescriptors() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &AddDescriptorsImpl);
+  static ::google::protobuf::internal::once_flag once;
+  ::google::protobuf::internal::call_once(once, AddDescriptorsImpl);
 }
 // Force AddDescriptors() to be called at dynamic initialization time.
 struct StaticDescriptorInitializer {
@@ -142,10 +141,6 @@ void TensorProto::InitAsDefaultInstance() {
   ::opencv_tensorflow::_TensorProto_default_instance_._instance.get_mutable()->tensor_shape_ = const_cast< ::opencv_tensorflow::TensorShapeProto*>(
       ::opencv_tensorflow::TensorShapeProto::internal_default_instance());
 }
-void TensorProto::_slow_mutable_tensor_shape() {
-  tensor_shape_ = ::google::protobuf::Arena::CreateMessage< ::opencv_tensorflow::TensorShapeProto >(
-      GetArenaNoVirtual());
-}
 void TensorProto::unsafe_arena_set_allocated_tensor_shape(
     ::opencv_tensorflow::TensorShapeProto* tensor_shape) {
   if (GetArenaNoVirtual() == NULL) {
@@ -153,9 +148,9 @@ void TensorProto::unsafe_arena_set_allocated_tensor_shape(
   }
   tensor_shape_ = tensor_shape;
   if (tensor_shape) {
-
+    
   } else {
-
+    
   }
   // @@protoc_insertion_point(field_unsafe_arena_set_allocated:opencv_tensorflow.TensorProto.tensor_shape)
 }
@@ -183,9 +178,8 @@ const int TensorProto::kDcomplexValFieldNumber;
 
 TensorProto::TensorProto()
   : ::google::protobuf::Message(), _internal_metadata_(NULL) {
-  if (GOOGLE_PREDICT_TRUE(this != internal_default_instance())) {
-    ::protobuf_tensor_2eproto::InitDefaultsTensorProto();
-  }
+  ::google::protobuf::internal::InitSCC(
+      &protobuf_tensor_2eproto::scc_info_TensorProto.base);
   SharedCtor();
   // @@protoc_insertion_point(constructor:opencv_tensorflow.TensorProto)
 }
@@ -201,7 +195,7 @@ TensorProto::TensorProto(::google::protobuf::Arena* arena)
   bool_val_(arena),
   dcomplex_val_(arena),
   half_val_(arena) {
-  ::protobuf_tensor_2eproto::InitDefaultsTensorProto();
+  ::google::protobuf::internal::InitSCC(&protobuf_tensor_2eproto::scc_info_TensorProto.base);
   SharedCtor();
   RegisterArenaDtor(arena);
   // @@protoc_insertion_point(arena_constructor:opencv_tensorflow.TensorProto)
@@ -217,8 +211,7 @@ TensorProto::TensorProto(const TensorProto& from)
       int64_val_(from.int64_val_),
       bool_val_(from.bool_val_),
       dcomplex_val_(from.dcomplex_val_),
-      half_val_(from.half_val_),
-      _cached_size_(0) {
+      half_val_(from.half_val_) {
   _internal_metadata_.MergeFrom(from._internal_metadata_);
   tensor_content_.UnsafeSetDefault(&::google::protobuf::internal::GetEmptyStringAlreadyInited());
   if (from.tensor_content().size() > 0) {
@@ -241,7 +234,6 @@ void TensorProto::SharedCtor() {
   ::memset(&tensor_shape_, 0, static_cast<size_t>(
       reinterpret_cast<char*>(&version_number_) -
       reinterpret_cast<char*>(&tensor_shape_)) + sizeof(version_number_));
-  _cached_size_ = 0;
 }
 
 TensorProto::~TensorProto() {
@@ -262,9 +254,7 @@ void TensorProto::ArenaDtor(void* object) {
 void TensorProto::RegisterArenaDtor(::google::protobuf::Arena* arena) {
 }
 void TensorProto::SetCachedSize(int size) const {
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  _cached_size_.Set(size);
 }
 const ::google::protobuf::Descriptor* TensorProto::descriptor() {
   ::protobuf_tensor_2eproto::protobuf_AssignDescriptorsOnce();
@@ -272,13 +262,10 @@ const ::google::protobuf::Descriptor* TensorProto::descriptor() {
 }
 
 const TensorProto& TensorProto::default_instance() {
-  ::protobuf_tensor_2eproto::InitDefaultsTensorProto();
+  ::google::protobuf::internal::InitSCC(&protobuf_tensor_2eproto::scc_info_TensorProto.base);
   return *internal_default_instance();
 }
 
-TensorProto* TensorProto::New(::google::protobuf::Arena* arena) const {
-  return ::google::protobuf::Arena::CreateMessage<TensorProto>(arena);
-}
 
 void TensorProto::Clear() {
 // @@protoc_insertion_point(message_clear_start:opencv_tensorflow.TensorProto)
@@ -312,7 +299,7 @@ bool TensorProto::MergePartialFromCodedStream(
   ::google::protobuf::uint32 tag;
   // @@protoc_insertion_point(parse_start:opencv_tensorflow.TensorProto)
   for (;;) {
-    ::std::pair< ::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
+    ::std::pair<::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
     tag = p.first;
     if (!p.second) goto handle_unusual;
     switch (::google::protobuf::internal::WireFormatLite::GetTagFieldNumber(tag)) {
@@ -568,7 +555,7 @@ void TensorProto::SerializeWithCachedSizes(
   // .opencv_tensorflow.TensorShapeProto tensor_shape = 2;
   if (this->has_tensor_shape()) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      2, *this->tensor_shape_, output);
+      2, this->_internal_tensor_shape(), output);
   }
 
   // int32 version_number = 3;
@@ -690,7 +677,7 @@ void TensorProto::SerializeWithCachedSizes(
   if (this->has_tensor_shape()) {
     target = ::google::protobuf::internal::WireFormatLite::
       InternalWriteMessageToArray(
-        2, *this->tensor_shape_, deterministic, target);
+        2, this->_internal_tensor_shape(), deterministic, target);
   }
 
   // int32 version_number = 3;
@@ -979,7 +966,7 @@ size_t TensorProto::ByteSizeLong() const {
   if (this->has_tensor_shape()) {
     total_size += 1 +
       ::google::protobuf::internal::WireFormatLite::MessageSize(
-        *this->tensor_shape_);
+        *tensor_shape_);
   }
 
   // .opencv_tensorflow.DataType dtype = 1;
@@ -996,9 +983,7 @@ size_t TensorProto::ByteSizeLong() const {
   }
 
   int cached_size = ::google::protobuf::internal::ToCachedSize(total_size);
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = cached_size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  SetCachedSize(cached_size);
   return total_size;
 }
 
@@ -1089,18 +1074,18 @@ void TensorProto::InternalSwap(TensorProto* other) {
   float_val_.InternalSwap(&other->float_val_);
   double_val_.InternalSwap(&other->double_val_);
   int_val_.InternalSwap(&other->int_val_);
-  string_val_.InternalSwap(&other->string_val_);
+  string_val_.InternalSwap(CastToBase(&other->string_val_));
   scomplex_val_.InternalSwap(&other->scomplex_val_);
   int64_val_.InternalSwap(&other->int64_val_);
   bool_val_.InternalSwap(&other->bool_val_);
   dcomplex_val_.InternalSwap(&other->dcomplex_val_);
   half_val_.InternalSwap(&other->half_val_);
-  tensor_content_.Swap(&other->tensor_content_);
+  tensor_content_.Swap(&other->tensor_content_, &::google::protobuf::internal::GetEmptyStringAlreadyInited(),
+    GetArenaNoVirtual());
   swap(tensor_shape_, other->tensor_shape_);
   swap(dtype_, other->dtype_);
   swap(version_number_, other->version_number_);
   _internal_metadata_.Swap(&other->_internal_metadata_);
-  swap(_cached_size_, other->_cached_size_);
 }
 
 ::google::protobuf::Metadata TensorProto::GetMetadata() const {
@@ -1111,5 +1096,12 @@ void TensorProto::InternalSwap(TensorProto* other) {
 
 // @@protoc_insertion_point(namespace_scope)
 }  // namespace opencv_tensorflow
+namespace google {
+namespace protobuf {
+template<> GOOGLE_PROTOBUF_ATTRIBUTE_NOINLINE ::opencv_tensorflow::TensorProto* Arena::CreateMaybeMessage< ::opencv_tensorflow::TensorProto >(Arena* arena) {
+  return Arena::CreateMessageInternal< ::opencv_tensorflow::TensorProto >(arena);
+}
+}  // namespace protobuf
+}  // namespace google
 
 // @@protoc_insertion_point(global_scope)
diff --git a/modules/dnn/misc/tensorflow/tensor.pb.h b/modules/dnn/misc/tensorflow/tensor.pb.h
index 1a0c12c08..84e289604 100644
--- a/modules/dnn/misc/tensorflow/tensor.pb.h
+++ b/modules/dnn/misc/tensorflow/tensor.pb.h
@@ -1,19 +1,19 @@
 // Generated by the protocol buffer compiler.  DO NOT EDIT!
 // source: tensor.proto
 
-#ifndef PROTOBUF_tensor_2eproto__INCLUDED
-#define PROTOBUF_tensor_2eproto__INCLUDED
+#ifndef PROTOBUF_INCLUDED_tensor_2eproto
+#define PROTOBUF_INCLUDED_tensor_2eproto
 
 #include <string>
 
 #include <google/protobuf/stubs/common.h>
 
-#if GOOGLE_PROTOBUF_VERSION < 3005000
+#if GOOGLE_PROTOBUF_VERSION < 3006001
 #error This file was generated by a newer version of protoc which is
 #error incompatible with your Protocol Buffer headers.  Please update
 #error your headers.
 #endif
-#if 3005001 < GOOGLE_PROTOBUF_MIN_PROTOC_VERSION
+#if 3006001 < GOOGLE_PROTOBUF_MIN_PROTOC_VERSION
 #error This file was generated by an older version of protoc which is
 #error incompatible with your Protocol Buffer headers.  Please
 #error regenerate this file with a newer version of protoc.
@@ -24,6 +24,7 @@
 #include <google/protobuf/arenastring.h>
 #include <google/protobuf/generated_message_table_driven.h>
 #include <google/protobuf/generated_message_util.h>
+#include <google/protobuf/inlined_string_field.h>
 #include <google/protobuf/metadata.h>
 #include <google/protobuf/message.h>
 #include <google/protobuf/repeated_field.h>  // IWYU pragma: export
@@ -32,6 +33,7 @@
 #include "tensor_shape.pb.h"
 #include "types.pb.h"
 // @@protoc_insertion_point(includes)
+#define PROTOBUF_INTERNAL_EXPORT_protobuf_tensor_2eproto 
 
 namespace protobuf_tensor_2eproto {
 // Internal implementation detail -- do not use these members.
@@ -44,17 +46,17 @@ struct TableStruct {
   static const ::google::protobuf::uint32 offsets[];
 };
 void AddDescriptors();
-void InitDefaultsTensorProtoImpl();
-void InitDefaultsTensorProto();
-inline void InitDefaults() {
-  InitDefaultsTensorProto();
-}
 }  // namespace protobuf_tensor_2eproto
 namespace opencv_tensorflow {
 class TensorProto;
 class TensorProtoDefaultTypeInternal;
 extern TensorProtoDefaultTypeInternal _TensorProto_default_instance_;
 }  // namespace opencv_tensorflow
+namespace google {
+namespace protobuf {
+template<> ::opencv_tensorflow::TensorProto* Arena::CreateMaybeMessage<::opencv_tensorflow::TensorProto>(Arena*);
+}  // namespace protobuf
+}  // namespace google
 namespace opencv_tensorflow {
 
 // ===================================================================
@@ -85,10 +87,10 @@ class TensorProto : public ::google::protobuf::Message /* @@protoc_insertion_poi
     return *this;
   }
   #endif
-  inline ::google::protobuf::Arena* GetArena() const PROTOBUF_FINAL {
+  inline ::google::protobuf::Arena* GetArena() const final {
     return GetArenaNoVirtual();
   }
-  inline void* GetMaybeArenaPointer() const PROTOBUF_FINAL {
+  inline void* GetMaybeArenaPointer() const final {
     return MaybeArenaPtr();
   }
   static const ::google::protobuf::Descriptor* descriptor();
@@ -99,7 +101,7 @@ class TensorProto : public ::google::protobuf::Message /* @@protoc_insertion_poi
     return reinterpret_cast<const TensorProto*>(
                &_TensorProto_default_instance_);
   }
-  static PROTOBUF_CONSTEXPR int const kIndexInFileMessages =
+  static constexpr int kIndexInFileMessages =
     0;
 
   void UnsafeArenaSwap(TensorProto* other);
@@ -110,28 +112,33 @@ class TensorProto : public ::google::protobuf::Message /* @@protoc_insertion_poi
 
   // implements Message ----------------------------------------------
 
-  inline TensorProto* New() const PROTOBUF_FINAL { return New(NULL); }
+  inline TensorProto* New() const final {
+    return CreateMaybeMessage<TensorProto>(NULL);
+  }
 
-  TensorProto* New(::google::protobuf::Arena* arena) const PROTOBUF_FINAL;
-  void CopyFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
-  void MergeFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
+  TensorProto* New(::google::protobuf::Arena* arena) const final {
+    return CreateMaybeMessage<TensorProto>(arena);
+  }
+  void CopyFrom(const ::google::protobuf::Message& from) final;
+  void MergeFrom(const ::google::protobuf::Message& from) final;
   void CopyFrom(const TensorProto& from);
   void MergeFrom(const TensorProto& from);
-  void Clear() PROTOBUF_FINAL;
-  bool IsInitialized() const PROTOBUF_FINAL;
+  void Clear() final;
+  bool IsInitialized() const final;
 
-  size_t ByteSizeLong() const PROTOBUF_FINAL;
+  size_t ByteSizeLong() const final;
   bool MergePartialFromCodedStream(
-      ::google::protobuf::io::CodedInputStream* input) PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedInputStream* input) final;
   void SerializeWithCachedSizes(
-      ::google::protobuf::io::CodedOutputStream* output) const PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedOutputStream* output) const final;
   ::google::protobuf::uint8* InternalSerializeWithCachedSizesToArray(
-      bool deterministic, ::google::protobuf::uint8* target) const PROTOBUF_FINAL;
-  int GetCachedSize() const PROTOBUF_FINAL { return _cached_size_; }
+      bool deterministic, ::google::protobuf::uint8* target) const final;
+  int GetCachedSize() const final { return _cached_size_.Get(); }
+
   private:
   void SharedCtor();
   void SharedDtor();
-  void SetCachedSize(int size) const PROTOBUF_FINAL;
+  void SetCachedSize(int size) const final;
   void InternalSwap(TensorProto* other);
   protected:
   explicit TensorProto(::google::protobuf::Arena* arena);
@@ -147,7 +154,7 @@ class TensorProto : public ::google::protobuf::Message /* @@protoc_insertion_poi
   }
   public:
 
-  ::google::protobuf::Metadata GetMetadata() const PROTOBUF_FINAL;
+  ::google::protobuf::Metadata GetMetadata() const final;
 
   // nested types ----------------------------------------------------
 
@@ -299,7 +306,7 @@ class TensorProto : public ::google::protobuf::Message /* @@protoc_insertion_poi
   void clear_tensor_shape();
   static const int kTensorShapeFieldNumber = 2;
   private:
-  void _slow_mutable_tensor_shape();
+  const ::opencv_tensorflow::TensorShapeProto& _internal_tensor_shape() const;
   public:
   const ::opencv_tensorflow::TensorShapeProto& tensor_shape() const;
   ::opencv_tensorflow::TensorShapeProto* release_tensor_shape();
@@ -349,9 +356,8 @@ class TensorProto : public ::google::protobuf::Message /* @@protoc_insertion_poi
   ::opencv_tensorflow::TensorShapeProto* tensor_shape_;
   int dtype_;
   ::google::protobuf::int32 version_number_;
-  mutable int _cached_size_;
+  mutable ::google::protobuf::internal::CachedSize _cached_size_;
   friend struct ::protobuf_tensor_2eproto::TableStruct;
-  friend void ::protobuf_tensor_2eproto::InitDefaultsTensorProtoImpl();
 };
 // ===================================================================
 
@@ -373,7 +379,7 @@ inline ::opencv_tensorflow::DataType TensorProto::dtype() const {
   return static_cast< ::opencv_tensorflow::DataType >(dtype_);
 }
 inline void TensorProto::set_dtype(::opencv_tensorflow::DataType value) {
-
+  
   dtype_ = value;
   // @@protoc_insertion_point(field_set:opencv_tensorflow.TensorProto.dtype)
 }
@@ -382,6 +388,9 @@ inline void TensorProto::set_dtype(::opencv_tensorflow::DataType value) {
 inline bool TensorProto::has_tensor_shape() const {
   return this != internal_default_instance() && tensor_shape_ != NULL;
 }
+inline const ::opencv_tensorflow::TensorShapeProto& TensorProto::_internal_tensor_shape() const {
+  return *tensor_shape_;
+}
 inline const ::opencv_tensorflow::TensorShapeProto& TensorProto::tensor_shape() const {
   const ::opencv_tensorflow::TensorShapeProto* p = tensor_shape_;
   // @@protoc_insertion_point(field_get:opencv_tensorflow.TensorProto.tensor_shape)
@@ -390,25 +399,26 @@ inline const ::opencv_tensorflow::TensorShapeProto& TensorProto::tensor_shape()
 }
 inline ::opencv_tensorflow::TensorShapeProto* TensorProto::release_tensor_shape() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.TensorProto.tensor_shape)
-
+  
   ::opencv_tensorflow::TensorShapeProto* temp = tensor_shape_;
   if (GetArenaNoVirtual() != NULL) {
-    temp = ::google::protobuf::internal::DuplicateIfNonNull(temp, NULL);
+    temp = ::google::protobuf::internal::DuplicateIfNonNull(temp);
   }
   tensor_shape_ = NULL;
   return temp;
 }
 inline ::opencv_tensorflow::TensorShapeProto* TensorProto::unsafe_arena_release_tensor_shape() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.TensorProto.tensor_shape)
-
+  
   ::opencv_tensorflow::TensorShapeProto* temp = tensor_shape_;
   tensor_shape_ = NULL;
   return temp;
 }
 inline ::opencv_tensorflow::TensorShapeProto* TensorProto::mutable_tensor_shape() {
-
+  
   if (tensor_shape_ == NULL) {
-    _slow_mutable_tensor_shape();
+    auto* p = CreateMaybeMessage<::opencv_tensorflow::TensorShapeProto>(GetArenaNoVirtual());
+    tensor_shape_ = p;
   }
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.TensorProto.tensor_shape)
   return tensor_shape_;
@@ -420,14 +430,14 @@ inline void TensorProto::set_allocated_tensor_shape(::opencv_tensorflow::TensorS
   }
   if (tensor_shape) {
     ::google::protobuf::Arena* submessage_arena =
-      reinterpret_cast< ::google::protobuf::MessageLite*>(tensor_shape)->GetArena();
+      reinterpret_cast<::google::protobuf::MessageLite*>(tensor_shape)->GetArena();
     if (message_arena != submessage_arena) {
       tensor_shape = ::google::protobuf::internal::GetOwnedMessage(
           message_arena, tensor_shape, submessage_arena);
     }
-
+    
   } else {
-
+    
   }
   tensor_shape_ = tensor_shape;
   // @@protoc_insertion_point(field_set_allocated:opencv_tensorflow.TensorProto.tensor_shape)
@@ -442,7 +452,7 @@ inline ::google::protobuf::int32 TensorProto::version_number() const {
   return version_number_;
 }
 inline void TensorProto::set_version_number(::google::protobuf::int32 value) {
-
+  
   version_number_ = value;
   // @@protoc_insertion_point(field_set:opencv_tensorflow.TensorProto.version_number)
 }
@@ -456,13 +466,13 @@ inline const ::std::string& TensorProto::tensor_content() const {
   return tensor_content_.Get();
 }
 inline void TensorProto::set_tensor_content(const ::std::string& value) {
-
+  
   tensor_content_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), value, GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set:opencv_tensorflow.TensorProto.tensor_content)
 }
 #if LANG_CXX11
 inline void TensorProto::set_tensor_content(::std::string&& value) {
-
+  
   tensor_content_.Set(
     &::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::move(value), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_rvalue:opencv_tensorflow.TensorProto.tensor_content)
@@ -470,33 +480,33 @@ inline void TensorProto::set_tensor_content(::std::string&& value) {
 #endif
 inline void TensorProto::set_tensor_content(const char* value) {
   GOOGLE_DCHECK(value != NULL);
-
+  
   tensor_content_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(value),
               GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_char:opencv_tensorflow.TensorProto.tensor_content)
 }
 inline void TensorProto::set_tensor_content(const void* value,
     size_t size) {
-
+  
   tensor_content_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(
       reinterpret_cast<const char*>(value), size), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_pointer:opencv_tensorflow.TensorProto.tensor_content)
 }
 inline ::std::string* TensorProto::mutable_tensor_content() {
-
+  
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.TensorProto.tensor_content)
   return tensor_content_.Mutable(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline ::std::string* TensorProto::release_tensor_content() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.TensorProto.tensor_content)
-
+  
   return tensor_content_.Release(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline void TensorProto::set_allocated_tensor_content(::std::string* tensor_content) {
   if (tensor_content != NULL) {
-
+    
   } else {
-
+    
   }
   tensor_content_.SetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), tensor_content,
       GetArenaNoVirtual());
@@ -505,7 +515,7 @@ inline void TensorProto::set_allocated_tensor_content(::std::string* tensor_cont
 inline ::std::string* TensorProto::unsafe_arena_release_tensor_content() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.TensorProto.tensor_content)
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
-
+  
   return tensor_content_.UnsafeArenaRelease(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       GetArenaNoVirtual());
 }
@@ -513,9 +523,9 @@ inline void TensorProto::unsafe_arena_set_allocated_tensor_content(
     ::std::string* tensor_content) {
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
   if (tensor_content != NULL) {
-
+    
   } else {
-
+    
   }
   tensor_content_.UnsafeArenaSetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       tensor_content, GetArenaNoVirtual());
@@ -841,4 +851,4 @@ TensorProto::mutable_dcomplex_val() {
 
 // @@protoc_insertion_point(global_scope)
 
-#endif  // PROTOBUF_tensor_2eproto__INCLUDED
+#endif  // PROTOBUF_INCLUDED_tensor_2eproto
diff --git a/modules/dnn/misc/tensorflow/tensor_shape.pb.cc b/modules/dnn/misc/tensorflow/tensor_shape.pb.cc
index c55c202c7..73638b920 100644
--- a/modules/dnn/misc/tensorflow/tensor_shape.pb.cc
+++ b/modules/dnn/misc/tensorflow/tensor_shape.pb.cc
@@ -7,7 +7,6 @@
 
 #include <google/protobuf/stubs/common.h>
 #include <google/protobuf/stubs/port.h>
-#include <google/protobuf/stubs/once.h>
 #include <google/protobuf/io/coded_stream.h>
 #include <google/protobuf/wire_format_lite_inl.h>
 #include <google/protobuf/descriptor.h>
@@ -19,6 +18,10 @@
 #include "third_party/protobuf/version.h"
 #endif
 // @@protoc_insertion_point(includes)
+
+namespace protobuf_tensor_5fshape_2eproto {
+extern PROTOBUF_INTERNAL_EXPORT_protobuf_tensor_5fshape_2eproto ::google::protobuf::internal::SCCInfo<0> scc_info_TensorShapeProto_Dim;
+}  // namespace protobuf_tensor_5fshape_2eproto
 namespace opencv_tensorflow {
 class TensorShapeProto_DimDefaultTypeInternal {
  public:
@@ -32,14 +35,9 @@ class TensorShapeProtoDefaultTypeInternal {
 } _TensorShapeProto_default_instance_;
 }  // namespace opencv_tensorflow
 namespace protobuf_tensor_5fshape_2eproto {
-void InitDefaultsTensorShapeProto_DimImpl() {
+static void InitDefaultsTensorShapeProto_Dim() {
   GOOGLE_PROTOBUF_VERIFY_VERSION;
 
-#ifdef GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  ::google::protobuf::internal::InitProtobufDefaultsForceUnique();
-#else
-  ::google::protobuf::internal::InitProtobufDefaults();
-#endif  // GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
   {
     void* ptr = &::opencv_tensorflow::_TensorShapeProto_Dim_default_instance_;
     new (ptr) ::opencv_tensorflow::TensorShapeProto_Dim();
@@ -48,20 +46,12 @@ void InitDefaultsTensorShapeProto_DimImpl() {
   ::opencv_tensorflow::TensorShapeProto_Dim::InitAsDefaultInstance();
 }
 
-void InitDefaultsTensorShapeProto_Dim() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &InitDefaultsTensorShapeProto_DimImpl);
-}
+::google::protobuf::internal::SCCInfo<0> scc_info_TensorShapeProto_Dim =
+    {{ATOMIC_VAR_INIT(::google::protobuf::internal::SCCInfoBase::kUninitialized), 0, InitDefaultsTensorShapeProto_Dim}, {}};
 
-void InitDefaultsTensorShapeProtoImpl() {
+static void InitDefaultsTensorShapeProto() {
   GOOGLE_PROTOBUF_VERIFY_VERSION;
 
-#ifdef GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  ::google::protobuf::internal::InitProtobufDefaultsForceUnique();
-#else
-  ::google::protobuf::internal::InitProtobufDefaults();
-#endif  // GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  protobuf_tensor_5fshape_2eproto::InitDefaultsTensorShapeProto_Dim();
   {
     void* ptr = &::opencv_tensorflow::_TensorShapeProto_default_instance_;
     new (ptr) ::opencv_tensorflow::TensorShapeProto();
@@ -70,9 +60,13 @@ void InitDefaultsTensorShapeProtoImpl() {
   ::opencv_tensorflow::TensorShapeProto::InitAsDefaultInstance();
 }
 
-void InitDefaultsTensorShapeProto() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &InitDefaultsTensorShapeProtoImpl);
+::google::protobuf::internal::SCCInfo<1> scc_info_TensorShapeProto =
+    {{ATOMIC_VAR_INIT(::google::protobuf::internal::SCCInfoBase::kUninitialized), 1, InitDefaultsTensorShapeProto}, {
+      &protobuf_tensor_5fshape_2eproto::scc_info_TensorShapeProto_Dim.base,}};
+
+void InitDefaults() {
+  ::google::protobuf::internal::InitSCC(&scc_info_TensorShapeProto_Dim.base);
+  ::google::protobuf::internal::InitSCC(&scc_info_TensorShapeProto.base);
 }
 
 ::google::protobuf::Metadata file_level_metadata[2];
@@ -105,15 +99,14 @@ static ::google::protobuf::Message const * const file_default_instances[] = {
 
 void protobuf_AssignDescriptors() {
   AddDescriptors();
-  ::google::protobuf::MessageFactory* factory = NULL;
   AssignDescriptors(
-      "tensor_shape.proto", schemas, file_default_instances, TableStruct::offsets, factory,
+      "tensor_shape.proto", schemas, file_default_instances, TableStruct::offsets,
       file_level_metadata, NULL, NULL);
 }
 
 void protobuf_AssignDescriptorsOnce() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &protobuf_AssignDescriptors);
+  static ::google::protobuf::internal::once_flag once;
+  ::google::protobuf::internal::call_once(once, protobuf_AssignDescriptors);
 }
 
 void protobuf_RegisterTypes(const ::std::string&) GOOGLE_PROTOBUF_ATTRIBUTE_COLD;
@@ -139,8 +132,8 @@ void AddDescriptorsImpl() {
 }
 
 void AddDescriptors() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &AddDescriptorsImpl);
+  static ::google::protobuf::internal::once_flag once;
+  ::google::protobuf::internal::call_once(once, AddDescriptorsImpl);
 }
 // Force AddDescriptors() to be called at dynamic initialization time.
 struct StaticDescriptorInitializer {
@@ -162,24 +155,22 @@ const int TensorShapeProto_Dim::kNameFieldNumber;
 
 TensorShapeProto_Dim::TensorShapeProto_Dim()
   : ::google::protobuf::Message(), _internal_metadata_(NULL) {
-  if (GOOGLE_PREDICT_TRUE(this != internal_default_instance())) {
-    ::protobuf_tensor_5fshape_2eproto::InitDefaultsTensorShapeProto_Dim();
-  }
+  ::google::protobuf::internal::InitSCC(
+      &protobuf_tensor_5fshape_2eproto::scc_info_TensorShapeProto_Dim.base);
   SharedCtor();
   // @@protoc_insertion_point(constructor:opencv_tensorflow.TensorShapeProto.Dim)
 }
 TensorShapeProto_Dim::TensorShapeProto_Dim(::google::protobuf::Arena* arena)
   : ::google::protobuf::Message(),
   _internal_metadata_(arena) {
-  ::protobuf_tensor_5fshape_2eproto::InitDefaultsTensorShapeProto_Dim();
+  ::google::protobuf::internal::InitSCC(&protobuf_tensor_5fshape_2eproto::scc_info_TensorShapeProto_Dim.base);
   SharedCtor();
   RegisterArenaDtor(arena);
   // @@protoc_insertion_point(arena_constructor:opencv_tensorflow.TensorShapeProto.Dim)
 }
 TensorShapeProto_Dim::TensorShapeProto_Dim(const TensorShapeProto_Dim& from)
   : ::google::protobuf::Message(),
-      _internal_metadata_(NULL),
-      _cached_size_(0) {
+      _internal_metadata_(NULL) {
   _internal_metadata_.MergeFrom(from._internal_metadata_);
   name_.UnsafeSetDefault(&::google::protobuf::internal::GetEmptyStringAlreadyInited());
   if (from.name().size() > 0) {
@@ -193,7 +184,6 @@ TensorShapeProto_Dim::TensorShapeProto_Dim(const TensorShapeProto_Dim& from)
 void TensorShapeProto_Dim::SharedCtor() {
   name_.UnsafeSetDefault(&::google::protobuf::internal::GetEmptyStringAlreadyInited());
   size_ = GOOGLE_LONGLONG(0);
-  _cached_size_ = 0;
 }
 
 TensorShapeProto_Dim::~TensorShapeProto_Dim() {
@@ -213,9 +203,7 @@ void TensorShapeProto_Dim::ArenaDtor(void* object) {
 void TensorShapeProto_Dim::RegisterArenaDtor(::google::protobuf::Arena* arena) {
 }
 void TensorShapeProto_Dim::SetCachedSize(int size) const {
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  _cached_size_.Set(size);
 }
 const ::google::protobuf::Descriptor* TensorShapeProto_Dim::descriptor() {
   ::protobuf_tensor_5fshape_2eproto::protobuf_AssignDescriptorsOnce();
@@ -223,13 +211,10 @@ const ::google::protobuf::Descriptor* TensorShapeProto_Dim::descriptor() {
 }
 
 const TensorShapeProto_Dim& TensorShapeProto_Dim::default_instance() {
-  ::protobuf_tensor_5fshape_2eproto::InitDefaultsTensorShapeProto_Dim();
+  ::google::protobuf::internal::InitSCC(&protobuf_tensor_5fshape_2eproto::scc_info_TensorShapeProto_Dim.base);
   return *internal_default_instance();
 }
 
-TensorShapeProto_Dim* TensorShapeProto_Dim::New(::google::protobuf::Arena* arena) const {
-  return ::google::protobuf::Arena::CreateMessage<TensorShapeProto_Dim>(arena);
-}
 
 void TensorShapeProto_Dim::Clear() {
 // @@protoc_insertion_point(message_clear_start:opencv_tensorflow.TensorShapeProto.Dim)
@@ -248,7 +233,7 @@ bool TensorShapeProto_Dim::MergePartialFromCodedStream(
   ::google::protobuf::uint32 tag;
   // @@protoc_insertion_point(parse_start:opencv_tensorflow.TensorShapeProto.Dim)
   for (;;) {
-    ::std::pair< ::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
+    ::std::pair<::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
     tag = p.first;
     if (!p.second) goto handle_unusual;
     switch (::google::protobuf::internal::WireFormatLite::GetTagFieldNumber(tag)) {
@@ -385,9 +370,7 @@ size_t TensorShapeProto_Dim::ByteSizeLong() const {
   }
 
   int cached_size = ::google::protobuf::internal::ToCachedSize(total_size);
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = cached_size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  SetCachedSize(cached_size);
   return total_size;
 }
 
@@ -460,10 +443,10 @@ void TensorShapeProto_Dim::UnsafeArenaSwap(TensorShapeProto_Dim* other) {
 }
 void TensorShapeProto_Dim::InternalSwap(TensorShapeProto_Dim* other) {
   using std::swap;
-  name_.Swap(&other->name_);
+  name_.Swap(&other->name_, &::google::protobuf::internal::GetEmptyStringAlreadyInited(),
+    GetArenaNoVirtual());
   swap(size_, other->size_);
   _internal_metadata_.Swap(&other->_internal_metadata_);
-  swap(_cached_size_, other->_cached_size_);
 }
 
 ::google::protobuf::Metadata TensorShapeProto_Dim::GetMetadata() const {
@@ -483,9 +466,8 @@ const int TensorShapeProto::kUnknownRankFieldNumber;
 
 TensorShapeProto::TensorShapeProto()
   : ::google::protobuf::Message(), _internal_metadata_(NULL) {
-  if (GOOGLE_PREDICT_TRUE(this != internal_default_instance())) {
-    ::protobuf_tensor_5fshape_2eproto::InitDefaultsTensorShapeProto();
-  }
+  ::google::protobuf::internal::InitSCC(
+      &protobuf_tensor_5fshape_2eproto::scc_info_TensorShapeProto.base);
   SharedCtor();
   // @@protoc_insertion_point(constructor:opencv_tensorflow.TensorShapeProto)
 }
@@ -493,7 +475,7 @@ TensorShapeProto::TensorShapeProto(::google::protobuf::Arena* arena)
   : ::google::protobuf::Message(),
   _internal_metadata_(arena),
   dim_(arena) {
-  ::protobuf_tensor_5fshape_2eproto::InitDefaultsTensorShapeProto();
+  ::google::protobuf::internal::InitSCC(&protobuf_tensor_5fshape_2eproto::scc_info_TensorShapeProto.base);
   SharedCtor();
   RegisterArenaDtor(arena);
   // @@protoc_insertion_point(arena_constructor:opencv_tensorflow.TensorShapeProto)
@@ -501,8 +483,7 @@ TensorShapeProto::TensorShapeProto(::google::protobuf::Arena* arena)
 TensorShapeProto::TensorShapeProto(const TensorShapeProto& from)
   : ::google::protobuf::Message(),
       _internal_metadata_(NULL),
-      dim_(from.dim_),
-      _cached_size_(0) {
+      dim_(from.dim_) {
   _internal_metadata_.MergeFrom(from._internal_metadata_);
   unknown_rank_ = from.unknown_rank_;
   // @@protoc_insertion_point(copy_constructor:opencv_tensorflow.TensorShapeProto)
@@ -510,7 +491,6 @@ TensorShapeProto::TensorShapeProto(const TensorShapeProto& from)
 
 void TensorShapeProto::SharedCtor() {
   unknown_rank_ = false;
-  _cached_size_ = 0;
 }
 
 TensorShapeProto::~TensorShapeProto() {
@@ -529,9 +509,7 @@ void TensorShapeProto::ArenaDtor(void* object) {
 void TensorShapeProto::RegisterArenaDtor(::google::protobuf::Arena* arena) {
 }
 void TensorShapeProto::SetCachedSize(int size) const {
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  _cached_size_.Set(size);
 }
 const ::google::protobuf::Descriptor* TensorShapeProto::descriptor() {
   ::protobuf_tensor_5fshape_2eproto::protobuf_AssignDescriptorsOnce();
@@ -539,13 +517,10 @@ const ::google::protobuf::Descriptor* TensorShapeProto::descriptor() {
 }
 
 const TensorShapeProto& TensorShapeProto::default_instance() {
-  ::protobuf_tensor_5fshape_2eproto::InitDefaultsTensorShapeProto();
+  ::google::protobuf::internal::InitSCC(&protobuf_tensor_5fshape_2eproto::scc_info_TensorShapeProto.base);
   return *internal_default_instance();
 }
 
-TensorShapeProto* TensorShapeProto::New(::google::protobuf::Arena* arena) const {
-  return ::google::protobuf::Arena::CreateMessage<TensorShapeProto>(arena);
-}
 
 void TensorShapeProto::Clear() {
 // @@protoc_insertion_point(message_clear_start:opencv_tensorflow.TensorShapeProto)
@@ -564,7 +539,7 @@ bool TensorShapeProto::MergePartialFromCodedStream(
   ::google::protobuf::uint32 tag;
   // @@protoc_insertion_point(parse_start:opencv_tensorflow.TensorShapeProto)
   for (;;) {
-    ::std::pair< ::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
+    ::std::pair<::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
     tag = p.first;
     if (!p.second) goto handle_unusual;
     switch (::google::protobuf::internal::WireFormatLite::GetTagFieldNumber(tag)) {
@@ -572,7 +547,8 @@ bool TensorShapeProto::MergePartialFromCodedStream(
       case 2: {
         if (static_cast< ::google::protobuf::uint8>(tag) ==
             static_cast< ::google::protobuf::uint8>(18u /* 18 & 0xFF */)) {
-          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(input, add_dim()));
+          DO_(::google::protobuf::internal::WireFormatLite::ReadMessage(
+                input, add_dim()));
         } else {
           goto handle_unusual;
         }
@@ -623,7 +599,9 @@ void TensorShapeProto::SerializeWithCachedSizes(
   for (unsigned int i = 0,
       n = static_cast<unsigned int>(this->dim_size()); i < n; i++) {
     ::google::protobuf::internal::WireFormatLite::WriteMessageMaybeToArray(
-      2, this->dim(static_cast<int>(i)), output);
+      2,
+      this->dim(static_cast<int>(i)),
+      output);
   }
 
   // bool unknown_rank = 3;
@@ -692,9 +670,7 @@ size_t TensorShapeProto::ByteSizeLong() const {
   }
 
   int cached_size = ::google::protobuf::internal::ToCachedSize(total_size);
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = cached_size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  SetCachedSize(cached_size);
   return total_size;
 }
 
@@ -765,10 +741,9 @@ void TensorShapeProto::UnsafeArenaSwap(TensorShapeProto* other) {
 }
 void TensorShapeProto::InternalSwap(TensorShapeProto* other) {
   using std::swap;
-  dim_.InternalSwap(&other->dim_);
+  CastToBase(&dim_)->InternalSwap(CastToBase(&other->dim_));
   swap(unknown_rank_, other->unknown_rank_);
   _internal_metadata_.Swap(&other->_internal_metadata_);
-  swap(_cached_size_, other->_cached_size_);
 }
 
 ::google::protobuf::Metadata TensorShapeProto::GetMetadata() const {
@@ -779,5 +754,15 @@ void TensorShapeProto::InternalSwap(TensorShapeProto* other) {
 
 // @@protoc_insertion_point(namespace_scope)
 }  // namespace opencv_tensorflow
+namespace google {
+namespace protobuf {
+template<> GOOGLE_PROTOBUF_ATTRIBUTE_NOINLINE ::opencv_tensorflow::TensorShapeProto_Dim* Arena::CreateMaybeMessage< ::opencv_tensorflow::TensorShapeProto_Dim >(Arena* arena) {
+  return Arena::CreateMessageInternal< ::opencv_tensorflow::TensorShapeProto_Dim >(arena);
+}
+template<> GOOGLE_PROTOBUF_ATTRIBUTE_NOINLINE ::opencv_tensorflow::TensorShapeProto* Arena::CreateMaybeMessage< ::opencv_tensorflow::TensorShapeProto >(Arena* arena) {
+  return Arena::CreateMessageInternal< ::opencv_tensorflow::TensorShapeProto >(arena);
+}
+}  // namespace protobuf
+}  // namespace google
 
 // @@protoc_insertion_point(global_scope)
diff --git a/modules/dnn/misc/tensorflow/tensor_shape.pb.h b/modules/dnn/misc/tensorflow/tensor_shape.pb.h
index eb9b58aee..13a40d1b5 100644
--- a/modules/dnn/misc/tensorflow/tensor_shape.pb.h
+++ b/modules/dnn/misc/tensorflow/tensor_shape.pb.h
@@ -1,19 +1,19 @@
 // Generated by the protocol buffer compiler.  DO NOT EDIT!
 // source: tensor_shape.proto
 
-#ifndef PROTOBUF_tensor_5fshape_2eproto__INCLUDED
-#define PROTOBUF_tensor_5fshape_2eproto__INCLUDED
+#ifndef PROTOBUF_INCLUDED_tensor_5fshape_2eproto
+#define PROTOBUF_INCLUDED_tensor_5fshape_2eproto
 
 #include <string>
 
 #include <google/protobuf/stubs/common.h>
 
-#if GOOGLE_PROTOBUF_VERSION < 3005000
+#if GOOGLE_PROTOBUF_VERSION < 3006001
 #error This file was generated by a newer version of protoc which is
 #error incompatible with your Protocol Buffer headers.  Please update
 #error your headers.
 #endif
-#if 3005001 < GOOGLE_PROTOBUF_MIN_PROTOC_VERSION
+#if 3006001 < GOOGLE_PROTOBUF_MIN_PROTOC_VERSION
 #error This file was generated by an older version of protoc which is
 #error incompatible with your Protocol Buffer headers.  Please
 #error regenerate this file with a newer version of protoc.
@@ -24,12 +24,14 @@
 #include <google/protobuf/arenastring.h>
 #include <google/protobuf/generated_message_table_driven.h>
 #include <google/protobuf/generated_message_util.h>
+#include <google/protobuf/inlined_string_field.h>
 #include <google/protobuf/metadata.h>
 #include <google/protobuf/message.h>
 #include <google/protobuf/repeated_field.h>  // IWYU pragma: export
 #include <google/protobuf/extension_set.h>  // IWYU pragma: export
 #include <google/protobuf/unknown_field_set.h>
 // @@protoc_insertion_point(includes)
+#define PROTOBUF_INTERNAL_EXPORT_protobuf_tensor_5fshape_2eproto 
 
 namespace protobuf_tensor_5fshape_2eproto {
 // Internal implementation detail -- do not use these members.
@@ -42,14 +44,6 @@ struct TableStruct {
   static const ::google::protobuf::uint32 offsets[];
 };
 void AddDescriptors();
-void InitDefaultsTensorShapeProto_DimImpl();
-void InitDefaultsTensorShapeProto_Dim();
-void InitDefaultsTensorShapeProtoImpl();
-void InitDefaultsTensorShapeProto();
-inline void InitDefaults() {
-  InitDefaultsTensorShapeProto_Dim();
-  InitDefaultsTensorShapeProto();
-}
 }  // namespace protobuf_tensor_5fshape_2eproto
 namespace opencv_tensorflow {
 class TensorShapeProto;
@@ -59,6 +53,12 @@ class TensorShapeProto_Dim;
 class TensorShapeProto_DimDefaultTypeInternal;
 extern TensorShapeProto_DimDefaultTypeInternal _TensorShapeProto_Dim_default_instance_;
 }  // namespace opencv_tensorflow
+namespace google {
+namespace protobuf {
+template<> ::opencv_tensorflow::TensorShapeProto* Arena::CreateMaybeMessage<::opencv_tensorflow::TensorShapeProto>(Arena*);
+template<> ::opencv_tensorflow::TensorShapeProto_Dim* Arena::CreateMaybeMessage<::opencv_tensorflow::TensorShapeProto_Dim>(Arena*);
+}  // namespace protobuf
+}  // namespace google
 namespace opencv_tensorflow {
 
 // ===================================================================
@@ -89,10 +89,10 @@ class TensorShapeProto_Dim : public ::google::protobuf::Message /* @@protoc_inse
     return *this;
   }
   #endif
-  inline ::google::protobuf::Arena* GetArena() const PROTOBUF_FINAL {
+  inline ::google::protobuf::Arena* GetArena() const final {
     return GetArenaNoVirtual();
   }
-  inline void* GetMaybeArenaPointer() const PROTOBUF_FINAL {
+  inline void* GetMaybeArenaPointer() const final {
     return MaybeArenaPtr();
   }
   static const ::google::protobuf::Descriptor* descriptor();
@@ -103,7 +103,7 @@ class TensorShapeProto_Dim : public ::google::protobuf::Message /* @@protoc_inse
     return reinterpret_cast<const TensorShapeProto_Dim*>(
                &_TensorShapeProto_Dim_default_instance_);
   }
-  static PROTOBUF_CONSTEXPR int const kIndexInFileMessages =
+  static constexpr int kIndexInFileMessages =
     0;
 
   void UnsafeArenaSwap(TensorShapeProto_Dim* other);
@@ -114,28 +114,33 @@ class TensorShapeProto_Dim : public ::google::protobuf::Message /* @@protoc_inse
 
   // implements Message ----------------------------------------------
 
-  inline TensorShapeProto_Dim* New() const PROTOBUF_FINAL { return New(NULL); }
+  inline TensorShapeProto_Dim* New() const final {
+    return CreateMaybeMessage<TensorShapeProto_Dim>(NULL);
+  }
 
-  TensorShapeProto_Dim* New(::google::protobuf::Arena* arena) const PROTOBUF_FINAL;
-  void CopyFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
-  void MergeFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
+  TensorShapeProto_Dim* New(::google::protobuf::Arena* arena) const final {
+    return CreateMaybeMessage<TensorShapeProto_Dim>(arena);
+  }
+  void CopyFrom(const ::google::protobuf::Message& from) final;
+  void MergeFrom(const ::google::protobuf::Message& from) final;
   void CopyFrom(const TensorShapeProto_Dim& from);
   void MergeFrom(const TensorShapeProto_Dim& from);
-  void Clear() PROTOBUF_FINAL;
-  bool IsInitialized() const PROTOBUF_FINAL;
+  void Clear() final;
+  bool IsInitialized() const final;
 
-  size_t ByteSizeLong() const PROTOBUF_FINAL;
+  size_t ByteSizeLong() const final;
   bool MergePartialFromCodedStream(
-      ::google::protobuf::io::CodedInputStream* input) PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedInputStream* input) final;
   void SerializeWithCachedSizes(
-      ::google::protobuf::io::CodedOutputStream* output) const PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedOutputStream* output) const final;
   ::google::protobuf::uint8* InternalSerializeWithCachedSizesToArray(
-      bool deterministic, ::google::protobuf::uint8* target) const PROTOBUF_FINAL;
-  int GetCachedSize() const PROTOBUF_FINAL { return _cached_size_; }
+      bool deterministic, ::google::protobuf::uint8* target) const final;
+  int GetCachedSize() const final { return _cached_size_.Get(); }
+
   private:
   void SharedCtor();
   void SharedDtor();
-  void SetCachedSize(int size) const PROTOBUF_FINAL;
+  void SetCachedSize(int size) const final;
   void InternalSwap(TensorShapeProto_Dim* other);
   protected:
   explicit TensorShapeProto_Dim(::google::protobuf::Arena* arena);
@@ -151,7 +156,7 @@ class TensorShapeProto_Dim : public ::google::protobuf::Message /* @@protoc_inse
   }
   public:
 
-  ::google::protobuf::Metadata GetMetadata() const PROTOBUF_FINAL;
+  ::google::protobuf::Metadata GetMetadata() const final;
 
   // nested types ----------------------------------------------------
 
@@ -195,9 +200,8 @@ class TensorShapeProto_Dim : public ::google::protobuf::Message /* @@protoc_inse
   typedef void DestructorSkippable_;
   ::google::protobuf::internal::ArenaStringPtr name_;
   ::google::protobuf::int64 size_;
-  mutable int _cached_size_;
+  mutable ::google::protobuf::internal::CachedSize _cached_size_;
   friend struct ::protobuf_tensor_5fshape_2eproto::TableStruct;
-  friend void ::protobuf_tensor_5fshape_2eproto::InitDefaultsTensorShapeProto_DimImpl();
 };
 // -------------------------------------------------------------------
 
@@ -227,10 +231,10 @@ class TensorShapeProto : public ::google::protobuf::Message /* @@protoc_insertio
     return *this;
   }
   #endif
-  inline ::google::protobuf::Arena* GetArena() const PROTOBUF_FINAL {
+  inline ::google::protobuf::Arena* GetArena() const final {
     return GetArenaNoVirtual();
   }
-  inline void* GetMaybeArenaPointer() const PROTOBUF_FINAL {
+  inline void* GetMaybeArenaPointer() const final {
     return MaybeArenaPtr();
   }
   static const ::google::protobuf::Descriptor* descriptor();
@@ -241,7 +245,7 @@ class TensorShapeProto : public ::google::protobuf::Message /* @@protoc_insertio
     return reinterpret_cast<const TensorShapeProto*>(
                &_TensorShapeProto_default_instance_);
   }
-  static PROTOBUF_CONSTEXPR int const kIndexInFileMessages =
+  static constexpr int kIndexInFileMessages =
     1;
 
   void UnsafeArenaSwap(TensorShapeProto* other);
@@ -252,28 +256,33 @@ class TensorShapeProto : public ::google::protobuf::Message /* @@protoc_insertio
 
   // implements Message ----------------------------------------------
 
-  inline TensorShapeProto* New() const PROTOBUF_FINAL { return New(NULL); }
+  inline TensorShapeProto* New() const final {
+    return CreateMaybeMessage<TensorShapeProto>(NULL);
+  }
 
-  TensorShapeProto* New(::google::protobuf::Arena* arena) const PROTOBUF_FINAL;
-  void CopyFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
-  void MergeFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
+  TensorShapeProto* New(::google::protobuf::Arena* arena) const final {
+    return CreateMaybeMessage<TensorShapeProto>(arena);
+  }
+  void CopyFrom(const ::google::protobuf::Message& from) final;
+  void MergeFrom(const ::google::protobuf::Message& from) final;
   void CopyFrom(const TensorShapeProto& from);
   void MergeFrom(const TensorShapeProto& from);
-  void Clear() PROTOBUF_FINAL;
-  bool IsInitialized() const PROTOBUF_FINAL;
+  void Clear() final;
+  bool IsInitialized() const final;
 
-  size_t ByteSizeLong() const PROTOBUF_FINAL;
+  size_t ByteSizeLong() const final;
   bool MergePartialFromCodedStream(
-      ::google::protobuf::io::CodedInputStream* input) PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedInputStream* input) final;
   void SerializeWithCachedSizes(
-      ::google::protobuf::io::CodedOutputStream* output) const PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedOutputStream* output) const final;
   ::google::protobuf::uint8* InternalSerializeWithCachedSizesToArray(
-      bool deterministic, ::google::protobuf::uint8* target) const PROTOBUF_FINAL;
-  int GetCachedSize() const PROTOBUF_FINAL { return _cached_size_; }
+      bool deterministic, ::google::protobuf::uint8* target) const final;
+  int GetCachedSize() const final { return _cached_size_.Get(); }
+
   private:
   void SharedCtor();
   void SharedDtor();
-  void SetCachedSize(int size) const PROTOBUF_FINAL;
+  void SetCachedSize(int size) const final;
   void InternalSwap(TensorShapeProto* other);
   protected:
   explicit TensorShapeProto(::google::protobuf::Arena* arena);
@@ -289,7 +298,7 @@ class TensorShapeProto : public ::google::protobuf::Message /* @@protoc_insertio
   }
   public:
 
-  ::google::protobuf::Metadata GetMetadata() const PROTOBUF_FINAL;
+  ::google::protobuf::Metadata GetMetadata() const final;
 
   // nested types ----------------------------------------------------
 
@@ -301,11 +310,11 @@ class TensorShapeProto : public ::google::protobuf::Message /* @@protoc_insertio
   int dim_size() const;
   void clear_dim();
   static const int kDimFieldNumber = 2;
-  const ::opencv_tensorflow::TensorShapeProto_Dim& dim(int index) const;
   ::opencv_tensorflow::TensorShapeProto_Dim* mutable_dim(int index);
-  ::opencv_tensorflow::TensorShapeProto_Dim* add_dim();
   ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::TensorShapeProto_Dim >*
       mutable_dim();
+  const ::opencv_tensorflow::TensorShapeProto_Dim& dim(int index) const;
+  ::opencv_tensorflow::TensorShapeProto_Dim* add_dim();
   const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::TensorShapeProto_Dim >&
       dim() const;
 
@@ -324,9 +333,8 @@ class TensorShapeProto : public ::google::protobuf::Message /* @@protoc_insertio
   typedef void DestructorSkippable_;
   ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::TensorShapeProto_Dim > dim_;
   bool unknown_rank_;
-  mutable int _cached_size_;
+  mutable ::google::protobuf::internal::CachedSize _cached_size_;
   friend struct ::protobuf_tensor_5fshape_2eproto::TableStruct;
-  friend void ::protobuf_tensor_5fshape_2eproto::InitDefaultsTensorShapeProtoImpl();
 };
 // ===================================================================
 
@@ -348,7 +356,7 @@ inline ::google::protobuf::int64 TensorShapeProto_Dim::size() const {
   return size_;
 }
 inline void TensorShapeProto_Dim::set_size(::google::protobuf::int64 value) {
-
+  
   size_ = value;
   // @@protoc_insertion_point(field_set:opencv_tensorflow.TensorShapeProto.Dim.size)
 }
@@ -362,13 +370,13 @@ inline const ::std::string& TensorShapeProto_Dim::name() const {
   return name_.Get();
 }
 inline void TensorShapeProto_Dim::set_name(const ::std::string& value) {
-
+  
   name_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), value, GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set:opencv_tensorflow.TensorShapeProto.Dim.name)
 }
 #if LANG_CXX11
 inline void TensorShapeProto_Dim::set_name(::std::string&& value) {
-
+  
   name_.Set(
     &::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::move(value), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_rvalue:opencv_tensorflow.TensorShapeProto.Dim.name)
@@ -376,33 +384,33 @@ inline void TensorShapeProto_Dim::set_name(::std::string&& value) {
 #endif
 inline void TensorShapeProto_Dim::set_name(const char* value) {
   GOOGLE_DCHECK(value != NULL);
-
+  
   name_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(value),
               GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_char:opencv_tensorflow.TensorShapeProto.Dim.name)
 }
 inline void TensorShapeProto_Dim::set_name(const char* value,
     size_t size) {
-
+  
   name_.Set(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), ::std::string(
       reinterpret_cast<const char*>(value), size), GetArenaNoVirtual());
   // @@protoc_insertion_point(field_set_pointer:opencv_tensorflow.TensorShapeProto.Dim.name)
 }
 inline ::std::string* TensorShapeProto_Dim::mutable_name() {
-
+  
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.TensorShapeProto.Dim.name)
   return name_.Mutable(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline ::std::string* TensorShapeProto_Dim::release_name() {
   // @@protoc_insertion_point(field_release:opencv_tensorflow.TensorShapeProto.Dim.name)
-
+  
   return name_.Release(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), GetArenaNoVirtual());
 }
 inline void TensorShapeProto_Dim::set_allocated_name(::std::string* name) {
   if (name != NULL) {
-
+    
   } else {
-
+    
   }
   name_.SetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(), name,
       GetArenaNoVirtual());
@@ -411,7 +419,7 @@ inline void TensorShapeProto_Dim::set_allocated_name(::std::string* name) {
 inline ::std::string* TensorShapeProto_Dim::unsafe_arena_release_name() {
   // @@protoc_insertion_point(field_unsafe_arena_release:opencv_tensorflow.TensorShapeProto.Dim.name)
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
-
+  
   return name_.UnsafeArenaRelease(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       GetArenaNoVirtual());
 }
@@ -419,9 +427,9 @@ inline void TensorShapeProto_Dim::unsafe_arena_set_allocated_name(
     ::std::string* name) {
   GOOGLE_DCHECK(GetArenaNoVirtual() != NULL);
   if (name != NULL) {
-
+    
   } else {
-
+    
   }
   name_.UnsafeArenaSetAllocated(&::google::protobuf::internal::GetEmptyStringAlreadyInited(),
       name, GetArenaNoVirtual());
@@ -439,23 +447,23 @@ inline int TensorShapeProto::dim_size() const {
 inline void TensorShapeProto::clear_dim() {
   dim_.Clear();
 }
-inline const ::opencv_tensorflow::TensorShapeProto_Dim& TensorShapeProto::dim(int index) const {
-  // @@protoc_insertion_point(field_get:opencv_tensorflow.TensorShapeProto.dim)
-  return dim_.Get(index);
-}
 inline ::opencv_tensorflow::TensorShapeProto_Dim* TensorShapeProto::mutable_dim(int index) {
   // @@protoc_insertion_point(field_mutable:opencv_tensorflow.TensorShapeProto.dim)
   return dim_.Mutable(index);
 }
-inline ::opencv_tensorflow::TensorShapeProto_Dim* TensorShapeProto::add_dim() {
-  // @@protoc_insertion_point(field_add:opencv_tensorflow.TensorShapeProto.dim)
-  return dim_.Add();
-}
 inline ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::TensorShapeProto_Dim >*
 TensorShapeProto::mutable_dim() {
   // @@protoc_insertion_point(field_mutable_list:opencv_tensorflow.TensorShapeProto.dim)
   return &dim_;
 }
+inline const ::opencv_tensorflow::TensorShapeProto_Dim& TensorShapeProto::dim(int index) const {
+  // @@protoc_insertion_point(field_get:opencv_tensorflow.TensorShapeProto.dim)
+  return dim_.Get(index);
+}
+inline ::opencv_tensorflow::TensorShapeProto_Dim* TensorShapeProto::add_dim() {
+  // @@protoc_insertion_point(field_add:opencv_tensorflow.TensorShapeProto.dim)
+  return dim_.Add();
+}
 inline const ::google::protobuf::RepeatedPtrField< ::opencv_tensorflow::TensorShapeProto_Dim >&
 TensorShapeProto::dim() const {
   // @@protoc_insertion_point(field_list:opencv_tensorflow.TensorShapeProto.dim)
@@ -471,7 +479,7 @@ inline bool TensorShapeProto::unknown_rank() const {
   return unknown_rank_;
 }
 inline void TensorShapeProto::set_unknown_rank(bool value) {
-
+  
   unknown_rank_ = value;
   // @@protoc_insertion_point(field_set:opencv_tensorflow.TensorShapeProto.unknown_rank)
 }
@@ -488,4 +496,4 @@ inline void TensorShapeProto::set_unknown_rank(bool value) {
 
 // @@protoc_insertion_point(global_scope)
 
-#endif  // PROTOBUF_tensor_5fshape_2eproto__INCLUDED
+#endif  // PROTOBUF_INCLUDED_tensor_5fshape_2eproto
diff --git a/modules/dnn/misc/tensorflow/types.pb.cc b/modules/dnn/misc/tensorflow/types.pb.cc
index e5fa4ca59..164c4f97d 100644
--- a/modules/dnn/misc/tensorflow/types.pb.cc
+++ b/modules/dnn/misc/tensorflow/types.pb.cc
@@ -7,7 +7,6 @@
 
 #include <google/protobuf/stubs/common.h>
 #include <google/protobuf/stubs/port.h>
-#include <google/protobuf/stubs/once.h>
 #include <google/protobuf/io/coded_stream.h>
 #include <google/protobuf/wire_format_lite_inl.h>
 #include <google/protobuf/descriptor.h>
@@ -19,9 +18,13 @@
 #include "third_party/protobuf/version.h"
 #endif
 // @@protoc_insertion_point(includes)
+
 namespace opencv_tensorflow {
 }  // namespace opencv_tensorflow
 namespace protobuf_types_2eproto {
+void InitDefaults() {
+}
+
 const ::google::protobuf::EnumDescriptor* file_level_enum_descriptors[1];
 const ::google::protobuf::uint32 TableStruct::offsets[1] = {};
 static const ::google::protobuf::internal::MigrationSchema* schemas = NULL;
@@ -29,15 +32,14 @@ static const ::google::protobuf::Message* const* file_default_instances = NULL;
 
 void protobuf_AssignDescriptors() {
   AddDescriptors();
-  ::google::protobuf::MessageFactory* factory = NULL;
   AssignDescriptors(
-      "types.proto", schemas, file_default_instances, TableStruct::offsets, factory,
+      "types.proto", schemas, file_default_instances, TableStruct::offsets,
       NULL, file_level_enum_descriptors, NULL);
 }
 
 void protobuf_AssignDescriptorsOnce() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &protobuf_AssignDescriptors);
+  static ::google::protobuf::internal::once_flag once;
+  ::google::protobuf::internal::call_once(once, protobuf_AssignDescriptors);
 }
 
 void protobuf_RegisterTypes(const ::std::string&) GOOGLE_PROTOBUF_ATTRIBUTE_COLD;
@@ -75,8 +77,8 @@ void AddDescriptorsImpl() {
 }
 
 void AddDescriptors() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &AddDescriptorsImpl);
+  static ::google::protobuf::internal::once_flag once;
+  ::google::protobuf::internal::call_once(once, AddDescriptorsImpl);
 }
 // Force AddDescriptors() to be called at dynamic initialization time.
 struct StaticDescriptorInitializer {
@@ -140,5 +142,9 @@ bool DataType_IsValid(int value) {
 
 // @@protoc_insertion_point(namespace_scope)
 }  // namespace opencv_tensorflow
+namespace google {
+namespace protobuf {
+}  // namespace protobuf
+}  // namespace google
 
 // @@protoc_insertion_point(global_scope)
diff --git a/modules/dnn/misc/tensorflow/types.pb.h b/modules/dnn/misc/tensorflow/types.pb.h
index 1af1261c7..3ef6ee38b 100644
--- a/modules/dnn/misc/tensorflow/types.pb.h
+++ b/modules/dnn/misc/tensorflow/types.pb.h
@@ -1,19 +1,19 @@
 // Generated by the protocol buffer compiler.  DO NOT EDIT!
 // source: types.proto
 
-#ifndef PROTOBUF_types_2eproto__INCLUDED
-#define PROTOBUF_types_2eproto__INCLUDED
+#ifndef PROTOBUF_INCLUDED_types_2eproto
+#define PROTOBUF_INCLUDED_types_2eproto
 
 #include <string>
 
 #include <google/protobuf/stubs/common.h>
 
-#if GOOGLE_PROTOBUF_VERSION < 3005000
+#if GOOGLE_PROTOBUF_VERSION < 3006001
 #error This file was generated by a newer version of protoc which is
 #error incompatible with your Protocol Buffer headers.  Please update
 #error your headers.
 #endif
-#if 3005001 < GOOGLE_PROTOBUF_MIN_PROTOC_VERSION
+#if 3006001 < GOOGLE_PROTOBUF_MIN_PROTOC_VERSION
 #error This file was generated by an older version of protoc which is
 #error incompatible with your Protocol Buffer headers.  Please
 #error regenerate this file with a newer version of protoc.
@@ -24,11 +24,13 @@
 #include <google/protobuf/arenastring.h>
 #include <google/protobuf/generated_message_table_driven.h>
 #include <google/protobuf/generated_message_util.h>
+#include <google/protobuf/inlined_string_field.h>
 #include <google/protobuf/metadata.h>
 #include <google/protobuf/repeated_field.h>  // IWYU pragma: export
 #include <google/protobuf/extension_set.h>  // IWYU pragma: export
 #include <google/protobuf/generated_enum_reflection.h>
 // @@protoc_insertion_point(includes)
+#define PROTOBUF_INTERNAL_EXPORT_protobuf_types_2eproto 
 
 namespace protobuf_types_2eproto {
 // Internal implementation detail -- do not use these members.
@@ -41,8 +43,6 @@ struct TableStruct {
   static const ::google::protobuf::uint32 offsets[];
 };
 void AddDescriptors();
-inline void InitDefaults() {
-}
 }  // namespace protobuf_types_2eproto
 namespace opencv_tensorflow {
 }  // namespace opencv_tensorflow
@@ -129,7 +129,7 @@ inline bool DataType_Parse(
 namespace google {
 namespace protobuf {
 
-template <> struct is_proto_enum< ::opencv_tensorflow::DataType> : ::google::protobuf::internal::true_type {};
+template <> struct is_proto_enum< ::opencv_tensorflow::DataType> : ::std::true_type {};
 template <>
 inline const EnumDescriptor* GetEnumDescriptor< ::opencv_tensorflow::DataType>() {
   return ::opencv_tensorflow::DataType_descriptor();
@@ -140,4 +140,4 @@ inline const EnumDescriptor* GetEnumDescriptor< ::opencv_tensorflow::DataType>()
 
 // @@protoc_insertion_point(global_scope)
 
-#endif  // PROTOBUF_types_2eproto__INCLUDED
+#endif  // PROTOBUF_INCLUDED_types_2eproto
diff --git a/modules/dnn/misc/tensorflow/versions.pb.cc b/modules/dnn/misc/tensorflow/versions.pb.cc
index 08ae2aa58..fca9a4ba8 100644
--- a/modules/dnn/misc/tensorflow/versions.pb.cc
+++ b/modules/dnn/misc/tensorflow/versions.pb.cc
@@ -7,7 +7,6 @@
 
 #include <google/protobuf/stubs/common.h>
 #include <google/protobuf/stubs/port.h>
-#include <google/protobuf/stubs/once.h>
 #include <google/protobuf/io/coded_stream.h>
 #include <google/protobuf/wire_format_lite_inl.h>
 #include <google/protobuf/descriptor.h>
@@ -19,6 +18,7 @@
 #include "third_party/protobuf/version.h"
 #endif
 // @@protoc_insertion_point(includes)
+
 namespace opencv_tensorflow {
 class VersionDefDefaultTypeInternal {
  public:
@@ -27,14 +27,9 @@ class VersionDefDefaultTypeInternal {
 } _VersionDef_default_instance_;
 }  // namespace opencv_tensorflow
 namespace protobuf_versions_2eproto {
-void InitDefaultsVersionDefImpl() {
+static void InitDefaultsVersionDef() {
   GOOGLE_PROTOBUF_VERIFY_VERSION;
 
-#ifdef GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
-  ::google::protobuf::internal::InitProtobufDefaultsForceUnique();
-#else
-  ::google::protobuf::internal::InitProtobufDefaults();
-#endif  // GOOGLE_PROTOBUF_ENFORCE_UNIQUENESS
   {
     void* ptr = &::opencv_tensorflow::_VersionDef_default_instance_;
     new (ptr) ::opencv_tensorflow::VersionDef();
@@ -43,9 +38,11 @@ void InitDefaultsVersionDefImpl() {
   ::opencv_tensorflow::VersionDef::InitAsDefaultInstance();
 }
 
-void InitDefaultsVersionDef() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &InitDefaultsVersionDefImpl);
+::google::protobuf::internal::SCCInfo<0> scc_info_VersionDef =
+    {{ATOMIC_VAR_INIT(::google::protobuf::internal::SCCInfoBase::kUninitialized), 0, InitDefaultsVersionDef}, {}};
+
+void InitDefaults() {
+  ::google::protobuf::internal::InitSCC(&scc_info_VersionDef.base);
 }
 
 ::google::protobuf::Metadata file_level_metadata[1];
@@ -70,15 +67,14 @@ static ::google::protobuf::Message const * const file_default_instances[] = {
 
 void protobuf_AssignDescriptors() {
   AddDescriptors();
-  ::google::protobuf::MessageFactory* factory = NULL;
   AssignDescriptors(
-      "versions.proto", schemas, file_default_instances, TableStruct::offsets, factory,
+      "versions.proto", schemas, file_default_instances, TableStruct::offsets,
       file_level_metadata, NULL, NULL);
 }
 
 void protobuf_AssignDescriptorsOnce() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &protobuf_AssignDescriptors);
+  static ::google::protobuf::internal::once_flag once;
+  ::google::protobuf::internal::call_once(once, protobuf_AssignDescriptors);
 }
 
 void protobuf_RegisterTypes(const ::std::string&) GOOGLE_PROTOBUF_ATTRIBUTE_COLD;
@@ -103,8 +99,8 @@ void AddDescriptorsImpl() {
 }
 
 void AddDescriptors() {
-  static GOOGLE_PROTOBUF_DECLARE_ONCE(once);
-  ::google::protobuf::GoogleOnceInit(&once, &AddDescriptorsImpl);
+  static ::google::protobuf::internal::once_flag once;
+  ::google::protobuf::internal::call_once(once, AddDescriptorsImpl);
 }
 // Force AddDescriptors() to be called at dynamic initialization time.
 struct StaticDescriptorInitializer {
@@ -127,9 +123,8 @@ const int VersionDef::kBadConsumersFieldNumber;
 
 VersionDef::VersionDef()
   : ::google::protobuf::Message(), _internal_metadata_(NULL) {
-  if (GOOGLE_PREDICT_TRUE(this != internal_default_instance())) {
-    ::protobuf_versions_2eproto::InitDefaultsVersionDef();
-  }
+  ::google::protobuf::internal::InitSCC(
+      &protobuf_versions_2eproto::scc_info_VersionDef.base);
   SharedCtor();
   // @@protoc_insertion_point(constructor:opencv_tensorflow.VersionDef)
 }
@@ -137,7 +132,7 @@ VersionDef::VersionDef(::google::protobuf::Arena* arena)
   : ::google::protobuf::Message(),
   _internal_metadata_(arena),
   bad_consumers_(arena) {
-  ::protobuf_versions_2eproto::InitDefaultsVersionDef();
+  ::google::protobuf::internal::InitSCC(&protobuf_versions_2eproto::scc_info_VersionDef.base);
   SharedCtor();
   RegisterArenaDtor(arena);
   // @@protoc_insertion_point(arena_constructor:opencv_tensorflow.VersionDef)
@@ -145,8 +140,7 @@ VersionDef::VersionDef(::google::protobuf::Arena* arena)
 VersionDef::VersionDef(const VersionDef& from)
   : ::google::protobuf::Message(),
       _internal_metadata_(NULL),
-      bad_consumers_(from.bad_consumers_),
-      _cached_size_(0) {
+      bad_consumers_(from.bad_consumers_) {
   _internal_metadata_.MergeFrom(from._internal_metadata_);
   ::memcpy(&producer_, &from.producer_,
     static_cast<size_t>(reinterpret_cast<char*>(&min_consumer_) -
@@ -158,7 +152,6 @@ void VersionDef::SharedCtor() {
   ::memset(&producer_, 0, static_cast<size_t>(
       reinterpret_cast<char*>(&min_consumer_) -
       reinterpret_cast<char*>(&producer_)) + sizeof(min_consumer_));
-  _cached_size_ = 0;
 }
 
 VersionDef::~VersionDef() {
@@ -177,9 +170,7 @@ void VersionDef::ArenaDtor(void* object) {
 void VersionDef::RegisterArenaDtor(::google::protobuf::Arena* arena) {
 }
 void VersionDef::SetCachedSize(int size) const {
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  _cached_size_.Set(size);
 }
 const ::google::protobuf::Descriptor* VersionDef::descriptor() {
   ::protobuf_versions_2eproto::protobuf_AssignDescriptorsOnce();
@@ -187,13 +178,10 @@ const ::google::protobuf::Descriptor* VersionDef::descriptor() {
 }
 
 const VersionDef& VersionDef::default_instance() {
-  ::protobuf_versions_2eproto::InitDefaultsVersionDef();
+  ::google::protobuf::internal::InitSCC(&protobuf_versions_2eproto::scc_info_VersionDef.base);
   return *internal_default_instance();
 }
 
-VersionDef* VersionDef::New(::google::protobuf::Arena* arena) const {
-  return ::google::protobuf::Arena::CreateMessage<VersionDef>(arena);
-}
 
 void VersionDef::Clear() {
 // @@protoc_insertion_point(message_clear_start:opencv_tensorflow.VersionDef)
@@ -214,7 +202,7 @@ bool VersionDef::MergePartialFromCodedStream(
   ::google::protobuf::uint32 tag;
   // @@protoc_insertion_point(parse_start:opencv_tensorflow.VersionDef)
   for (;;) {
-    ::std::pair< ::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
+    ::std::pair<::google::protobuf::uint32, bool> p = input->ReadTagWithCutoffNoLastTag(127u);
     tag = p.first;
     if (!p.second) goto handle_unusual;
     switch (::google::protobuf::internal::WireFormatLite::GetTagFieldNumber(tag)) {
@@ -397,9 +385,7 @@ size_t VersionDef::ByteSizeLong() const {
   }
 
   int cached_size = ::google::protobuf::internal::ToCachedSize(total_size);
-  GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN();
-  _cached_size_ = cached_size;
-  GOOGLE_SAFE_CONCURRENT_WRITES_END();
+  SetCachedSize(cached_size);
   return total_size;
 }
 
@@ -477,7 +463,6 @@ void VersionDef::InternalSwap(VersionDef* other) {
   swap(producer_, other->producer_);
   swap(min_consumer_, other->min_consumer_);
   _internal_metadata_.Swap(&other->_internal_metadata_);
-  swap(_cached_size_, other->_cached_size_);
 }
 
 ::google::protobuf::Metadata VersionDef::GetMetadata() const {
@@ -488,5 +473,12 @@ void VersionDef::InternalSwap(VersionDef* other) {
 
 // @@protoc_insertion_point(namespace_scope)
 }  // namespace opencv_tensorflow
+namespace google {
+namespace protobuf {
+template<> GOOGLE_PROTOBUF_ATTRIBUTE_NOINLINE ::opencv_tensorflow::VersionDef* Arena::CreateMaybeMessage< ::opencv_tensorflow::VersionDef >(Arena* arena) {
+  return Arena::CreateMessageInternal< ::opencv_tensorflow::VersionDef >(arena);
+}
+}  // namespace protobuf
+}  // namespace google
 
 // @@protoc_insertion_point(global_scope)
diff --git a/modules/dnn/misc/tensorflow/versions.pb.h b/modules/dnn/misc/tensorflow/versions.pb.h
index 193081d54..f235f76d9 100644
--- a/modules/dnn/misc/tensorflow/versions.pb.h
+++ b/modules/dnn/misc/tensorflow/versions.pb.h
@@ -1,19 +1,19 @@
 // Generated by the protocol buffer compiler.  DO NOT EDIT!
 // source: versions.proto
 
-#ifndef PROTOBUF_versions_2eproto__INCLUDED
-#define PROTOBUF_versions_2eproto__INCLUDED
+#ifndef PROTOBUF_INCLUDED_versions_2eproto
+#define PROTOBUF_INCLUDED_versions_2eproto
 
 #include <string>
 
 #include <google/protobuf/stubs/common.h>
 
-#if GOOGLE_PROTOBUF_VERSION < 3005000
+#if GOOGLE_PROTOBUF_VERSION < 3006001
 #error This file was generated by a newer version of protoc which is
 #error incompatible with your Protocol Buffer headers.  Please update
 #error your headers.
 #endif
-#if 3005001 < GOOGLE_PROTOBUF_MIN_PROTOC_VERSION
+#if 3006001 < GOOGLE_PROTOBUF_MIN_PROTOC_VERSION
 #error This file was generated by an older version of protoc which is
 #error incompatible with your Protocol Buffer headers.  Please
 #error regenerate this file with a newer version of protoc.
@@ -24,12 +24,14 @@
 #include <google/protobuf/arenastring.h>
 #include <google/protobuf/generated_message_table_driven.h>
 #include <google/protobuf/generated_message_util.h>
+#include <google/protobuf/inlined_string_field.h>
 #include <google/protobuf/metadata.h>
 #include <google/protobuf/message.h>
 #include <google/protobuf/repeated_field.h>  // IWYU pragma: export
 #include <google/protobuf/extension_set.h>  // IWYU pragma: export
 #include <google/protobuf/unknown_field_set.h>
 // @@protoc_insertion_point(includes)
+#define PROTOBUF_INTERNAL_EXPORT_protobuf_versions_2eproto 
 
 namespace protobuf_versions_2eproto {
 // Internal implementation detail -- do not use these members.
@@ -42,17 +44,17 @@ struct TableStruct {
   static const ::google::protobuf::uint32 offsets[];
 };
 void AddDescriptors();
-void InitDefaultsVersionDefImpl();
-void InitDefaultsVersionDef();
-inline void InitDefaults() {
-  InitDefaultsVersionDef();
-}
 }  // namespace protobuf_versions_2eproto
 namespace opencv_tensorflow {
 class VersionDef;
 class VersionDefDefaultTypeInternal;
 extern VersionDefDefaultTypeInternal _VersionDef_default_instance_;
 }  // namespace opencv_tensorflow
+namespace google {
+namespace protobuf {
+template<> ::opencv_tensorflow::VersionDef* Arena::CreateMaybeMessage<::opencv_tensorflow::VersionDef>(Arena*);
+}  // namespace protobuf
+}  // namespace google
 namespace opencv_tensorflow {
 
 // ===================================================================
@@ -83,10 +85,10 @@ class VersionDef : public ::google::protobuf::Message /* @@protoc_insertion_poin
     return *this;
   }
   #endif
-  inline ::google::protobuf::Arena* GetArena() const PROTOBUF_FINAL {
+  inline ::google::protobuf::Arena* GetArena() const final {
     return GetArenaNoVirtual();
   }
-  inline void* GetMaybeArenaPointer() const PROTOBUF_FINAL {
+  inline void* GetMaybeArenaPointer() const final {
     return MaybeArenaPtr();
   }
   static const ::google::protobuf::Descriptor* descriptor();
@@ -97,7 +99,7 @@ class VersionDef : public ::google::protobuf::Message /* @@protoc_insertion_poin
     return reinterpret_cast<const VersionDef*>(
                &_VersionDef_default_instance_);
   }
-  static PROTOBUF_CONSTEXPR int const kIndexInFileMessages =
+  static constexpr int kIndexInFileMessages =
     0;
 
   void UnsafeArenaSwap(VersionDef* other);
@@ -108,28 +110,33 @@ class VersionDef : public ::google::protobuf::Message /* @@protoc_insertion_poin
 
   // implements Message ----------------------------------------------
 
-  inline VersionDef* New() const PROTOBUF_FINAL { return New(NULL); }
+  inline VersionDef* New() const final {
+    return CreateMaybeMessage<VersionDef>(NULL);
+  }
 
-  VersionDef* New(::google::protobuf::Arena* arena) const PROTOBUF_FINAL;
-  void CopyFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
-  void MergeFrom(const ::google::protobuf::Message& from) PROTOBUF_FINAL;
+  VersionDef* New(::google::protobuf::Arena* arena) const final {
+    return CreateMaybeMessage<VersionDef>(arena);
+  }
+  void CopyFrom(const ::google::protobuf::Message& from) final;
+  void MergeFrom(const ::google::protobuf::Message& from) final;
   void CopyFrom(const VersionDef& from);
   void MergeFrom(const VersionDef& from);
-  void Clear() PROTOBUF_FINAL;
-  bool IsInitialized() const PROTOBUF_FINAL;
+  void Clear() final;
+  bool IsInitialized() const final;
 
-  size_t ByteSizeLong() const PROTOBUF_FINAL;
+  size_t ByteSizeLong() const final;
   bool MergePartialFromCodedStream(
-      ::google::protobuf::io::CodedInputStream* input) PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedInputStream* input) final;
   void SerializeWithCachedSizes(
-      ::google::protobuf::io::CodedOutputStream* output) const PROTOBUF_FINAL;
+      ::google::protobuf::io::CodedOutputStream* output) const final;
   ::google::protobuf::uint8* InternalSerializeWithCachedSizesToArray(
-      bool deterministic, ::google::protobuf::uint8* target) const PROTOBUF_FINAL;
-  int GetCachedSize() const PROTOBUF_FINAL { return _cached_size_; }
+      bool deterministic, ::google::protobuf::uint8* target) const final;
+  int GetCachedSize() const final { return _cached_size_.Get(); }
+
   private:
   void SharedCtor();
   void SharedDtor();
-  void SetCachedSize(int size) const PROTOBUF_FINAL;
+  void SetCachedSize(int size) const final;
   void InternalSwap(VersionDef* other);
   protected:
   explicit VersionDef(::google::protobuf::Arena* arena);
@@ -145,7 +152,7 @@ class VersionDef : public ::google::protobuf::Message /* @@protoc_insertion_poin
   }
   public:
 
-  ::google::protobuf::Metadata GetMetadata() const PROTOBUF_FINAL;
+  ::google::protobuf::Metadata GetMetadata() const final;
 
   // nested types ----------------------------------------------------
 
@@ -186,9 +193,8 @@ class VersionDef : public ::google::protobuf::Message /* @@protoc_insertion_poin
   mutable int _bad_consumers_cached_byte_size_;
   ::google::protobuf::int32 producer_;
   ::google::protobuf::int32 min_consumer_;
-  mutable int _cached_size_;
+  mutable ::google::protobuf::internal::CachedSize _cached_size_;
   friend struct ::protobuf_versions_2eproto::TableStruct;
-  friend void ::protobuf_versions_2eproto::InitDefaultsVersionDefImpl();
 };
 // ===================================================================
 
@@ -210,7 +216,7 @@ inline ::google::protobuf::int32 VersionDef::producer() const {
   return producer_;
 }
 inline void VersionDef::set_producer(::google::protobuf::int32 value) {
-
+  
   producer_ = value;
   // @@protoc_insertion_point(field_set:opencv_tensorflow.VersionDef.producer)
 }
@@ -224,7 +230,7 @@ inline ::google::protobuf::int32 VersionDef::min_consumer() const {
   return min_consumer_;
 }
 inline void VersionDef::set_min_consumer(::google::protobuf::int32 value) {
-
+  
   min_consumer_ = value;
   // @@protoc_insertion_point(field_set:opencv_tensorflow.VersionDef.min_consumer)
 }
@@ -269,4 +275,4 @@ VersionDef::mutable_bad_consumers() {
 
 // @@protoc_insertion_point(global_scope)
 
-#endif  // PROTOBUF_versions_2eproto__INCLUDED
+#endif  // PROTOBUF_INCLUDED_versions_2eproto
